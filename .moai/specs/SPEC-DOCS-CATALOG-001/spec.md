---
SPEC_ID: SPEC-DOCS-CATALOG-001
Title: 기능 카탈로그 편집
Created: 2026-01-19
Status: Planned
Priority: Medium
Assigned: workflow-spec
Related_SPECs: SPEC-DOCS-AUTO-001, SPEC-DOCS-MANUAL-001, SPEC-DOCS-UI-001
---

# HISTORY

| 버전 | 날짜 | 변경사항 | 작성자 |
|------|------|----------|--------|
| 1.0.0 | 2026-01-19 | 초기 SPEC 작성 | Alfred |

---

# 기능 카탈로그 편집

## 환경

### 대상 프로젝트
- 프로젝트명: Tally Node
- 하드웨어: EoRa-S3 (ESP32-S3 + SX1262 LoRa)
- 펌웨어: ESP-IDF 5.5.0 기반 C/C++
- 웹 UI: Alpine.js + TailwindCSS + DaisyUI

### 카탈로그 범위
- 하드웨어 기능
- 소프트웨어 기능
- 프로토콜 지원
- 구성 옵션
- 운영 모드

## 가정

### 선행 조건
- [A1] product.md, structure.md, tech.md 문서가 존재함
- [A2] 소스 코드에서 기능 목록 추출 가능함
- [A3] 웹 UI에서 확인 가능한 기능이 있음

### 기술 가정
- [T1] 모든 기능이 문서화될 수 있음
- [T2] 기능 간 의존성 파악 가능함
- [T3] 기능 분류 체계가 존재함

### 제약 사항
- [C1] 카탈로그는 사용자가 이해하기 쉬운 용어로 작성되어야 함
- [C2] 기능 상태(지원/개발 중/계획)를 명확히 표시해야 함
- [C3] 버전별 기능 지원 현황을 포함해야 함

## 요구사항

### 1. 하드웨어 기능 카탈로그 (Ubiquitous)

카탈로그는 항상 모든 하드웨어 기능과 사양을 포함해야 한다.

- **REQ-CATALOG-001**: ESP32-S3 MCU 사양을 포함해야 한다
- **REQ-CATALOG-002**: LoRa 모듈(SX1262) 사양을 포함해야 한다
- **REQ-CATALOG-003**: 디스플레이(OLED) 사양을 포함해야 한다
- **REQ-CATALOG-004**: LED(WS2812) 사양을 포함해야 한다
- **REQ-CATALOG-005**: 주변 하드웨어(배터리, 버튼)를 포함해야 한다

### 2. 소프트웨어 기능 카탈로그 (Event-Driven)

**WHEN** 새로운 기능이 추가되면, 시스템은 **THEN** 카탈로그를 자동으로 갱신해야 한다.

- **REQ-CATALOG-006**: TX 모드 기능 목록을 제공해야 한다
- **REQ-CATALOG-007**: RX 모드 기능 목록을 제공해야 한다
- **REQ-CATALOG-008**: 웹 UI 기능 목록을 제공해야 한다
- **REQ-CATALOG-009**: 시스템 기능(로깅, 업데이트 등)을 포함해야 한다

### 3. 프로토콜 지원 카탈로그 (State-Driven)

**IF** 스위처 프로토콜이 지원되면, 시스템은 **THEN** 해당 프로토콜의 세부 정보를 카탈로그에 포함해야 한다.

- **REQ-CATALOG-010**: ATEM 프로토콜 지원 현황을 제공해야 한다
- **REQ-CATALOG-011**: vMix 프로토콜 지원 현황을 제공해야 한다
- **REQ-CATALOG-012**: OBS 프로토콜 지원 현황을 제공해야 한다
- **REQ-CATALOG-013**: 각 프로토콜의 지원 기능과 제한 사항을 명시해야 한다

### 4. 구성 옵션 카탈로그 (Optional)

가능하면 모든 구성 옵션과 가능한 값을 카탈로그화해야 한다.

- **REQ-CATALOG-014**: LoRa RF 파라미터 옵션을 제공해야 한다
- **REQ-CATALOG-015**: 네트워크 설정 옵션을 제공해야 한다
- **REQ-CATALOG-016**: LED/디스플레이 설정 옵션을 제공해야 한다
- **REQ-CATALOG-017**: 시스템 설정 옵션을 제공해야 한다

### 5. 카탈로그 형식 표준 (Unwanted)

카탈로그는 일관되지 않은 형식이나 구조로 작성되어서는 안 된다.

- **REQ-CATALOG-018**: 모든 항목은 일관된 구조를 따라야 한다
- **REQ-CATALOG-019]: 기능 상태(지원/개발 중/계획)를 명확히 표시해야 한다
- **REQ-CATALOG-020]: 관련 기능 간의 링크를 제공해야 한다
- **REQ-CATALOG-021]: 버전별 변경 사항을 추적할 수 있어야 한다

## 명세

### 모듈 1: 하드웨어 카탈로그

**목적**: 모든 하드웨어 구성 요소 및 사양 문서화

**카탈로그 구조**:

#### 1.1 메인 보드 (EoRa-S3)
| 항목 | 사양 | 설명 |
|------|------|------|
| MCU | ESP32-S3 | Xtensa LX7 듀얼 코어 @ 240MHz |
| Flash | 4MB | 펌웨어 저장용 |
| PSRAM | 8MB (옵션) | 추가 메모리 |
| WiFi | 802.11 b/g/n | 2.4GHz 대역 |
| Bluetooth | BLE 5.0 | 저전력 블루투스 |
| USB CDC | 지원 | 온부트 지원 |
| RAM | 320KB (최대) | 시스템 메모리 |

#### 1.2 LoRa 모듈 (SX1262)
| 항목 | 사양 | 설명 |
|------|------|------|
| 칩셋 | SX1262 | LoRa transceiver |
| 주파수 | 923MHz | 한국 대역 |
| 대역폭 | 125-500kHz | 가변 |
| 확장 인자(SF) | 7-12 | 가변 |
| 출력 전력 | 최대 22dBm | 가변 |
| 통신 거리 | 최대 수km | 환경 의존 |

#### 1.3 디스플레이 (OLED)
| 항목 | 사양 | 설명 |
|------|------|------|
| 크기 | 128x64 | 해상도 |
| 인터페이스 | I2C | 통신 방식 |
| 드라이버 | SH1106/SSD1306 | 호환 칩 |
| 색상 | 단색 (흑백) | 블루/화이트 |

#### 1.4 LED (WS2812)
| 항목 | 사양 | 설명 |
|------|------|------|
| 칩셋 | WS2812B | RGB LED |
| 인터페이스 | GPIO + RMT | 제어 방식 |
| 색상 | 16,777,216 | 24비트 컬러 |
| 밝기 | 0-255 | 가변 |

#### 1.5 주변 하드웨어
| 항목 | 사양 | 설명 |
|------|------|------|
| 배터리 | Li-Polymer | 3.7V |
| 버튼 | 풀업 스위치 | 1개 |
| 온도 센서 | 내장 | ESP32-S3 |
| ADC | 12비트 | 배터리 모니터링 |

### 모듈 2: 소프트웨어 기능 카탈로그

**목적**: 모든 소프트웨어 기능 및 모듈 문서화

#### 2.1 TX 모드 기능
| 기능 | 설명 | 상태 |
|------|------|------|
| 스위처 연결 | ATEM/vMix/OBS 연결 | 지원 |
| 듀얼모드 | Primary/Secondary 스위처 | 지원 |
| Tally 수집 | 스위처에서 Tally 정보 수집 | 지원 |
| LoRa 송신 | Tally 정보 무선 전송 | 지원 |
| 웹 서버 | 설정 및 모니터링 UI | 지원 |
| 디바이스 관리 | RX 장치 상태 모니터링 | 지원 |
| 상태 요청 | 주기적/즉시 상태 요청 | 지원 |

#### 2.2 RX 모드 기능
| 기능 | 설명 | 상태 |
|------|------|------|
| LoRa 수신 | Tally 정보 수신 | 지원 |
| LED 표시 | Program/Preview 표시 | 지원 |
| 디스플레이 | 상태 정보 표시 | 지원 |
| 배터리 모니터링 | 잔량 및 저전량 경고 | 지원 |
| 카메라 ID | 1-20 할당 | 지원 |
| 상태 응답 | TX 요청 시 상태 송신 | 지원 |
| Deep Sleep | 저전력 모드 | 지원 |

#### 2.3 웹 UI 기능
| 기능 | 설명 | 상태 |
|------|------|------|
| 대시보드 | 실시간 상태 모니터링 | 지원 |
| 네트워크 설정 | WiFi/Ethernet 설정 | 지원 |
| 스위처 설정 | ATEM/vMix/OBS 설정 | 지원 |
| LoRa 설정 | RF 파라미터 설정 | 지원 |
| 디바이스 관리 | RX 장치 목록 및 상태 | 지원 |
| 시스템 정보 | 펌웨어/라이선스 정보 | 지원 |
| 실시간 업데이트 | SSE 기반 상태 업데이트 | 지원 |

#### 2.4 시스템 기능
| 기능 | 설명 | 상태 |
|------|------|------|
| 이벤트 버스 | Pub/Sub 메시징 | 지원 |
| 로깅 | 구조화된 로깅 | 지원 |
| 설정 저장 | NVS 기반 영구 저장 | 지원 |
| OTA 업데이트 | 무선 펌웨어 업데이트 | 계획 |
| 라이선스 관리 | 라이선스 검증 | 지원 |

### 모듈 3: 프로토콜 지원 카탈로그

**목적**: 지원하는 스위처 프로토콜 및 기능 문서화

#### 3.1 ATEM Protocol
| 항목 | 값 | 설명 |
|------|------|------|
| 프로토콜 | UDP | Blackmagic ATEM |
| 포트 | 9910 | 표준 포트 |
| 상태 | 지원 | 안정적 동작 |
| 최대 채널 | 20 | 지원 카메라 수 |
| Tally 타입 | Program/Preview | 모두 지원 |

**지원 기능**:
- [x] Tally 상태 수신
- [x] 연결 상태 모니터링
- [x] 자동 재연결
- [ ] 미디어 클립 정보 (계획)

#### 3.2 vMix Protocol
| 항목 | 값 | 설명 |
|------|------|------|
| 프로토콜 | TCP | vMix Controller |
| 포트 | 8099 | 표준 포트 |
| 상태 | 지원 | 안정적 동작 |
| 최대 채널 | 20 | 지원 카메라 수 |
| Tally 타입 | Program/Preview | 모두 지원 |

**지원 기능**:
- [x] Tally XML 구독
- [x] PING 유지
- [x] 자동 재연결
- [ ] 출력 상태 정보 (계획)

#### 3.3 OBS Protocol
| 항목 | 값 | 설명 |
|------|------|------|
| 프로토콜 | WebSocket | OBS WebSocket |
| 포트 | 4455 | 표준 포트 |
| 상태 | 개발 중 | 베타 테스트 |
| 최대 채널 | 20 | 지원 카메라 수 |
| Tally 타입 | Program/Preview | 모두 지원 |

**지원 기능**:
- [x] 연결 관리
- [x] Tally 수신 (구현 중)
- [ ] 자동 재연결 (계획)
- [ ] 장면 전환 감지 (계획)

### 모듈 4: 구성 옵션 카탈로그

**목적**: 모든 구성 옵션 및 가능한 값 문서화

#### 4.1 LoRa RF 파라미터
| 파라미터 | 범위 | 기본값 | 설명 |
|----------|------|--------|------|
| 주파수(MHz) | 920-928 | 923.0 | 한국 대역 |
| SF | 7-12 | 9 | 확장 인자 |
| 대역폭(kHz) | 125, 250, 500 | 125 | 신호 대역폭 |
| CR | 5-8 | 5 | 코딩 레이트 |
| 출력 전력(dBm) | -9~22 | 17 | 송신 전력 |
| Sync Word | 0x12, 0x24 | 0x12 | 동기화 워드 |

#### 4.2 네트워크 설정
| 파라미터 | 타입 | 범위 | 설명 |
|----------|------|------|------|
| WiFi SSID | 문자열 | 1-32자 | WiFi 네트워크 이름 |
| WiFi 비밀번호 | 문자열 | 8-64자 | WPA2 비밀번호 |
| IP 할당 | DHCP/Static | - | IP 주소 할당 방식 |
| 고정 IP | 문자열 | - | x.x.x.x 형식 |
| 서브넷 마스크 | 문자열 | - | x.x.x.x 형식 |
| 게이트웨이 | 문자열 | - | x.x.x.x 형식 |
| DNS | 문자열 | - | x.x.x.x 형식 |

#### 4.3 LED/디스플레이 설정
| 파라미터 | 범위 | 기본값 | 설명 |
|----------|------|--------|------|
| Program 색상(R) | 0-255 | 255 | 빨강 |
| Program 색상(G) | 0-255 | 0 | 녹색 |
| Program 색상(B) | 0-255 | 0 | 파랑 |
| Preview 색상(R) | 0-255 | 0 | 빨강 |
| Preview 색상(G) | 0-255 | 255 | 녹색 |
| Preview 색상(B) | 0-255 | 0 | 파랑 |
| 밝기 | 0-255 | 128 | LED 밝기 |
| 카메라 ID | 1-20 | 1 | RX 장치 ID |

#### 4.4 시스템 설정
| 파라미터 | 타입 | 범위 | 설명 |
|----------|------|------|------|
| 기기 모드 | TX/RX | - | 운영 모드 |
| 디바이스 ID | 문자열 | - | 고유 식별자 |
| 언어 | ko/en | ko | UI 언어 |
| 로깅 레벨 | ERROR/WARN/INFO/DEBUG | INFO | 로그 상세도 |

### 모듈 5: 버전별 기능 추적

**목적**: 펌웨어 버전별 기능 지원 현황 추적

#### 5.1 기능 릴리스 히스토리
| 버전 | 릴리스일 | 주요 기능 | 비고 |
|------|----------|----------|------|
| 1.0.0 | 2024-XX-XX | 초기 릴리스 | TX/RX 기본 기능 |
| 1.1.0 | 2024-XX-XX | 듀얼모드 추가 | ATEM+vMix 동시 지원 |
| 1.2.0 | 2024-XX-XX | OBS 프로토콜 | 개발 중 |
| 2.0.0 | 계획 | OTA 업데이트 | 계획 |

#### 5.2 기능 매트릭스
| 기능 | v1.0.x | v1.1.x | v1.2.x | v2.0.0 |
|------|--------|--------|--------|---------|
| ATEM 지원 | ✅ | ✅ | ✅ | ✅ |
| vMix 지원 | ✅ | ✅ | ✅ | ✅ |
| OBS 지원 | ❌ | ❌ | 🔄 | ✅ |
| 듀얼모드 | ❌ | ✅ | ✅ | ✅ |
| OTA | ❌ | ❌ | ❌ | ✅ |

## 추적성 태그

### 하드웨어 카테고리
- `HW-CATALOG-BOARD`: 메인 보드 사양
- `HW-CATALOG-LORA`: LoRa 모듈
- `HW-CATALOG-DISPLAY`: 디스플레이
- `HW-CATALOG-LED`: LED
- `HW-CATALOG-PERIPHERAL`: 주변 하드웨어

### 소프트웨어 카테고리
- `SW-CATALOG-TX`: TX 모드 기능
- `SW-CATALOG-RX`: RX 모드 기능
- `SW-CATALOG-WEB`: 웹 UI 기능
- `SW-CATALOG-SYSTEM`: 시스템 기능

### 프로토콜 카테고리
- `PROTO-CATALOG-ATEM`: ATEM 프로토콜
- `PROTO-CATALOG-VMIX`: vMix 프로토콜
- `PROTO-CATALOG-OBS`: OBS 프로토콜

### 상태 추적
- `STATUS-SUPPORTED`: 지원
- `STATUS-DEV`: 개발 중
- `STATUS-PLANNED`: 계획
- `STATUS-DEPRECATED`: 폐지
