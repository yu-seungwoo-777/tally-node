# Tally Node TX 모드 사용자 가이드

<!-- FEAT-MANUAL-TX -->
<!-- AUD-MANUAL-ENGINEER -->
<!-- AUD-MANUAL-BEGINNER -->

## 목차

1. [TX 모드 개요](#1-tx-모드-개요)
2. [하드웨어 연결](#2-하드웨어-연결)
3. [초기 설정](#3-초기-설정)
4. [스위처 설정](#4-스위처-설정)
5. [듀얼모드 설정](#5-듀얼모드-설정)
6. [웹 UI 사용법](#6-웹-ui-사용법)
7. [LoRa 설정](#7-lora-설정)

---

## 1. TX 모드 개요

### TX 모드란?

TX (Transmitter) 모드는 비디오 스위처에서 Tally 정보를 수집하여 LoRa 무선 통신으로 RX 장치들에게 전송하는 모드입니다.

**주요 기능:**
- 비디오 스위처(ATEM, vMix, OBS)와 연동
- 실시간 Tally 상태 감지
- LoRa 무선 송신 (최대 20개 RX 장치 지원)
- 웹 기반 설정 및 모니터링

### 사용 시나리오

| 시나리오 | 설명 |
|----------|------|
| **방송 스튜디오** | 스위처 Tally 정보를 카메라맨에게 무선 전송 |
| **라이브 스트리밍** | vMix Tally를 원격 카메라로 전달 |
| **교육/행사** | 다중 카메라 운영 시 Tally 표시 자동화 |

### 필수 하드웨어

- [x] Tally Node TX 장치
- [x] 전원 어댑터 (5V/2A) 또는 USB-C 케이블
- [x] 네트워크 케이블 (이더넷) 또는 WiFi 연결
- [x] 비디오 스위처 (ATEM, vMix, 또는 OBS)

---

## 2. 하드웨어 연결

### 2.1 전원 연결

> **경고**: 반드시 5V/2A 이상의 전원 어댑터를 사용하세요. 저전력 어댑터 사용 시 동작 불안정할 수 있습니다.

**단계:**

1. 전원 어댑터를 TX 장치의 DC 포트에 연결합니다
2. 어댑터를 콘센트에 연결합니다
3. 전원 LED가 녹색으로 켜지는지 확인합니다

**예상 결과:**
- 전원 LED: 녹색 (정상)
- 전원 LED: 적색 (전원 이상)

### 2.2 네트워크 연결

Tally Node는 이더넷과 WiFi 두 가지 네트워크 연결을 지원합니다.

#### 옵션 A: 이더넷 연결 (권장)

> **팁**: 안정적인 연결을 위해 이더넷 사용을 권장합니다.

**단계:**

1. LAN 케이블을 TX 장치의 이더넷 포트에 연결합니다
2. 케이블另一端을 라우터 또는 스위치에 연결합니다
3. 네트워크 LED가 녹색으로 깜빡이는지 확인합니다

#### 옵션 B: WiFi 연결

**단계:**

1. 전원을 켜고 30초 기다립니다
2. WiFi AP 모드가 활성화됩니다 ("TallyNode-XXXX" SSID)
3. [초기 설정](#3-초기-설정) 단계에서 WiFi 설정을 진행합니다

### 2.3 스위처 연결

Tally Node는 네트워크를 통해 스위처와 통신합니다. **물리적 케이블 연결은 필요 없습니다.**

중요한 것은:
- TX 장치와 스위처가 **같은 네트워크**에 있어야 합니다
- 스위처의 **IP 주소**를 알아야 합니다

---

## 3. 초기 설정

### 3.1 IP 주소 확인

TX 장치의 IP 주소를 확인하는 방법:

#### 방법 1: mDNS 사용 (권장)

컴퓨터의 터미널에서 다음을 입력합니다:

```bash
# macOS/Linux
ping tallynode-tx.local

# Windows
ping tallynode-tx.local
```

#### 방법 2: 라우터 DHCP 목록 확인

라우터 관리 페이지에서 연결된 장치 목록에서 "TallyNode"를 찾습니다.

#### 방법 3: 직렬 콘솔

USB-C 케이블로 컴퓨터에 연결하고 직렬 터미널(115200 baud)에서 IP를 확인합니다.

### 3.2 웹 UI 접속

1. 웹브라우저를 엽니다 (Chrome, Firefox, Safari 등)
2. 주소창에 다음을 입력합니다:
   - `http://tallynode-tx.local` 또는
   - `http://<IP 주소>` (예: `http://192.168.1.100`)
3. Enter 키를 누릅니다

**예상 결과:** 웹 UI 대시보드가 표시됩니다

---

## 4. 스위처 설정

### 4.1 ATEM 연결 설정

**사전 준비:** ATEM Mini/Mini Pro가 같은 네트워크에 연결되어 있어야 합니다.

**단계:**

1. 웹 UI에서 **[설정]** > **[스위처]** 탭으로 이동합니다
2. **스위처 유형**에서 **ATEM**을 선택합니다
3. **ATEM IP 주소**를 입력합니다 (기본값: `192.168.10.240`)
4. **[연결 테스트]** 버튼을 클릭합니다
5. 연결 성공 메시지를 확인합니다
6. **[저장]** 버튼을 클릭합니다

**연결 테스트 결과:**
- ✅ **성공**: "ATEM 연결 성공"
- ❌ **실패**: "연결 실패 - IP 주소를 확인하세요"

### 4.2 vMix 연결 설정

**사전 준비:** vMix가 실행 중이고 Web Controller가 활성화되어 있어야 합니다.

**vMix 설정:**

1. vMix에서 **Settings** > **Web Controller**를 엽니다
2. **Enable Web Controller**가 체크되어 있는지 확인합니다
3. **Port** 번호를 기록합니다 (기본값: 8088)

**Tally Node 설정:**

1. 웹 UI에서 **[설정]** > **[스위처]** 탭으로 이동합니다
2. **스위처 유형**에서 **vMix**를 선택합니다
3. **vMix IP 주소**를 입력합니다 (vMix가 실행 중인 PC의 IP)
4. **vMix 포트**를 입력합니다 (기본값: 8088)
5. **[연결 테스트]** 버튼을 클릭합니다
6. 연결 성공 메시지를 확인합니다
7. **[저장]** 버튼을 클릭합니다

### 4.3 OBS 연결 설정 (개발 중)

> **주의**: OBS 연결은 현재 개발 중입니다. 최신 정보는 GitHub 저장소를 확인하세요.

---

## 5. 듀얼모드 설정

### 5.1 듀얼모드 개념

듀얼모드는 **두 대의 스위처**를 동시에 연결하여 장애 대비 및 복잡한 워크플로우를 지원합니다.

**구성:**
- **Primary 스위처**: 주 사용 스위처
- **Secondary 스위처**: 예비 스위처 또는 보조 스위처
- **오프셋**: Primary와 Secondary 간의 채널 번호 차이

**사용 예시:**
- ATEM Mini (Primary) + vMix (Secondary)
- 장애 시 자동 전환
- 다중 이벤트 운영

### 5.2 듀얼모드 활성화

**단계:**

1. 웹 UI에서 **[설정]** > **[듀얼모드]** 탭으로 이동합니다
2. **듀얼모드 사용** 스위치를 켭니다
3. **Primary 스위처** 설정을 구성합니다 (기존 설정 사용)
4. **Secondary 스위처** 설정을 구성합니다:
   - 스위처 유형 선택
   - IP 주소 입력
   - 연결 테스트
5. **오프셋 설정**을 구성합니다 (선택 사항)
6. **[저장]** 버튼을 클릭합니다

### 5.3 오프셋 설정

오프셋은 Primary와 Secondary 스위처 간의 채널 번호 매핑 차이를 정의합니다.

**예시:**
- Primary 카메라 1 = Secondary 카메라 5
- 오프셋: +4

**설정 방법:**

1. **[오프셋 설정]** 버튼을 클릭합니다
2. 각 카메라에 대한 매핑을 설정합니다:
   | Primary 채널 | Secondary 채널 |
   |---------------|----------------|
   | 1 | 5 |
   | 2 | 6 |
   | 3 | 7 |
   | 4 | 8 |
3. **[저장]** 버튼을 클릭합니다

### 5.4 자동 전환 확인

듀얼모드에서는 Primary 스위처 장애 시 자동으로 Secondary로 전환됩니다.

**전환 조건:**
- Primary 연결 끊김 (10초 이상)
- Primary 데이터 수신 없음

**복구:**
- Primary가 다시 연결되면 자동으로 복구됩니다
- 수동 전환도 가능합니다

---

## 6. 웹 UI 사용법

### 6.1 대시보드 개요

웹 UI 대시보드는 다음 섹션으로 구성됩니다:

| 섹션 | 설명 |
|------|------|
| **상태 표시** | 스위처 연결 상태, LoRa 송신 상태 |
| **Tally 모니터** | 실시간 Tally 상태 (채널별) |
| **RX 장치 목록** | 연결된 RX 장치 및 상태 |
| **시스템 정보** | 장치 정보, IP 주소, 펌웨어 버전 |

### 6.2 실시간 상태 확인

**스위처 상태:**
- 🟢 **연결됨**: 정상 연결
- 🔴 **연결 안 됨**: 연결 실패
- 🟡 **연결 불안**: 간헐적 연결

**LoRa 송신 상태:**
- 🟢 **송신 중**: 정상 송신
- ⚪ **대기 중**: Tally 변경 없음
- 🟠 **혼잡**: 채널 혼잡

**Tally 모니터:**
- 🔴 **Program**: 방송 중 (적색 LED)
- 🟢 **Preview**: 예비 됨 (녹색 LED)
- ⚪ **Safe**: 방송 안 함 (꺼짐)

### 6.3 설정 변경

**설정 변경 단계:**

1. 원하는 설정 탭으로 이동합니다
2. 설정값을 변경합니다
3. **[저장]** 버튼을 클릭합니다
4. 변경 사항이 즉시 적용됩니다

> **주의**: 일부 설정(예: LoRa 파라미터)은 재시작 후 적용됩니다.

---

## 7. LoRa 설정

### 7.1 주파수 설정

**국가별 허용 주파수:**

| 국가 | 주파수 (MHz) | 비고 |
|------|--------------|------|
| **한국** | 923 | 923.1 ~ 923.3 MHz |
| **미국** | 915 | 915 ~ 928 MHz |
| **유럽** | 868 | 868 ~ 868.6 MHz |
| **일본** | 920 | 920.5 ~ 923.5 MHz |

**설정 방법:**

1. 웹 UI에서 **[설정]** > **[LoRa]** 탭으로 이동합니다
2. **주파수(MHz)**를 입력합니다 (한국: 923)
3. **[저장]** 버튼을 클릭합니다
4. TX 장치를 재시작합니다

> **경고**: 반드시 사용 국가의 허용 주파수를 사용하세요. 불법 주파수 사용 시 법적 제재가 있을 수 있습니다.

### 7.2 SF/BW/CR 설정

LoRa 통신 파라미터는 통신 거리와 데이터 속도의 트레이드오프를 결정합니다.

| 파라미터 | 설명 | 값 범위 | 권장값 |
|----------|------|---------|--------|
| **SF (Spreading Factor)** | 데이터 중복도, 거리에 비례 | 7~12 | 9 |
| **BW (Bandwidth)** | 대역폭, 속도에 비례 | 125/250/500 kHz | 250 |
| **CR (Coding Rate)** | 오류 정정 능력 | 4/5, 4/6, 4/7, 4/8 | 4/5 |

**거리별 권장 설정:**

| 거리 | SF | BW | CR |
|------|----|----|----|
| **단거리 (< 50m)** | 7 | 500 | 4/5 |
| **중거리 (50~200m)** | 9 | 250 | 4/5 |
| **장거리 (> 200m)** | 11 | 125 | 4/6 |

**설정 방법:**

1. 웹 UI에서 **[설정]** > **[LoRa]** 탭으로 이동합니다
2. **SF**, **BW**, **CR**을 선택합니다
3. **[저장]** 버튼을 클릭합니다
4. TX 및 RX 장치를 재시작합니다

> **팁**: 모든 TX/RX 장치는 **동일한 LoRa 설정**을 사용해야 합니다.

### 7.3 송신 전력 설정

**송신 전력 옵션:**

| 전력 (dBm) | 소비 전류 | 통신 거리 | 권장 상황 |
|------------|-----------|-----------|-----------|
| **2** | ~20 mA | ~50m | 실내 사용 |
| **10** | ~25 mA | ~150m | 일반 사용 |
| **17** | ~35 mA | ~300m | 실외 사용 |
| **20** | ~50 mA | ~500m | 최대 거리 |

> **주의**: 최대 전력(20 dBm)을 연속 사용할 경우 배터리 수명이 단축됩니다.

**설정 방법:**

1. 웹 UI에서 **[설정]** > **[LoRa]** 탭으로 이동합니다
2. **송신 전력(dBm)**을 선택합니다
3. **[저장]** 버튼을 클릭합니다

---

## 다음 단계

- [ ] [RX 모드 가이드](rx-mode-guide.md) - RX 장치 설정 방법
- [ ] [설치 가이드](installation-guide.md) - 펌웨어 설치 방법
- [ ] [문제 해결 가이드](troubleshooting-guide.md) - 일반적인 문제 해결

---

## 추가 지원

매뉴얼에 대한 피드백이나 추가 지원이 필요하시면:
- **GitHub Issues**: https://github.com/your-repo/tally-node/issues
- **디스코드 커뮤니티**: https://discord.gg/tally-node

---

**문서 버전**: 1.0.0
**최종 업데이트**: 2026-01-19
**작성자**: Tally Node 팀
