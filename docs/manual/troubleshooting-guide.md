# Tally Node 문제 해결 가이드

<!-- FEAT-MANUAL-TROUBLE -->
<!-- AUD-MANUAL-BEGINNER -->
<!-- AUD-MANUAL-ADVANCED -->

## 목차

1. [연결 문제](#1-연결-문제)
2. [LoRa 통신 문제](#2-lora-통신-문제)
3. [전원 문제](#3-전원-문제)
4. [디스플레이/LED 문제](#4-디스플레이led-문제)
5. [웹 UI 문제](#5-웹-ui-문제)

---

## 1. 연결 문제

### 1.1 WiFi 연결 안 됨

**증상:**
- WiFi 목록에 "TallyNode-XXXX"가 안 보임
- 연결 시도 후 "연결 실패" 메시지
- IP 주소를 받지 못함

**진단 단계:**

1. **장치 전원 확인**
   - 전원 LED가 녹색인지 확인합니다
   - 전원 어댑터가 5V/2A 이상인지 확인합니다

2. **AP 모드 활성화 확인**
   - 장치를 재시작합니다 (전원 껐다 켜기)
   - 부팅 후 30초 기다립니다
   - WiFi 목록 새로고침

3. **거리 확인**
   - 장치에서 3m 이내인지 확인합니다
   - 근처에 다른 2.4GHz 장치가 너무 많지 않은지 확인합니다

**해결 방법:**

| 문제 | 해결 |
|------|------|
| AP 모드 안 됨 | 설정 초기화: 전원 켠 상태로 BOOT 버튼 10초 누름 |
| 연결 실패 | WiFi 채널을 1 또는 11로 변경 |
| IP 할당 안 됨 | 라우터 DHCP 범위 확인 |

### 1.2 이더넷 인식 안 됨

**증상:**
- 이더넷 케이블 연결 후 연결 LED가 안 켜짐
- 웹 UI에 "이더넷 연결 안 됨" 표시

**진단 단계:**

1. **케이블 확인**
   - 양쪽 끝이 확실히 연결되었는지 확인합니다
   - "딸깍" 소리가 들릴 때까지 밀어 넣습니다
   - 다른 케이블로 테스트합니다

2. **라우터/스위치 포트 확인**
   - 다른 포트에 연결해 봅니다
   - 포트 LED가 켜지는지 확인합니다

3. **속도 및 이중화 설정**
   - 라우터가 10/100Mbps 자동 감지를 지원하는지 확인합니다
   - 수동 설정: 100Mbps Full Duplex

**해결 방법:**

| 문제 | 해결 |
|------|------|
| 케이블 불량 | Cat5e 이상 케이블로 교체 |
| 포트 고장 | 다른 포트 사용 |
| W5500 모듈 문제 | 장치 재시작 |

### 1.3 스위처 연결 안 됨

**증상:**
- 웹 UI에서 "연결 실패" 메시지
- Tally 상태가 업데이트되지 않음

#### ATEM 연결 문제

**진단:**

1. **네트워크 확인**
   ```bash
   ping <ATEM IP 주소>  # 예: ping 192.168.10.240
   ```
   - 응답이 있으면 네트워크는 정상

2. **ATEM 설정 확인**
   - ATEM Software Control에서 연결 확인
   - ATEM IP가 TX 장치와 같은 서브넷인지 확인

**해결:**

| 문제 | 해결 |
|------|------|
| IP 주소 불일치 | ATEM IP를 192.168.x.x 대역으로 변경 |
| 방화벽 차단 | 포트 9910 개방 |
| 펌웨어 버전 | ATEM 펌웨어 업데이트 |

#### vMix 연결 문제

**진단:**

1. **Web Controller 활성화 확인**
   - vMix > Settings > Web Controller
   - "Enable Web Controller" 체크
   - 포트 확인 (기본: 8088)

2. **방화벽 확인**
   - Windows 방화벽이 vMix를 차단하지 않는지 확인

3. **연결 테스트**
   ```bash
   curl http://<vMix IP>:8088/api
   ```

**해결:**

| 문제 | 해결 |
|------|------|
| 연결 거부됨 | Web Controller 활성화 |
| 시간 초과 | Windows 방화벽에서 vMix 허용 |
| 잘못된 응답 | vMix 버전 확인 (최신 버전 권장) |

---

## 2. LoRa 통신 문제

### 2.1 RX에서 Tally 수신 안 됨

**증상:**
- RX 장치가 Safe 상태만 유지
- TX에서 Tally 전송 시 RX에 반응 없음
- RSSI 표시 안 됨

**진단 단계:**

1. **TX LoRa 송신 확인**
   - 웹 UI 대시보드에서 "송신 중" 표시 확인
   - LoRa LED가 깜빡이는지 확인

2. **RX LoRa 수신 확인**
   - RX 디스플레이에서 RSSI 값 확인
   - RSSI가 "--"이면 수신 안 됨

3. **LoRa 설정 일치 확인**
   - TX와 RX의 주파수가 같은지 (한국: 923 MHz)
   - SF/BW/CR 설정이 같은지

**해결 방법:**

| 문제 | 해결 |
|------|------|
| 주파수 불일치 | 양쪽 모두 923 MHz로 설정 |
| SF/BW/CR 불일치 | 양쪽 동일한 값으로 설정 |
| ID 불일치 | RX 카메라 ID와 TX 채널 확인 |
| TX 송신 안 됨 | LoRa 모듈 재시작 |

### 2.2 신호 강도 약함

**증상:**
- RSSI가 -85 dBm 미만
- 간헐적으로 Tally 끊김
- 일부 RX만 수신됨

**진단 단계:**

1. **거리 측정**
   - TX와 RX 사이 거리 확인
   - 300m 이내인지 확인

2. **장애물 확인**
   - 콘크리트 벽, 금속 구조물 확인
   - LoRa는 시야 확보가 중요합니다

3. **높이 확인**
   - TX와 RX를 높은 곳에 배치하면 신호가 개선됩니다

**해결 방법:**

| 상황 | 해결 |
|------|------|
| 거리가 너무 김 | TX 송신 전력을 20 dBm로 증가 |
| 장애물이 있음 | 위치 변경 또는 중계기 추가 |
| 실내 사용 | SF를 11로 증가 (거리 우선) |
| 실외 사용 | BW를 500으로 증가 (속도 우선) |

### 2.3 간헐적 연결 끊김

**증상:**
- Tally가 가끔씩 끊겼다 다시 연결됨
- RSSI가 크게 변동함
- 일부 RX만 문제 발생

**진단 단계:**

1. **간섭 확인**
   - 근처에 다른 920MHz 장치가 있는지 확인
   - WiFi 2.4GHz 공유기와 거리 두기

2. **전원 안정성 확인**
   - TX 전원 어댑터가 안정적인지 확인
   - RX 배터리 잔량 확인

3. **채널 혼잡 확인**
   - 웹 UI에서 채널 혼잡도 표시 확인

**해결 방법:**

| 문제 | 해결 |
|------|------|
| 간섭 | 주파수를 923.1 → 923.2 또는 923.3으로 변경 |
| 전원 불안정 | 안정적인 어댑터로 교체 |
| 채널 혼잡 | LoRa 파라미터 재조정 (SF 증가) |

---

## 3. 전원 문제

### 3.1 전원 켜지지 않음

**증상:**
- 전원 버튼 눌러도 반응 없음
- LED가 전혀 켜지지 않음

**진단 단계:**

1. **전원 어댑터 확인**
   - 어댑터 출력: 5V/2A 이상이어야 함
   - 멀티미터로 전압 확인

2. **케이블 확인**
   - USB-C 케이블이 데이터 전송 가능한지 확인
   - 다른 케이블로 테스트

3. **배터리 확인 (RX)**
   - 배터리가 방전되었을 수 있음
   - 충전 후 다시 시도

**해결 방법:**

| 문제 | 해결 |
|------|------|
| 어댑터 불량 | 5V/2A 인증 어댑터로 교체 |
| 케이블 불량 | USB-C 충전 케이블로 교체 |
| 배터리 완전 방전 | 10분 이상 충전 후 재시작 |
| 퓨즈 끊어짐 | 서비스 센터 문의 |

### 3.2 배터리 빨리 방전

**증상:**
- 배터리가 1~2시간 만에 방전됨
- 배터리 잔량이 갑자기 떨어짐

**진단 단계:**

1. **배터리 수명 확인**
   - 배터리가 오래되었는지 확인 (2년 이상)
   - 용량 테스트 (진정 용량 2000mAh 이상 필요)

2. **소비 전력 확인**
   - 디스플레이 밝기가 최대인지 확인
   - LED가 계속 켜져 있는지 확인

3. **충전 회로 확인**
   - 충전 시 과열이 있는지 확인
   - 충전 LED가 정상인지 확인

**해결 방법:**

| 문제 | 해결 |
|------|------|
| 배터리 노후 | 새 배터리로 교체 (2000mAh 이상 권장) |
| 밝기 높음 | 디스플레이 밝기를 중간으로 낮춤 |
| 충전기 불량 | 정품 충전기 사용 |
| 배터리 보호 회로 고장 | 배터리 교체 |

### 3.3 충전 안 됨

**증상:**
- 충전 케이블 연결해도 충전 LED 안 켜짐
- 밤새 충전해도 배터리 잔량 증가 안 함

**진단 단계:**

1. **충전기 확인**
   - 다른 기기로 충전기 테스트
   - 충전기 출력: 5V/1A 이상 필요

2. **케이블 확인**
   - 다른 USB-C 케이블로 테스트

3. **충전 포트 확인**
   - 포트 내부 이물질 확인
   - 핀들이 구부러지지 않았는지 확인

**해결 방법:**

| 문제 | 해결 |
|------|------|
| 충전기 불량 | 5V/1A 이상 충전기로 교체 |
| 케이블 불량 | 충전 전용 케이블로 교체 |
| 포트 이물질 | 부드러운 브러시로 청소 |
| 충전 IC 고장 | 서비스 센터 문의 |

---

## 4. 디스플레이/LED 문제

### 4.1 디스플레이 안 켜짐

**증상:**
- 전원은 켜졌는데 디스플레이가 검은 화면
- 배경 조명만 켜지고 내용 안 보임

**진단 단계:**

1. **FPC 케이블 확인**
   - 케이블이 완전히 삽입되었는지 확인
   - 잠금장치가 닫혔는지 확인

2. **전원 확인**
   - 디스플레이에 3.3V 공급되는지 확인
   - 멀티미터로 전압 측정

3. **I2C 통신 확인**
   - 시리얼 모니터에서 "Display OK" 메시지 확인
   - 에러 메시지 있으면 연결 문제

**해결 방법:**

| 문제 | 해결 |
|------|------|
| FPC 케이블 빠짐 | 케이블 재연결 (잠금장치 확인) |
| 케이블 불량 | 새 케이블로 교체 |
| 디스플레이 고장 | 새 디스플레이로 교체 |

### 4.2 LED 색상 이상

**증상:**
- LED가 예상 색상과 다름
- LED가 깜빡이지 않음
- LED가 전혀 켜지지 않음

**진단 단계:**

1. **RGB LED 데이터 핀 확인**
   - WS2812B 데이터 핀 연결 확인
   - 저항(330Ω)이 직렬로 연결되었는지 확인

2. **코드 확인**
   - RGB 값 설정이 올바른지 확인
   - LED 라이브러리가 정상 초기화되었는지 확인

**해결 방법:**

| 문제 | 해결 |
|------|------|
| LED 전구 고장 | 새 WS2812B로 교체 |
| 데이터 핀 연결 불량 | 납락 재작업 |
| 그라운드 연결 안 됨 | GND 공통 연결 확인 |
| 라이브러리 문제 | FastLED 또는 NeoPixel 라이브러리 재설치 |

### 4.3 화면 깜빡임

**증상:**
- 디스플레이가 주기적으로 깜빡임
- 일부 텍스트가 지워졌다 나타남

**진단 단계:**

1. **새로고침 빈도 확인**
   - 디스플레이 업데이트 속도가 너무 빠른지 확인
   - 30~60fps 권장

2. **전원 노이즈 확인**
   - 배터리 전압이 안정적인지 확인
   - 3.3V 레귤레이터 출력 확인

**해결 방법:**

| 문제 | 해결 |
|------|------|
| 업데이트 빠름 | 업데이트 속도를 100ms 이상으로 증가 |
| 전원 노이즈 | 콘덴서(100µF) 추가 |
| 드라이버 문제 | SSD1306 라이브러리 버전 확인 |

---

## 5. 웹 UI 문제

### 5.1 웹 UI 접속 안 됨

**증상:**
- 브라우저에서 "연결할 수 없음" 메시지
- IP 주소로 접속해도 반응 없음

**진단 단계:**

1. **IP 주소 확인**
   ```bash
   ping tallynode-tx.local
   ```
   - 응답이 없으면 IP 할당 실패

2. **장치 연결 확인**
   - 같은 네트워크에 있는지 확인
   - 컴퓨터 방화벽 확인

3. **웹 서버 확인**
   - 시리얼 모니터에서 "Web server started" 메시지 확인

**해결 방법:**

| 문제 | 해결 |
|------|------|
| IP 할당 실패 | 라우터 DHCP 확인, 고정 IP 설정 |
| 네트워크 불일치 | 같은 WiFi/이더넷에 연결 |
| 방화벽 차단 | 포트 80 개방 |
| 웹 서버 중단 | 장치 재시작 |

### 5.2 설정 저장 안 됨

**증상:**
- 설정 변경 후 [저장] 클릭해도 반영 안 됨
- 재시작 후 설정이 초기화됨

**진단 단계:**

1. **SPIFFS/LittleFS 확인**
   - 시리얼 모니터에서 파일 시스템 마운트 확인
   - "Mounting FS..." 메시지 확인

2. **저장 공간 확인**
   - Flash 메모리에 여유 공간이 있는지 확인

**해결 방법:**

| 문제 | 해결 |
|------|------|
| 파일 시스템 마운트 실패 | 포맷 후 재설치 |
| 저장 공간 부족 | 불필요한 파일 삭제 |
| NVS 파티션 손상 | 파티션 테이블 재생성 |

### 5.3 실시간 업데이트 안 됨

**증상:**
- Tally 상태가 자동으로 업데이트되지 않음
- 새로고침해야 변경 내용 보임

**진단 단계:**

1. **WebSocket 확인**
   - 브라우저 개발자 도구에서 WebSocket 연결 확인
   - "ws://" 연결이 있는지 확인

2. **Auto-refresh 확인**
   - 웹 UI에서 자동 새로고침이 활성화되었는지 확인

**해결 방법:**

| 문제 | 해결 |
|------|------|
| WebSocket 연결 실패 | 방화벽에서 WS 포트 개방 |
| SSE 지원 안 됨 | 폴백 모드(긴 폴링) 사용 |
| 브라우저 호환성 | Chrome 또는 Firefox 사용 |

---

## 추가 지원

위 해결 방법으로 문제가 해결되지 않으면:

1. **GitHub Issues**
   - https://github.com/your-repo/tally-node/issues
   - 증상, 진단 결과, 시도한 해결 방법을 상세히 기술하세요

2. **디스코드 커뮤니티**
   - https://discord.gg/tally-node
   - 실시간 도움을 받을 수 있습니다

3. **이메일 지원**
   - support@tally-node.com
   - 영업일 기준 24시간 내 응답

---

## 진단 정보 수집

문제를 신고할 때 다음 정보를 포함하세요:

- [ ] 장치 모델 (TX/RX)
- [ ] 펌웨어 버전
- [ ] 문제 증상 (상세)
- [ ] 시리얼 로그 (가능한 경우)
- [ ] 스크린샷 (가능한 경우)
- [ ] 네트워크 구성

---

**문서 버전**: 1.0.0
**최종 업데이트**: 2026-01-19
**작성자**: Tally Node 팀
