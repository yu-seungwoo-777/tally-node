# 하드웨어 카탈로그

Tally Node의 모든 하드웨어 구성 요소와 사양을 문서화합니다.

## 개요

| 항목 | 값 |
|------|------|
| 보드 | EoRa-S3 |
| MCU | ESP32-S3 (Xtensa LX7 듀얼 코어 @ 240MHz) |
| LoRa 모듈 | SX1262 |
| 디스플레이 | OLED 128x64 |
| LED | WS2812B RGB |

---

## 1. 메인 보드 (EoRa-S3)

### 사양

| 항목 | 사양 | 설명 |
|------|------|------|
| **제조사** | EBYTE | EoRa-S3 400TB/900TB 시리즈 |
| **MCU** | ESP32-S3 | Xtensa LX7 듀얼 코어 @ 240MHz |
| **Flash** | 4MB | 펌웨어 및 데이터 저장용 |
| **PSRAM** | 8MB (옵션) | 추가 메모리 (BOARD_HAS_PSRAM 정의 필요) |
| **WiFi** | 802.11 b/g/n | 2.4GHz 대역 지원 |
| **Bluetooth** | BLE 5.0 | 저전력 블루투스 |
| **USB CDC** | 지원 | 온부트 지원 |
| **RAM** | 320KB (최대) | 시스템 메모리 |
| **동작 전압** | 3.3V | 표준 동작 전압 |
| **배터리** | Li-Polymer 3.7V | 포터블 운영 지원 |

### 핀 맵

| 기능 | GPIO | 설명 |
|------|------|------|
| **LoRa MISO** | 3 | SPI2_HOST |
| **LoRa MOSI** | 6 | SPI2_HOST |
| **LoRa SCK** | 5 | SPI2_HOST |
| **LoRa CS** | 7 | Chip Select |
| **LoRa DIO1** | 33 | IRQ |
| **LoRa BUSY** | 34 | Busy |
| **LoRa RST** | 8 | Reset |
| **W5500 MISO** | 15 | SPI3_HOST |
| **W5500 MOSI** | 16 | SPI3_HOST |
| **W5500 SCK** | 48 | SPI3_HOST |
| **W5500 CS** | 47 | Chip Select |
| **W5500 RST** | 12 | Reset |
| **Display SDA** | 43 | I2C SDA |
| **Display SCL** | 44 | I2C SCL |
| **LED BOARD** | 37 | 보드 내장 LED |
| **LED PGM** | 38 | Program LED (빨간색) |
| **LED PVW** | 39 | Preview LED (녹색) |
| **WS2812** | 45 | RGB LED |
| **BAT ADC** | 1 | 배터리 전압 모니터링 |
| **버튼** | 0 | 내장 BOOT 버튼 (Active Low) |

### 주요 특징

- **듀얼 코어 성능**: 240MHz 듀얼 코어로 실시간 처리 가능
- **풍부한 메모리**: 4MB Flash와 옵션 8MB PSRAM
- **무선 연결**: WiFi와 BLE 5.0 동시 지원
- **USB 디버깅**: 온부트 USB CDC로 편리한 디버깅

---

## 2. LoRa 모듈 (SX1262)

### 사양

| 항목 | 사양 | 설명 |
|------|------|------|
| **칩셋** | SX1262 | LoRa transceiver |
| **주파수** | 923MHz | 한국 대역 (920-928MHz) |
| **대역폭** | 125-500kHz | 가변 대역폭 |
| **확장 인자(SF)** | 7-12 | 가변 (높을수록 감도 향상, 속도 저하) |
| **코딩 레이트(CR)** | 5-8 | 4/5, 4/6, 4/7, 4/8 |
| **출력 전력** | -9 ~ +22dBm | 가변 송신 전력 |
| **통신 거리** | 최대 수km | 환경에 따라 달라짐 |
| **인터페이스** | SPI | SPI2_HOST 사용 |
| **동기화 워드** | 0x12, 0x24 | 네트워크 식별용 |

### RF 파라미터

| 파라미터 | 범위 | 기본값 | 설명 |
|----------|------|--------|------|
| **주파수(MHz)** | 920-928 | 923.0 | 한국 LoRa 대역 |
| **SF** | 7-12 | 9 | 확장 인자 (높을수록 거리 증가) |
| **대역폭(kHz)** | 125, 250, 500 | 125 | 신호 대역폭 |
| **CR** | 5-8 | 5 | 코딩 레이트 (4/5, 4/6, 4/7, 4/8) |
| **출력 전력(dBm)** | -9 ~ 22 | 17 | 송신 전력 |
| **Sync Word** | 0x12, 0x24 | 0x12 | 동기화 워드 |

### 주요 특징

- **장거리 통신**: 최대 수km의 통신 거리
- **저전력**: 수mA 대의 전력 소비
- **높은 감도**: -148dBm의 수신 감도
- **암호화**: 라이선스 기반 AES-128 지원

---

## 3. 디스플레이 (OLED)

### 사양

| 항목 | 사양 | 설명 |
|------|------|------|
| **해상도** | 128 x 64 | 픽셀 |
| **인터페이스** | I2C | 통신 방식 (800kHz) |
| **드라이버** | SH1106/SSD1306 | 호환 칩셋 |
| **색상** | 단색 (흑백) | 블루/화이트 |
| **라이브러리** | U8g2 | 그래픽 라이브러리 |
| **폰트** | profont11_mf, profont22_mf | 11px, 22px |
| **SDA 핀** | GPIO 43 | I2C 데이터 |
| **SCL 핀** | GPIO 44 | I2C 클럭 |

### 페이지 구조

| 페이지 | 용도 | 내용 |
|--------|------|------|
| **BootPage** | 부팅 화면 | 로고, 초기화 메시지 |
| **RxPage** | RX 모드 페이지 | 채널 번호, PVW/PGM 상태, 프로그램 이름 |
| **TxPage** | TX 모드 페이지 | 송신 상태, 연결 정보 |
| **EmptyPage** | 배터리 Empty | 저전량 경고 페이지 |

### 좌표계

- **원점**: (0, 0) = 왼쪽 상단
- **텍스트 y 좌표**: 베이스라인 기준 (글자 하단 기준선)
- **권장 x 좌표**: ≥ 4 (테두리와 겹침 방지)

### 주요 특징

- **저전력**: 수mA 대의 전력 소비
- **선명한 표시**: 128x64 해상도
- **다양한 폰트**: U8g2 라이브러리 기반

---

## 4. LED (WS2812)

### 사양

| 항목 | 사양 | 설명 |
|------|------|------|
| **칩셋** | WS2812B | RGB LED |
| **인터페이스** | GPIO + RMT | 제어 방식 |
| **색상** | 16,777,216 | 24비트 컬러 (RGB 각 8비트) |
| **밝기** | 0-255 | 가변 밝기 |
| **GPIO** | 45 | WS2812 데이터 핀 |
| **LED PGM** | GPIO 38 | Program LED (빨간색) |
| **LED PVW** | GPIO 39 | Preview LED (녹색) |
| **LED BOARD** | GPIO 37 | 보드 내장 LED |

### 색상 설정

| 상태 | R | G | B | 설명 |
|------|---|---|---|------|
| **Program** | 255 | 0 | 0 | 빨간색 (온에어) |
| **Preview** | 0 | 255 | 0 | 초록색 (다음 순서) |
| **Safe** | 0 | 0 | 255 | 파란색 (안전) |
| **Off** | 0 | 0 | 0 | 꺼짐 |

### 주요 특징

- **24비트 컬러**: 1,670만 색상 표현
- **가변 밝기**: 0-255 단계 조절
- **RMT 제어**: 정밀한 타이밍 제어

---

## 5. 주변 하드웨어

### 배터리

| 항목 | 사양 | 설명 |
|------|------|------|
| **타입** | Li-Polymer | 리튬 폴리머 배터리 |
| **전압** | 3.7V | 표준 전압 |
| **ADC 채널** | GPIO 1 | 전압 모니터링 |
| **해상도** | 12비트 | ADC 해상도 |
| **모니터링** | 실시간 | 잔량 및 저전량 경고 |

### 버튼

| 항목 | 사양 | 설명 |
|------|------|------|
| **타입** | 풀업 스위치 | Active Low |
| **GPIO** | 0 | 내장 BOOT 버튼 |
| **단일 클릭** | < 1000ms | "Test" 메시지 송신 |
| **롱 프레스** | ≥ 1000ms | 통계 출력 |

### 온도 센서

| 항목 | 사양 | 설명 |
|------|------|------|
| **타입** | 내장 | ESP32-S3 내장 센서 |
| **ADC 채널** | 내장 | 온도 ADC |
| **해상도** | 12비트 | ADC 해상도 |

---

## 관련 문서

- [소프트웨어 기능 카탈로그](software-features.md)
- [프로토콜 지원 카탈로그](protocols.md)
- [구성 옵션 카탈로그](configuration.md)
- [아키텍처 문서](../ARCHITECTURE.md)

---

**태그**: `HW-CATALOG-BOARD`, `HW-CATALOG-LORA`, `HW-CATALOG-DISPLAY`, `HW-CATALOG-LED`, `HW-CATALOG-PERIPHERAL`
**요구사항**: REQ-CATALOG-001, REQ-CATALOG-002, REQ-CATALOG-003, REQ-CATALOG-004, REQ-CATALOG-005
