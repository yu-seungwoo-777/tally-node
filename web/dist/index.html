<!DOCTYPE html>
<html lang="ko" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tally Node Control</title>
    <!-- 개발용: Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/styles.css">
    <script defer src="vendor/alpine.js"></script>
</head>
<body class="bg-slate-50">
    <div x-data="tallyApp()" class="flex min-h-screen">

        <!-- 사이드바 -->
        <aside :class="sidebarOpen ? 'translate-x-0' : '-translate-x-full lg:translate-x-0'"
               class="fixed lg:static inset-y-0 left-0 z-50 w-64 bg-white border-r border-slate-200 transition-transform duration-300">
            <!-- 로고 -->
            <div class="flex items-center justify-between px-8 py-5 border-b border-slate-200">
                <div>
                    <h1 class="font-bold text-slate-900 text-lg">TALLY-NODE</h1>
                    <p class="text-xs text-slate-500">Wireless Tally System</p>
                </div>
                <button @click="sidebarOpen = false" class="lg:hidden p-1 hover:bg-slate-100 rounded-lg">
                    <svg class="w-5 h-5 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- 네비게이션 -->
            <nav class="px-4 py-2 space-y-1">
                <a href="#dashboard"
                   :class="currentView === 'dashboard' ? 'bg-blue-50 text-blue-700' : 'text-slate-600 hover:bg-slate-50'"
                   class="flex items-center gap-3 px-4 py-2.5 rounded-xl transition-all">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                    </svg>
                    <span class="font-medium">Dashboard</span>
                </a>

                <a href="#network"
                   :class="currentView === 'network' ? 'bg-blue-50 text-blue-700' : 'text-slate-600 hover:bg-slate-50'"
                   class="flex items-center gap-3 px-4 py-2.5 rounded-xl transition-all">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"></path>
                    </svg>
                    <span class="font-medium">Network</span>
                </a>

                <a href="#switcher"
                   :class="currentView === 'switcher' ? 'bg-blue-50 text-blue-700' : 'text-slate-600 hover:bg-slate-50'"
                   class="flex items-center gap-3 px-4 py-2.5 rounded-xl transition-all">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                    </svg>
                    <span class="font-medium">Switcher</span>
                </a>

                <a href="#broadcast"
                   :class="currentView === 'broadcast' ? 'bg-blue-50 text-blue-700' : 'text-slate-600 hover:bg-slate-50'"
                   class="flex items-center gap-3 px-4 py-2.5 rounded-xl transition-all">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"></path>
                    </svg>
                    <span class="font-medium">Broadcast</span>
                </a>

                <a href="#devices"
                   :class="currentView === 'devices' ? 'bg-blue-50 text-blue-700' : 'text-slate-600 hover:bg-slate-50'"
                   class="flex items-center gap-3 px-4 py-2.5 rounded-xl transition-all">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"></path>
                    </svg>
                    <span class="font-medium">Devices</span>
                </a>

                <a href="#system"
                   :class="currentView === 'system' ? 'bg-blue-50 text-blue-700' : 'text-slate-600 hover:bg-slate-50'"
                   class="flex items-center gap-3 px-4 py-2.5 rounded-xl transition-all">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    </svg>
                    <span class="font-medium">System</span>
                </a>
            </nav>

            <!-- 사이드바 푸터 -->
            <div class="absolute bottom-0 left-0 right-0 p-4 border-t border-slate-200 bg-slate-50">
                <div class="flex items-center justify-between">
                    <span class="text-sm text-slate-600">Connection</span>
                    <span class="flex items-center gap-2">
                        <span class="w-2 h-2 rounded-full" :class="wsConnected ? 'bg-emerald-500' : 'bg-rose-500'"></span>
                        <span class="text-sm font-medium" :class="wsConnected ? 'text-emerald-600' : 'text-rose-600'" x-text="wsConnected ? 'Online' : 'Offline'"></span>
                    </span>
                </div>
            </div>
        </aside>

        <!-- 모바일 오버레이 -->
        <div x-show="sidebarOpen" @click="sidebarOpen = false" x-transition.opacity
             class="fixed inset-0 bg-slate-900/20 backdrop-blur-sm z-40 lg:hidden" x-cloak></div>

        <!-- 메인 컨텐츠 -->
        <div class="flex-1 flex flex-col">
            <!-- 상단바 -->
            <header class="bg-white border-b border-slate-200 flex items-center px-4 py-3">
                <button @click="sidebarOpen = true" class="lg:hidden p-1 mr-2">
                    <svg class="w-5 h-5 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
                <h1 class="text-base font-semibold text-slate-900" x-text="viewTitle()"></h1>
            </header>

            <!-- 페이지 컨텐츠 (pages/*.html에서 주입) -->
            <main class="flex-1 p-4 lg:p-6 overflow-auto max-w-6xl mx-auto w-full">
                <div x-show="currentView === 'dashboard'" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 translate-y-2" x-transition:enter-end="opacity-100 translate-y-0" x-cloak>
                    <div class="mb-4">
                        <h2 class="text-lg md:text-xl font-semibold text-slate-900">Dashboard</h2>
                        <p class="text-xs md:text-sm text-slate-500 hidden sm:block">System status and connection overview</p>
                    </div>

                    <!-- 히어로 스탯 -->
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-4">
                        <!-- 배터리 -->
                        <div class="bg-white rounded-xl p-4 shadow-sm border border-slate-200 hover:shadow-md transition-shadow">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 bg-emerald-50 rounded-xl flex items-center justify-center shrink-0">
                                        <svg class="w-5 h-5 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <rect x="2" y="6" width="16" height="12" rx="2" />
                                            <path d="M22 14v-4" />
                                        </svg>
                                    </div>
                                    <span class="text-sm text-slate-500">Battery</span>
                                </div>
                                <span class="text-xl md:text-2xl font-bold text-slate-900" x-text="system.battery + '%'"></span>
                            </div>
                        </div>

                        <!-- 온도 -->
                        <div class="bg-white rounded-xl p-4 shadow-sm border border-slate-200 hover:shadow-md transition-shadow">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 bg-orange-50 rounded-xl flex items-center justify-center shrink-0">
                                        <svg class="w-5 h-5 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z" />
                                        </svg>
                                    </div>
                                    <span class="text-sm text-slate-500">Temperature</span>
                                </div>
                                <span class="text-xl md:text-2xl font-bold text-slate-900" x-text="system.temperature + '°C'"></span>
                            </div>
                        </div>

                        <!-- 업타임 -->
                        <div class="bg-white rounded-xl p-4 shadow-sm border border-slate-200 hover:shadow-md transition-shadow">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center shrink-0">
                                        <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <circle cx="12" cy="12" r="10" />
                                            <path d="M12 6v6l4 2" />
                                        </svg>
                                    </div>
                                    <span class="text-sm text-slate-500">Uptime</span>
                                </div>
                                <span class="text-xl md:text-2xl font-bold text-slate-900 truncate" x-text="formatUptimeShort(system.uptime)"></span>
                            </div>
                        </div>
                    </div>

                    <!-- Switcher + Network 2열 -->
                    <div class="grid gap-4 md:grid-cols-2 mb-4">
                        <!-- Switcher Status -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                            <div class="px-4 py-3.5 border-b border-slate-100">
                                <h2 class="font-semibold text-slate-900 text-base">Switcher Status</h2>
                            </div>
                            <div class="p-4 space-y-3">
                                <!-- S1 Primary -->
                                <div class="flex items-center justify-between p-3 bg-slate-50 rounded-xl">
                                    <div class="flex items-center gap-2">
                                        <span class="w-2 h-2 rounded-full bg-blue-600"></span>
                                        <div>
                                            <div class="text-sm font-medium text-slate-700">S1 (Primary)</div>
                                            <div class="text-xs text-slate-500 font-mono" x-text="config.switcher.primary.ip || '--'"></div>
                                        </div>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <span class="text-xs px-2 py-0.5 rounded-md bg-blue-100 text-blue-700" x-text="config.switcher.primary.type || '--'"></span>
                                        <span class="flex items-center gap-1.5 text-xs px-2 py-1 rounded-full" :class="config.switcher.primary.connected ? 'bg-emerald-100 text-emerald-700' : 'bg-rose-100 text-rose-700'">
                                            <span class="w-1.5 h-1.5 rounded-full" :class="config.switcher.primary.connected ? 'bg-emerald-500' : 'bg-rose-500'"></span>
                                            <span x-text="config.switcher.primary.connected ? 'Connected' : 'Disconnected'"></span>
                                        </span>
                                    </div>
                                </div>

                                <!-- S2 Secondary -->
                                <div class="flex items-center justify-between p-3 bg-slate-50 rounded-xl">
                                    <div class="flex items-center gap-2">
                                        <span class="w-2 h-2 rounded-full bg-purple-600"></span>
                                        <div>
                                            <div class="text-sm font-medium text-slate-700">S2 (Secondary)</div>
                                            <div class="text-xs text-slate-500 font-mono" x-text="config.switcher.secondary.ip || '--'"></div>
                                        </div>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <span class="text-xs px-2 py-0.5 rounded-md bg-purple-100 text-purple-700" x-text="config.switcher.secondary.type || '--'"></span>
                                        <span class="flex items-center gap-1.5 text-xs px-2 py-1 rounded-full" :class="config.switcher.secondary.connected ? 'bg-emerald-100 text-emerald-700' : 'bg-rose-100 text-rose-700'">
                                            <span class="w-1.5 h-1.5 rounded-full" :class="config.switcher.secondary.connected ? 'bg-emerald-500' : 'bg-rose-500'"></span>
                                            <span x-text="config.switcher.secondary.connected ? 'Connected' : 'Disconnected'"></span>
                                        </span>
                                    </div>
                                </div>

                                <!-- 듀얼 모드 -->
                                <div class="flex items-center justify-between p-3 bg-blue-50 rounded-xl">
                                    <span class="text-sm font-medium text-slate-700">Dual Mode</span>
                                    <div class="flex items-center gap-2">
                                        <span class="text-xs text-slate-600" x-show="config.switcher.dualEnabled">Offset: <span class="font-medium" x-text="config.switcher.secondaryOffset || 0"></span></span>
                                        <span class="text-xs px-2.5 py-1 rounded-full" :class="config.switcher.dualEnabled ? 'bg-blue-100 text-blue-700' : 'bg-slate-200 text-slate-600'" x-text="config.switcher.dualEnabled ? 'Enabled' : 'Disabled'"></span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Network Status -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                            <div class="px-4 py-3.5 border-b border-slate-100">
                                <h2 class="font-semibold text-slate-900 text-base">Network Status</h2>
                            </div>
                            <div class="p-4 space-y-3">
                                <!-- AP -->
                                <div class="flex items-center justify-between p-3 bg-slate-50 rounded-xl">
                                    <div class="flex items-center gap-3">
                                        <div class="w-8 h-8 rounded-lg flex items-center justify-center" :class="network.apEnabled ? 'bg-violet-100' : 'bg-slate-200'">
                                            <svg class="w-4 h-4" :class="network.apEnabled ? 'text-violet-600' : 'text-slate-400'" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <path d="M12 20h.01" />
                                                <path d="M2 8.82a15 15 0 0 1 20 0" />
                                                <path d="M5 12.859a10 10 0 0 1 14 0" />
                                                <path d="M8.5 16.429a5 5 0 0 1 7 0" />
                                            </svg>
                                        </div>
                                        <div>
                                            <div class="text-sm font-medium text-slate-700" x-text="'AP (' + (network.apSsid || '--') + ')'"></div>
                                            <div class="text-xs text-slate-500 font-mono" x-text="network.apIp || '--'"></div>
                                        </div>
                                    </div>
                                    <span class="flex items-center gap-1.5 text-xs px-2.5 py-1 rounded-full" :class="network.apEnabled ? 'bg-emerald-100 text-emerald-700' : 'bg-slate-200 text-slate-500'">
                                        <span class="w-1.5 h-1.5 rounded-full" :class="network.apEnabled ? 'bg-emerald-500' : 'bg-slate-300'"></span>
                                        <span x-text="network.apEnabled ? 'Enabled' : 'Disabled'"></span>
                                    </span>
                                </div>

                                <!-- WiFi -->
                                <div class="flex items-center justify-between p-3 bg-slate-50 rounded-xl">
                                    <div class="flex items-center gap-3">
                                        <div class="w-8 h-8 rounded-lg flex items-center justify-center" :class="network.wifiConnected ? 'bg-blue-100' : 'bg-slate-200'">
                                            <svg class="w-4 h-4" :class="network.wifiConnected ? 'text-blue-600' : 'text-slate-400'" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <path d="M12 20h.01" />
                                                <path d="M2 8.82a15 15 0 0 1 20 0" />
                                                <path d="M5 12.859a10 10 0 0 1 14 0" />
                                                <path d="M8.5 16.429a5 5 0 0 1 7 0" />
                                            </svg>
                                        </div>
                                        <div>
                                            <div class="text-sm font-medium text-slate-700" x-text="'WiFi (' + (network.wifiSsid || '--') + ')'"></div>
                                            <div class="text-xs text-slate-500 font-mono" x-text="network.wifiIp || '--'"></div>
                                        </div>
                                    </div>
                                    <span class="flex items-center gap-1.5 text-xs px-2.5 py-1 rounded-full" :class="network.wifiConnected ? 'bg-emerald-100 text-emerald-700' : 'bg-slate-200 text-slate-500'">
                                        <span class="w-1.5 h-1.5 rounded-full" :class="network.wifiConnected ? 'bg-emerald-500' : 'bg-slate-300'"></span>
                                        <span x-text="network.wifiConnected ? 'Connected' : 'Disconnected'"></span>
                                    </span>
                                </div>

                                <!-- Ethernet -->
                                <div class="flex items-center justify-between p-3 bg-slate-50 rounded-xl">
                                    <div class="flex items-center gap-3">
                                        <div class="w-8 h-8 rounded-lg flex items-center justify-center" :class="{
                                            'bg-emerald-100': network.ethDetected && network.ethConnected,
                                            'bg-slate-200': network.ethDetected && !network.ethConnected,
                                            'bg-amber-100': !network.ethDetected
                                        }">
                                            <svg class="w-4 h-4" :class="{
                                                'text-emerald-600': network.ethDetected && network.ethConnected,
                                                'text-slate-400': network.ethDetected && !network.ethConnected,
                                                'text-amber-600': !network.ethDetected
                                            }" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <path d="m15 20 3-3h2a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h2l3 3z" />
                                                <path d="M6 8v1" />
                                                <path d="M10 8v1" />
                                                <path d="M14 8v1" />
                                                <path d="M18 8v1" />
                                            </svg>
                                        </div>
                                        <div>
                                            <div class="text-sm font-medium text-slate-700">Ethernet</div>
                                            <div class="text-xs" :class="{
                                                'text-slate-500 font-mono': network.ethDetected,
                                                'text-amber-600': !network.ethDetected
                                            }" x-text="network.ethDetected ? (network.ethIp || '--') : 'Check hardware'"></div>
                                        </div>
                                    </div>
                                    <span class="flex items-center gap-1.5 text-xs px-2.5 py-1 rounded-full" :class="{
                                        'bg-emerald-100 text-emerald-700': network.ethDetected && network.ethConnected,
                                        'bg-slate-200 text-slate-500': network.ethDetected && !network.ethConnected,
                                        'bg-amber-100 text-amber-700': !network.ethDetected
                                    }">
                                        <span class="w-1.5 h-1.5 rounded-full" :class="{
                                            'bg-emerald-500': network.ethDetected && network.ethConnected,
                                            'bg-slate-300': network.ethDetected && !network.ethConnected,
                                            'bg-amber-500': !network.ethDetected
                                        }"></span>
                                        <span x-text="network.ethDetected ? (network.ethConnected ? 'Connected' : 'No Link') : 'Not Detected'"></span>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- System Info -->
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                        <div class="px-4 py-3.5 border-b border-slate-100 flex items-center justify-between">
                            <h2 class="font-semibold text-slate-900 text-base">System Info</h2>
                            <button @click="currentView = 'system'" class="text-xs text-blue-600 hover:text-blue-700 font-medium">Open Settings →</button>
                        </div>
                        <div class="p-4 flex flex-wrap gap-x-8 gap-y-2">
                            <div class="flex items-center gap-2">
                                <span class="text-sm text-slate-500">Device ID:</span>
                                <span class="text-sm font-mono font-medium text-slate-900" x-text="system.deviceId || '0000'"></span>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="text-sm text-slate-500">Voltage:</span>
                                <span class="text-sm font-medium text-slate-900" x-text="system.voltage + ' V'"></span>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="text-sm text-slate-500">Version:</span>
                                <span class="text-sm font-medium text-slate-900" x-text="system.version || '0.1.0'"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <div x-show="currentView === 'network'" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 translate-y-2" x-transition:enter-end="opacity-100 translate-y-0" x-cloak>
                    <div class="mb-4">
                        <h2 class="text-lg md:text-xl font-semibold text-slate-900">Network Settings</h2>
                        <p class="text-xs md:text-sm text-slate-500 hidden sm:block">Configure WiFi AP, WiFi STA, and Ethernet settings</p>
                    </div>

                    <div class="grid gap-4 md:grid-cols-2">
                        <!-- AP 설정 카드 -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200">
                            <div class="px-4 py-3 border-b border-slate-100 bg-gradient-to-r from-violet-50 to-transparent">
                                <div class="flex items-center gap-2">
                                    <div class="w-7 h-7 bg-violet-100 rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-violet-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M12 20h.01" />
                                            <path d="M2 8.82a15 15 0 0 1 20 0" />
                                            <path d="M5 12.859a10 10 0 0 1 14 0" />
                                            <path d="M8.5 16.429a5 5 0 0 1 7 0" />
                                        </svg>
                                    </div>
                                    <h3 class="font-semibold text-slate-900">AP Settings</h3>
                                </div>
                            </div>
                            <div class="p-4 space-y-4">
                                <div class="flex items-center justify-between py-2 px-3 bg-violet-50 rounded-lg">
                                    <label class="flex items-center gap-2 cursor-pointer">
                                        <input type="checkbox" x-model="form.ap.enabled" class="w-4 h-4 text-violet-600 rounded focus:ring-violet-500 border-slate-300">
                                        <span class="text-sm font-medium text-slate-700">Enable AP</span>
                                    </label>
                                </div>
                                <div class="space-y-4" :class="!form.ap.enabled ? 'opacity-50 pointer-events-none' : ''">
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">SSID</label>
                                        <input type="text" x-model="form.ap.ssid" class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500 text-sm" placeholder="AP SSID">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Password</label>
                                        <input type="password" x-model="form.ap.password" class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500 text-sm" placeholder="Password">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Channel</label>
                                        <div class="relative" x-data="{ open: false, channels: [
                                            { value: 1, label: '1', recommended: true },
                                            { value: 2, label: '2', recommended: false },
                                            { value: 3, label: '3', recommended: false },
                                            { value: 4, label: '4', recommended: false },
                                            { value: 5, label: '5', recommended: false },
                                            { value: 6, label: '6', recommended: true },
                                            { value: 7, label: '7', recommended: false },
                                            { value: 8, label: '8', recommended: false },
                                            { value: 9, label: '9', recommended: false },
                                            { value: 10, label: '10', recommended: false },
                                            { value: 11, label: '11', recommended: true }
                                        ] }">
                                            <button @click="open = !open" @click.outside="open = false" type="button" class="w-full px-3 py-2 pr-9 border border-slate-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500 text-sm bg-white text-left flex items-center justify-between">
                                                <span x-text="channels.find(c => c.value === form.ap.channel)?.label || form.ap.channel"></span>
                                                <svg class="absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500 pointer-events-none transition-transform" :class="open ? 'rotate-180' : ''" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                                </svg>
                                            </button>
                                            <div x-show="open" x-transition class="absolute z-50 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-48 overflow-auto">
                                                <template x-for="ch in channels" :key="ch.value">
                                                    <button @click="form.ap.channel = ch.value; open = false" type="button" class="w-full px-3 py-2 text-left text-sm hover:bg-violet-50 transition-colors flex items-center justify-between gap-3" :class="form.ap.channel === ch.value ? 'bg-violet-100 text-violet-700 font-medium' : 'text-slate-700'">
                                                        <span x-text="ch.label"></span>
                                                        <template x-if="ch.recommended">
                                                            <span class="text-xs px-1.5 py-0.5 rounded bg-violet-100 text-violet-700">Recommended</span>
                                                        </template>
                                                    </button>
                                                </template>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <button @click="saveAp()" class="w-full px-4 py-2.5 text-sm font-medium text-white bg-violet-600 rounded-xl hover:bg-violet-700 transition-colors">
                                    Save AP Settings
                                </button>
                            </div>
                        </div>

                        <!-- AP 상태 카드 -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                            <div class="px-4 py-3 md:px-5 md:py-3.5 border-b border-slate-100 bg-slate-50">
                                <div class="flex items-center gap-2">
                                    <div class="w-7 h-7 bg-slate-200 rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M12 20h.01" />
                                            <path d="M2 8.82a15 15 0 0 1 20 0" />
                                            <path d="M5 12.859a10 10 0 0 1 14 0" />
                                            <path d="M8.5 16.429a5 5 0 0 1 7 0" />
                                        </svg>
                                    </div>
                                    <h3 class="font-semibold text-slate-900">AP Status</h3>
                                </div>
                            </div>
                            <div class="p-4 space-y-2">
                                <div class="flex justify-between items-center py-2 border-b border-slate-100">
                                    <span class="text-sm text-slate-600">State</span>
                                    <span class="text-sm font-medium px-2 py-0.5 rounded" :class="network.apEnabled ? 'bg-emerald-100 text-emerald-700' : 'bg-slate-200 text-slate-600'" x-text="network.apEnabled ? 'Enabled' : 'Disabled'"></span>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-slate-100">
                                    <span class="text-sm text-slate-600">SSID</span>
                                    <span class="text-sm font-mono text-slate-900" x-text="network.apSsid || '--'"></span>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-slate-100">
                                    <span class="text-sm text-slate-600">Channel</span>
                                    <span class="text-sm font-medium text-slate-900" x-text="network.apChannel || 1"></span>
                                </div>
                                <div class="flex justify-between items-center py-2">
                                    <span class="text-sm text-slate-600">IP Address</span>
                                    <span class="text-sm font-mono text-slate-900" x-text="network.apIp || '--'"></span>
                                </div>
                            </div>
                        </div>

                        <!-- WiFi 설정 카드 -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200">
                            <div class="px-4 py-3 md:px-5 md:py-3.5 border-b border-slate-100 bg-gradient-to-r from-blue-50 to-transparent">
                                <div class="flex items-center gap-2">
                                    <div class="w-7 h-7 bg-blue-100 rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M12 20h.01" />
                                            <path d="M2 8.82a15 15 0 0 1 20 0" />
                                            <path d="M5 12.859a10 10 0 0 1 14 0" />
                                            <path d="M8.5 16.429a5 5 0 0 1 7 0" />
                                        </svg>
                                    </div>
                                    <h3 class="font-semibold text-slate-900">WiFi Settings</h3>
                                </div>
                            </div>
                            <div class="p-4 space-y-4">
                                <div class="flex items-center justify-between py-2 px-3 bg-blue-50 rounded-lg">
                                    <label class="flex items-center gap-2 cursor-pointer">
                                        <input type="checkbox" x-model="form.wifi.enabled" class="w-4 h-4 text-blue-600 rounded focus:ring-blue-500 border-slate-300">
                                        <span class="text-sm font-medium text-slate-700">Enable WiFi</span>
                                    </label>
                                </div>
                                <div class="space-y-4" :class="!form.wifi.enabled ? 'opacity-50 pointer-events-none' : ''">
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">SSID</label>
                                        <input type="text" x-model="form.wifi.ssid" class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" placeholder="WiFi SSID">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Password</label>
                                        <input type="password" x-model="form.wifi.password" class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" placeholder="Password">
                                    </div>
                                </div>
                                <button @click="saveWifi()" class="w-full px-4 py-2.5 text-sm font-medium text-white bg-blue-600 rounded-xl hover:bg-blue-700 transition-colors">
                                    Save WiFi Settings
                                </button>
                            </div>
                        </div>

                        <!-- WiFi 상태 카드 -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                            <div class="px-4 py-3 md:px-5 md:py-3.5 border-b border-slate-100 bg-slate-50">
                                <div class="flex items-center gap-2">
                                    <div class="w-7 h-7 bg-slate-200 rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M12 20h.01" />
                                            <path d="M2 8.82a15 15 0 0 1 20 0" />
                                            <path d="M5 12.859a10 10 0 0 1 14 0" />
                                            <path d="M8.5 16.429a5 5 0 0 1 7 0" />
                                        </svg>
                                    </div>
                                    <h3 class="font-semibold text-slate-900">WiFi Status</h3>
                                </div>
                            </div>
                            <div class="p-4 space-y-2">
                                <div class="flex justify-between items-center py-2 border-b border-slate-100">
                                    <span class="text-sm text-slate-600">Connection</span>
                                    <span class="text-sm font-medium px-2 py-0.5 rounded" :class="network.wifiConnected ? 'bg-emerald-100 text-emerald-700' : 'bg-slate-200 text-slate-600'" x-text="network.wifiConnected ? 'Connected' : 'Disconnected'"></span>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-slate-100">
                                    <span class="text-sm text-slate-600">SSID</span>
                                    <span class="text-sm font-mono text-slate-900" x-text="network.wifiSsid || '--'"></span>
                                </div>
                                <div class="flex justify-between items-center py-2">
                                    <span class="text-sm text-slate-600">IP Address</span>
                                    <span class="text-sm font-mono text-slate-900" x-text="network.wifiIp || '--'"></span>
                                </div>
                            </div>
                        </div>

                        <!-- Ethernet 설정 카드 -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200">
                            <div class="px-4 py-3 md:px-5 md:py-3.5 border-b border-slate-100 bg-gradient-to-r from-emerald-50 to-transparent">
                                <div class="flex items-center gap-2">
                                    <div class="w-7 h-7 bg-emerald-100 rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="m15 20 3-3h2a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h2l3 3z" />
                                            <path d="M6 8v1" />
                                            <path d="M10 8v1" />
                                            <path d="M14 8v1" />
                                            <path d="M18 8v1" />
                                        </svg>
                                    </div>
                                    <h3 class="font-semibold text-slate-900">Ethernet Settings</h3>
                                </div>
                            </div>
                            <div class="p-4 space-y-4">
                                <div class="flex items-center justify-between py-2 px-3 bg-emerald-50 rounded-lg">
                                    <label class="flex items-center gap-2 cursor-pointer">
                                        <input type="checkbox" x-model="form.ethernet.enabled" class="w-4 h-4 text-emerald-600 rounded focus:ring-emerald-500 border-slate-300">
                                        <span class="text-sm font-medium text-slate-700">Enable Ethernet</span>
                                    </label>
                                </div>
                                <div class="space-y-4" :class="!form.ethernet.enabled ? 'opacity-50 pointer-events-none' : ''">
                                    <div class="flex items-center justify-between py-2">
                                        <span class="text-sm font-medium text-slate-700">DHCP</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" x-model="form.ethernet.dhcp" class="sr-only peer">
                                            <div class="w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-emerald-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-600"></div>
                                        </label>
                                    </div>
                                    <div class="space-y-3" :class="form.ethernet.dhcp ? 'opacity-50 pointer-events-none' : ''">
                                        <div>
                                            <label class="block text-sm font-medium text-slate-700 mb-1">IP Address</label>
                                            <input type="text" x-model="form.ethernet.ip" class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-sm" placeholder="192.168.1.100">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-slate-700 mb-1">Gateway</label>
                                            <input type="text" x-model="form.ethernet.gateway" class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-sm" placeholder="192.168.1.1">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-slate-700 mb-1">Subnet Mask</label>
                                            <input type="text" x-model="form.ethernet.netmask" class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-sm" placeholder="255.255.255.0">
                                        </div>
                                    </div>
                                </div>
                                <button @click="saveEthernet()" class="w-full px-4 py-2.5 text-sm font-medium text-white bg-emerald-600 rounded-xl hover:bg-emerald-700 transition-colors">
                                    Save Ethernet Settings
                                </button>
                            </div>
                        </div>

                        <!-- Ethernet 상태 카드 -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                            <div class="px-4 py-3 md:px-5 md:py-3.5 border-b border-slate-100 bg-slate-50">
                                <div class="flex items-center gap-2">
                                    <div class="w-7 h-7 bg-slate-200 rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="m15 20 3-3h2a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h2l3 3z" />
                                            <path d="M6 8v1" />
                                            <path d="M10 8v1" />
                                            <path d="M14 8v1" />
                                            <path d="M18 8v1" />
                                        </svg>
                                    </div>
                                    <h3 class="font-semibold text-slate-900">Ethernet Status</h3>
                                </div>
                            </div>
                            <div class="p-4 space-y-2">
                                <div class="flex justify-between items-center py-2 border-b border-slate-100">
                                    <span class="text-sm text-slate-600">Hardware</span>
                                    <span class="text-sm font-medium px-2 py-0.5 rounded" :class="network.ethDetected ? 'bg-emerald-100 text-emerald-700' : 'bg-amber-100 text-amber-700'" x-text="network.ethDetected ? 'Device Detected' : 'Not Detected'"></span>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-slate-100">
                                    <span class="text-sm text-slate-600">Connection</span>
                                    <span class="text-sm font-medium px-2 py-0.5 rounded" :class="network.ethDetected && network.ethConnected ? 'bg-emerald-100 text-emerald-700' : 'bg-slate-200 text-slate-600'" x-text="network.ethDetected ? (network.ethConnected ? 'Connected' : 'No Link') : 'N/A'"></span>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-slate-100" x-show="network.ethDetected">
                                    <span class="text-sm text-slate-600">Mode</span>
                                    <span class="text-sm font-medium text-slate-900" x-text="form.ethernet.dhcp ? 'DHCP' : 'Static'"></span>
                                </div>
                                <div class="flex justify-between items-center py-2" x-show="network.ethDetected">
                                    <span class="text-sm text-slate-600">IP Address</span>
                                    <span class="text-sm font-mono text-slate-900" x-text="network.ethIp || '--'"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div x-show="currentView === 'switcher'" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 translate-y-2" x-transition:enter-end="opacity-100 translate-y-0" x-cloak>
                    <div class="mb-4">
                        <h2 class="text-lg md:text-xl font-semibold text-slate-900">Switcher Settings</h2>
                        <p class="text-xs md:text-sm text-slate-500 hidden sm:block">Configure video switcher connections</p>
                    </div>

                    <!-- Dual Mode Toggle -->
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-4 mb-4">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="font-semibold text-slate-900">Dual Mode</h3>
                                <p class="text-sm text-slate-500">Enable secondary switcher for expanded camera coverage</p>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" x-model="form.switcher.dualEnabled"
                                       class="sr-only peer" @change="onDualModeChange()">
                                <div class="w-11 h-6 bg-slate-200 rounded-full peer
                                            peer-checked:after:translate-x-full
                                            after:absolute after:top-[2px] after:left-[2px]
                                            after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all
                                            peer-checked:bg-blue-600 transition-all"></div>
                            </label>
                        </div>
                    </div>

                    <!-- Switcher Status Cards (2-Column) -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <!-- Primary Status Card -->
                        <div class="bg-white rounded-xl shadow-sm border border-blue-200 overflow-hidden">
                            <div class="px-4 py-3 bg-blue-50 border-b border-blue-100">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center gap-2">
                                        <span class="w-3 h-3 rounded-full bg-blue-600"></span>
                                        <h3 class="font-semibold text-slate-900">Primary (S1)</h3>
                                    </div>
                                    <span class="text-xs px-2 py-1 rounded-full"
                                          :class="status.switcher.primary.connected
                                              ? 'bg-emerald-100 text-emerald-700'
                                              : 'bg-rose-100 text-rose-700'">
                                        <span x-text="status.switcher.primary.connected ? 'Connected' : 'Disconnected'"></span>
                                    </span>
                                </div>
                            </div>
                            <div class="p-4 space-y-3">
                                <div class="text-sm text-slate-600">
                                    <span class="font-medium">Type:</span>
                                    <span x-text="status.switcher.primary.type || '--'"></span>
                                </div>
                                <div class="text-sm text-slate-600">
                                    <span class="font-medium">IP:</span>
                                    <span class="font-mono" x-text="status.switcher.primary.ip || '--'"></span>
                                </div>
                                <div class="text-sm text-slate-600">
                                    <span class="font-medium">Port:</span>
                                    <span x-text="status.switcher.primary.port || '--'"></span>
                                </div>

                                <!-- Tally Status -->
                                <div class="flex gap-2">
                                    <div class="flex-1 p-2 bg-red-50 rounded-lg">
                                        <div class="text-xs text-red-600 font-medium mb-1">PGM</div>
                                        <div class="text-sm font-semibold text-red-700">
                                            <template x-if="status.switcher.primary.tally && status.switcher.primary.tally.pgm && status.switcher.primary.tally.pgm.length > 0">
                                                <span x-text="status.switcher.primary.tally.pgm.join(', ')"></span>
                                            </template>
                                            <template x-if="!status.switcher.primary.tally || !status.switcher.primary.tally.pgm || status.switcher.primary.tally.pgm.length === 0">
                                                <span class="text-red-400">-</span>
                                            </template>
                                        </div>
                                    </div>
                                    <div class="flex-1 p-2 bg-emerald-50 rounded-lg">
                                        <div class="text-xs text-emerald-600 font-medium mb-1">PVW</div>
                                        <div class="text-sm font-semibold text-emerald-700">
                                            <template x-if="status.switcher.primary.tally && status.switcher.primary.tally.pvw && status.switcher.primary.tally.pvw.length > 0">
                                                <span x-text="status.switcher.primary.tally.pvw.join(', ')"></span>
                                            </template>
                                            <template x-if="!status.switcher.primary.tally || !status.switcher.primary.tally.pvw || status.switcher.primary.tally.pvw.length === 0">
                                                <span class="text-emerald-400">-</span>
                                            </template>
                                        </div>
                                    </div>
                                </div>

                                <button @click="showPrimaryConfig = true"
                                        class="w-full px-4 py-2.5 text-sm font-medium text-blue-600
                                               border border-blue-200 rounded-xl hover:bg-blue-50">
                                    Configure
                                </button>
                            </div>
                        </div>

                        <!-- Secondary Status Card -->
                        <div class="bg-white rounded-xl shadow-sm border overflow-hidden"
                             :class="form.switcher.dualEnabled
                                 ? 'border-purple-200'
                                 : 'border-slate-200 opacity-60'">
                            <div class="px-4 py-3 border-b"
                                 :class="form.switcher.dualEnabled
                                     ? 'bg-purple-50 border-purple-100'
                                     : 'bg-slate-50 border-slate-100'">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center gap-2">
                                        <span class="w-3 h-3 rounded-full"
                                              :class="form.switcher.dualEnabled ? 'bg-purple-600' : 'bg-slate-400'"></span>
                                        <h3 class="font-semibold text-slate-900">Secondary (S2)</h3>
                                    </div>
                                    <span class="text-xs px-2 py-1 rounded-full"
                                          :class="status.switcher.secondary.connected
                                              ? 'bg-emerald-100 text-emerald-700'
                                              : 'bg-rose-100 text-rose-700'">
                                        <span x-text="status.switcher.secondary.connected ? 'Connected' : 'Disconnected'"></span>
                                    </span>
                                </div>
                            </div>
                            <div class="p-4 space-y-3">
                                <div class="text-sm text-slate-600">
                                    <span class="font-medium">Type:</span>
                                    <span x-text="status.switcher.secondary.type || '--'"></span>
                                </div>
                                <div class="text-sm text-slate-600">
                                    <span class="font-medium">IP:</span>
                                    <span class="font-mono" x-text="status.switcher.secondary.ip || '--'"></span>
                                </div>
                                <div class="text-sm text-slate-600">
                                    <span class="font-medium">Port:</span>
                                    <span x-text="status.switcher.secondary.port || '--'"></span>
                                </div>

                                <!-- Tally Status -->
                                <div class="flex gap-2">
                                    <div class="flex-1 p-2 bg-red-50 rounded-lg">
                                        <div class="text-xs text-red-600 font-medium mb-1">PGM</div>
                                        <div class="text-sm font-semibold text-red-700">
                                            <template x-if="status.switcher.secondary.tally && status.switcher.secondary.tally.pgm && status.switcher.secondary.tally.pgm.length > 0">
                                                <span x-text="status.switcher.secondary.tally.pgm.join(', ')"></span>
                                            </template>
                                            <template x-if="!status.switcher.secondary.tally || !status.switcher.secondary.tally.pgm || status.switcher.secondary.tally.pgm.length === 0">
                                                <span class="text-red-400">-</span>
                                            </template>
                                        </div>
                                    </div>
                                    <div class="flex-1 p-2 bg-emerald-50 rounded-lg">
                                        <div class="text-xs text-emerald-600 font-medium mb-1">PVW</div>
                                        <div class="text-sm font-semibold text-emerald-700">
                                            <template x-if="status.switcher.secondary.tally && status.switcher.secondary.tally.pvw && status.switcher.secondary.tally.pvw.length > 0">
                                                <span x-text="status.switcher.secondary.tally.pvw.join(', ')"></span>
                                            </template>
                                            <template x-if="!status.switcher.secondary.tally || !status.switcher.secondary.tally.pvw || status.switcher.secondary.tally.pvw.length === 0">
                                                <span class="text-emerald-400">-</span>
                                            </template>
                                        </div>
                                    </div>
                                </div>

                                <button @click="form.switcher.dualEnabled && (showSecondaryConfig = true)"
                                        class="w-full px-4 py-2.5 text-sm font-medium rounded-xl"
                                        :class="form.switcher.dualEnabled
                                            ? 'text-purple-600 border border-purple-200 hover:bg-purple-50'
                                            : 'text-slate-400 border border-slate-200 cursor-not-allowed'"
                                        :disabled="!form.switcher.dualEnabled">
                                    Configure
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Camera Mapping Visualization -->
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-4 mb-4"
                         x-transition:enter="transition ease-out duration-200"
                         x-transition:enter-start="opacity-0 translate-y-2"
                         x-transition:enter-end="opacity-100 translate-y-0">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <h3 class="font-semibold text-slate-900">Camera Mapping</h3>
                                <p class="text-xs text-slate-500 mt-0.5">Click a number to set Secondary start position</p>
                            </div>
                            <div class="flex items-center gap-4 text-sm">
                                <div class="flex items-center gap-1.5">
                                    <span class="w-3 h-3 rounded bg-blue-500"></span>
                                    <span class="text-slate-600">Primary</span>
                                </div>
                                <div class="flex items-center gap-1.5">
                                    <span class="w-3 h-3 rounded bg-purple-500"></span>
                                    <span class="text-slate-600">Secondary</span>
                                </div>
                            </div>
                        </div>

                        <!-- Camera Buttons Grid -->
                        <div class="grid grid-cols-5 md:grid-cols-10 gap-2 mb-4">
                            <template x-for="i in 20" :key="i">
                                <button @click="selectOffset(i)"
                                        class="aspect-square rounded-lg font-medium text-xs transition-all flex flex-col items-center justify-center leading-tight"
                                        :class="getCameraButtonClass(i)"
                                        :disabled="!form.switcher.dualEnabled">
                                    <span x-text="getCameraLabel(i)"></span>
                                </button>
                            </template>
                        </div>

                        <!-- Offset Info & Save -->
                        <div class="flex items-center justify-between p-3 bg-slate-50 rounded-lg">
                            <div class="text-sm text-slate-600">
                                Secondary starts at camera
                                <span class="font-bold text-purple-600" x-text="form.mappingOffset"></span>
                            </div>
                            <button @click="saveMapping()"
                                    class="px-4 py-2.5 text-sm font-medium text-white
                                           bg-purple-600 rounded-xl hover:bg-purple-700">
                                Save Mapping
                            </button>
                        </div>
                    </div>
                </div>

                <div x-show="currentView === 'broadcast'" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 translate-y-2" x-transition:enter-end="opacity-100 translate-y-0" x-cloak>
                    <div class="mb-4">
                        <h2 class="text-lg md:text-xl font-semibold text-slate-900">Broadcast</h2>
                        <p class="text-xs md:text-sm text-slate-500 hidden sm:block">Configure wireless tally channel</p>
                    </div>

                    <div class="grid gap-4 lg:grid-cols-2">
                        <!-- Channel Scan Card -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                            <div class="px-4 py-3.5 md:px-5 md:py-4 border-b border-slate-100 bg-gradient-to-r from-amber-50 to-transparent">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-slate-900 text-base">Channel Scan</h3>
                                        <p class="text-xs text-slate-500">Find clear channels</p>
                                    </div>
                                </div>
                            </div>
                            <div class="p-4 space-y-4">
                                <!-- Current Frequency Gauge -->
                                <div class="flex items-center justify-between py-4 px-5 bg-slate-50 rounded-xl">
                                    <div class="flex-1 space-y-2">
                                        <div class="flex items-baseline gap-2">
                                            <span class="text-sm text-slate-500">Frequency</span>
                                            <span class="text-xl font-mono font-bold text-slate-900" x-text="Math.round(config.device.rf.frequency) + ' MHz'"></span>
                                        </div>
                                        <div class="flex items-baseline gap-2">
                                            <span class="text-sm text-slate-500">Sync Word</span>
                                            <span class="text-xl font-mono font-bold text-blue-600">0x<span x-text="Number(config.device.rf.syncWord).toString(16).toUpperCase().padStart(2, '0')"></span></span>
                                        </div>
                                    </div>
                                    <!-- Circular RSSI Gauge -->
                                    <div class="relative w-20 h-20">
                                        <svg class="w-full h-full transform -rotate-90" viewBox="0 0 36 36">
                                            <!-- Background circle -->
                                            <circle cx="18" cy="18" r="16" fill="none" stroke="#e2e8f0" stroke-width="3"/>
                                            <!-- RSSI Gauge circle -->
                                            <circle cx="18" cy="18" r="16" fill="none"
                                                    :stroke="getGaugeColor(channelScan.currentRssi)"
                                                    :stroke-dasharray="getGaugeCircumference(channelScan.currentRssi)"
                                                    stroke-width="3"
                                                    stroke-linecap="round"
                                                    class="transition-all duration-500"/>
                                        </svg>
                                        <div class="absolute inset-0 flex flex-col items-center justify-center">
                                            <span class="text-[10px] text-slate-400">RSSI</span>
                                            <span class="text-xs font-bold" :class="getGaugeTextColor(channelScan.currentRssi)" x-text="channelScan.currentRssi"></span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Scan Button -->
                                <button @click="startChannelScan()" :disabled="channelScan.scanning" class="w-full px-4 py-3 text-sm font-medium text-white bg-amber-600 rounded-xl hover:bg-amber-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                                    <span x-show="!channelScan.scanning">Start Scan (850-930 MHz)</span>
                                    <span x-show="channelScan.scanning">Scanning...</span>
                                </button>

                                <!-- Progress -->
                                <div x-show="channelScan.scanning || channelScan.progress > 0" class="space-y-2">
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-slate-600">Scanning...</span>
                                        <span class="font-medium text-slate-900" x-text="channelScan.progress + '%'"></span>
                                    </div>
                                    <div class="w-full bg-slate-200 rounded-full h-2">
                                        <div class="bg-amber-600 h-2 rounded-full transition-all duration-300" :style="'width: ' + channelScan.progress + '%'"></div>
                                    </div>
                                </div>

                                <!-- Recommendation (after scan) -->
                                <div x-show="channelScan.recommendation && !channelScan.scanning" class="p-3 rounded-lg text-sm" :class="{
                                    'bg-emerald-50 border border-emerald-200': channelScan.recommendation && channelScan.recommendation.type === 'good',
                                    'bg-amber-50 border border-amber-200': channelScan.recommendation && channelScan.recommendation.type === 'better',
                                    'bg-rose-50 border border-rose-200': channelScan.recommendation && channelScan.recommendation.type === 'change'
                                }">
                                    <template x-if="channelScan.recommendation">
                                        <div class="flex items-start gap-2">
                                            <span x-show="channelScan.recommendation.type === 'good'" class="text-emerald-600">✓</span>
                                            <span x-show="channelScan.recommendation.type === 'better'" class="text-amber-600">↑</span>
                                            <span x-show="channelScan.recommendation.type === 'change'" class="text-rose-600">⚠</span>
                                            <div>
                                                <p class="font-medium" x-text="channelScan.recommendation.title"></p>
                                                <p class="text-xs mt-1" x-show="channelScan.recommendation.message" x-text="channelScan.recommendation.message"></p>
                                                <button x-show="channelScan.recommendation.suggestedFreq"
                                                        @click="selectChannelFrequency(channelScan.recommendation.suggestedFreq); scrollToChannelSettings()"
                                                        class="mt-2 text-xs underline opacity-75 hover:opacity-100"
                                                        :class="{
                                                            'text-emerald-700': channelScan.recommendation.type === 'better',
                                                            'text-rose-700': channelScan.recommendation.type === 'change'
                                                        }">
                                                    Switch to <span x-text="channelScan.recommendation.suggestedFreq.toFixed(1) + ' MHz'"></span>
                                                </button>
                                            </div>
                                        </div>
                                    </template>
                                </div>
                            </div>
                        </div>

                        <!-- Scan Results Card -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden lg:row-span-2">
                            <div class="px-4 py-3.5 border-b border-slate-100 bg-gradient-to-r from-emerald-50 to-transparent">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-slate-900 text-base">Scan Results</h3>
                                        <p class="text-xs text-slate-500">RSSI levels by channel</p>
                                    </div>
                                    <span x-show="channelScan.results.length > 0" class="ml-auto text-xs text-slate-500" x-text="channelScan.results.length + ' channels'"></span>
                                </div>
                            </div>
                            <div class="p-4 min-h-[250px] lg:min-h-[400px] flex flex-col">
                                <!-- Empty State -->
                                <div x-show="channelScan.results.length === 0" class="flex-1 flex flex-col items-center justify-center text-slate-400 text-sm">
                                    <svg class="w-12 h-12 mb-2 text-slate-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                    </svg>
                                    <p>No scan results</p>
                                    <p class="text-xs">Click "Start Scan" to begin</p>
                                </div>

                                <!-- Gauge Results -->
                                <div x-show="channelScan.results.length > 0" class="flex-1 overflow-y-auto space-y-1.5 pr-1" style="max-height: 800px;">
                                    <template x-for="result in channelScan.results" :key="result.frequency">
                                        <div @click="selectChannelFrequency(result.frequency)" class="flex items-center gap-3 cursor-pointer hover:bg-slate-50 rounded-lg px-2 py-1.5 transition-colors">
                                            <!-- Frequency -->
                                            <div class="w-16 text-right text-sm font-mono text-slate-600" x-text="result.frequency.toFixed(1) + ' MHz'"></div>
                                            <!-- Gauge Bar -->
                                            <div class="flex-1 h-5 bg-slate-200 rounded-full overflow-hidden relative">
                                                <div class="h-full rounded-full transition-all duration-200"
                                                     :style="{
                                                         width: result.gaugePercent + '%',
                                                         backgroundColor: result.clearChannel ? '#22c55e' : '#ef4444'
                                                     }"></div>
                                                <!-- RSSI Value on Bar -->
                                                <div class="absolute inset-0 flex items-center justify-end pr-2">
                                                    <span class="text-xs font-medium text-slate-700" x-text="result.rssi + ' dBm'"></span>
                                                </div>
                                            </div>
                                            <!-- Status Badge -->
                                            <div class="w-16">
                                                <span class="text-xs px-2 py-0.5 rounded" :class="{
                                                    'bg-emerald-100 text-emerald-700': result.clearChannel,
                                                    'bg-rose-100 text-rose-700': !result.clearChannel
                                                }" x-text="result.clearChannel ? 'Clear' : 'Busy'"></span>
                                            </div>
                                        </div>
                                    </template>
                                </div>
                            </div>
                        </div>

                        <!-- Channel Settings Card -->
                        <div id="channel-settings" class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                            <div class="px-4 py-3.5 md:px-5 md:py-4 border-b border-slate-100 bg-gradient-to-r from-blue-50 to-transparent">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-slate-900 text-base">Channel Settings</h3>
                                        <p class="text-xs text-slate-500">Frequency & Sync Word</p>
                                    </div>
                                </div>
                            </div>
                            <div class="p-4 space-y-4">
                                <!-- Info Notice -->
                                <div class="p-3 bg-blue-50 border border-blue-200 rounded-lg text-xs text-blue-800">
                                    <p class="font-semibold mb-1">⚠️ Important</p>
                                    <p>• Frequency & Sync Word must match for TX/RX communication</p>
                                    <p>• Change frequency only when all RX devices are ON</p>
                                    <p>• Keep devices close during change (5-10 seconds)</p>
                                </div>

                                <!-- Frequency Slider -->
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-2">Frequency (MHz)</label>
                                    <input type="range" x-model="form.broadcast.frequency" min="850" max="930" step="1"
                                           @input="form.broadcast.frequency = Math.round(form.broadcast.frequency)"
                                           class="w-full h-2 bg-slate-200 rounded-full appearance-none cursor-pointer accent-blue-600">
                                    <div class="flex justify-between text-xs text-slate-500 mt-1">
                                        <template x-for="freq in [850, 860, 868, 870, 880, 900, 915, 925, 930]">
                                            <span :class="{'font-semibold text-blue-600': form.broadcast.frequency === freq}" x-text="freq"></span>
                                        </template>
                                    </div>
                                    <div class="text-center mt-2">
                                        <span class="text-lg font-mono font-semibold text-blue-600" x-text="Math.round(form.broadcast.frequency) + ' MHz'"></span>
                                    </div>
                                </div>

                                <!-- Sync Word Slider -->
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-2">Sync Word</label>
                                    <input type="range" x-model="form.broadcast.syncCode" min="1" max="150" step="1"
                                           class="w-full h-2 bg-slate-200 rounded-full appearance-none cursor-pointer accent-blue-600">
                                    <div class="flex justify-between text-xs text-slate-500 mt-1 font-mono">
                                        <span>0x01</span>
                                        <span>0x20</span>
                                        <span>0x40</span>
                                        <span>0x60</span>
                                        <span>0x80</span>
                                        <span>0x96</span>
                                    </div>
                                    <div class="text-center mt-2">
                                        <span class="text-sm font-mono text-slate-600">Value: </span>
                                        <span class="text-lg font-mono font-semibold text-blue-600">0x<span x-text="Number(form.broadcast.syncCode).toString(16).toUpperCase().padStart(2, '0')"></span></span>
                                    </div>
                                </div>

                                <!-- Save Button with Loading -->
                                <button @click="saveBroadcast()" :disabled="broadcast.saving"
                                        class="w-full px-4 py-2.5 text-sm font-medium text-white rounded-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                                        :class="broadcast.saving ? 'bg-blue-400' : 'bg-blue-600 hover:bg-blue-700'">
                                    <span x-show="!broadcast.saving">Save Channel Settings</span>
                                    <span x-show="broadcast.saving" class="flex items-center justify-center gap-2">
                                        <svg class="animate-spin h-4 w-4" fill="none" viewBox="0 0 24 24">
                                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                        </svg>
                                        Applying settings...
                                    </span>
                                </button>

                                <!-- Progress during save -->
                                <div x-show="broadcast.saving" class="text-center">
                                    <p class="text-xs text-slate-500">This may take 5-10 seconds</p>
                                    <p class="text-xs text-slate-400">Keep devices close and powered on</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

<!-- Devices Page -->
<div x-show="currentView === 'devices'" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 translate-y-2" x-transition:enter-end="opacity-100 translate-y-0" x-cloak>
    <div class="mb-4">
        <h2 class="text-lg md:text-xl font-semibold text-slate-900">Connected Devices</h2>
        <p class="text-xs md:text-sm text-slate-500 hidden sm:block">
            <span x-text="devices.onlineCount"></span> online / <span x-text="devices.registeredCount"></span> registered devices
        </p>
    </div>

    <!-- 상태 표시줄 -->
    <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-4 mb-4">
        <div class="flex items-center justify-between">
            <div class="flex items-center gap-4">
                <div class="flex items-center gap-2">
                    <span class="w-2 h-2 rounded-full" :class="devices.onlineCount > 0 ? 'bg-emerald-500' : 'bg-slate-300'"></span>
                    <span class="text-sm text-slate-600"><span class="font-medium" x-text="devices.onlineCount"></span> Online</span>
                </div>
                <div class="flex items-center gap-2">
                    <span class="w-2 h-2 rounded-full bg-blue-500"></span>
                    <span class="text-sm text-slate-600"><span class="font-medium" x-text="devices.registeredCount"></span> Registered</span>
                </div>
            </div>
            <button @click="fetchDevices()"
                    :disabled="devices.loading"
                    class="px-3 py-1.5 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg disabled:bg-slate-50 disabled:text-slate-400 disabled:cursor-not-allowed flex items-center gap-2">
                <svg class="w-4 h-4" :class="{ 'animate-spin': devices.loading }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                </svg>
                <span x-text="devices.loading ? 'Refreshing...' : 'Refresh'"></span>
            </button>
        </div>
    </div>

    <!-- 디바이스 그리드 -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        <template x-for="device in devices.list" :key="device.id">
            <div class="bg-white rounded-xl border border-slate-200 overflow-hidden">
                <!-- 디바이스 카드 헤더 -->
                <div class="px-4 py-3 border-b border-slate-100 bg-gradient-to-r from-emerald-50 to-transparent">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center">
                                <svg class="w-4 h-4 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"></path>
                                </svg>
                            </div>
                            <div>
                                <p class="font-semibold text-slate-900 text-sm" x-text="device.id"></p>
                                <p class="text-xs text-slate-500">Cam <span x-text="device.cameraId"></span></p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 디바이스 카드 내용 -->
                <div class="p-4 space-y-3">
                    <!-- 배터리 -->
                    <div>
                        <div class="flex items-center justify-between mb-1">
                            <span class="text-xs text-slate-500">Battery</span>
                            <span class="text-xs font-medium" :class="{
                                'text-emerald-600': device.battery > 50,
                                'text-yellow-600': device.battery > 20 && device.battery <= 50,
                                'text-rose-600': device.battery <= 20
                            }" x-text="device.battery + '%'"></span>
                        </div>
                        <div class="h-1.5 bg-slate-100 rounded-full overflow-hidden">
                            <div class="h-full rounded-full transition-all"
                                 :class="{
                                     'bg-emerald-500': device.battery > 50,
                                     'bg-yellow-500': device.battery > 20 && device.battery <= 50,
                                     'bg-rose-500': device.battery <= 20
                                 }"
                                 :style="`width: ${device.battery}%`"></div>
                        </div>
                    </div>

                    <!-- 신호 + Ping 2열 -->
                    <div class="grid grid-cols-2 gap-3">
                        <!-- RSSI -->
                        <div>
                            <div class="flex items-center justify-between mb-1">
                                <span class="text-xs text-slate-500">Signal</span>
                            </div>
                            <div class="flex items-center gap-1.5">
                                <!-- 안테나 아이콘 (3단계) -->
                                <div class="flex gap-0.5">
                                    <div class="w-0.5 h-1.5 rounded-sm" :class="getSignalLevel(device.rssi, device.snr) >= 1 ? 'bg-emerald-500' : 'bg-slate-200'"></div>
                                    <div class="w-0.5 h-2.5 rounded-sm" :class="getSignalLevel(device.rssi, device.snr) >= 2 ? 'bg-emerald-500' : 'bg-slate-200'"></div>
                                    <div class="w-0.5 h-3.5 rounded-sm" :class="getSignalLevel(device.rssi, device.snr) >= 3 ? 'bg-emerald-500' : 'bg-slate-200'"></div>
                                </div>
                                <span class="text-xs font-medium" :class="{
                                    'text-emerald-600': getSignalLevel(device.rssi, device.snr) === 3,
                                    'text-yellow-600': getSignalLevel(device.rssi, device.snr) === 2,
                                    'text-rose-600': getSignalLevel(device.rssi, device.snr) <= 1
                                }" x-text="getSignalText(device.rssi, device.snr)"></span>
                            </div>
                        </div>

                        <!-- Ping -->
                        <div>
                            <div class="flex items-center justify-between mb-1">
                                <span class="text-xs text-slate-500">Ping</span>
                            </div>
                            <span class="text-xs font-medium" :class="{
                                'text-emerald-600': device.ping < 200,
                                'text-yellow-600': device.ping >= 200 && device.ping < 500,
                                'text-rose-600': device.ping >= 500
                            }" x-text="device.ping + ' ms'"></span>
                        </div>
                    </div>

                    <!-- 업타임 + RF 2열 -->
                    <div class="grid grid-cols-2 gap-3">
                        <div>
                            <span class="text-xs text-slate-500 block mb-1">Uptime</span>
                            <span class="text-xs font-medium text-slate-700" x-text="formatUptime(device.uptime)"></span>
                        </div>
                        <div>
                            <span class="text-xs text-slate-500 block mb-1">Frequency</span>
                            <span class="text-xs font-medium text-slate-700" x-text="device.frequency + ' MHz'"></span>
                        </div>
                    </div>

                    <!-- 밝기 -->
                    <div class="flex items-center justify-between pt-2 border-t border-slate-100">
                        <span class="text-xs text-slate-500">Brightness</span>
                        <div class="flex items-center gap-2">
                            <div class="w-16 h-1 bg-slate-100 rounded-full overflow-hidden">
                                <div class="h-full bg-slate-700 rounded-full" :style="`width: ${device.brightness}%`"></div>
                            </div>
                            <span class="text-xs font-medium text-slate-700" x-text="device.brightness + '%'"></span>
                        </div>
                    </div>
                </div>
            </div>
        </template>
    </div>

    <!-- 디바이스 없음 -->
    <div x-show="devices.list.length === 0 && !devices.loading"
         class="text-center py-16 bg-white rounded-xl border border-slate-200">
        <div class="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4">
            <svg class="w-8 h-8 text-slate-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"></path>
            </svg>
        </div>
        <p class="text-slate-600 font-medium">No devices connected</p>
        <p class="text-sm text-slate-400 mt-1">Devices will appear here when they come online</p>
    </div>
</div>

                <div x-show="currentView === 'system'" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 translate-y-2" x-transition:enter-end="opacity-100 translate-y-0" x-cloak>
                    <div class="mb-4">
                        <h2 class="text-lg md:text-xl font-semibold text-slate-900">System Settings</h2>
                        <p class="text-xs md:text-sm text-slate-500 hidden sm:block">디스플레이 설정을 구성합니다</p>
                    </div>

                    <div class="grid gap-4 lg:grid-cols-2">
                        <!-- Display Settings -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                            <div class="px-4 py-3.5 border-b border-slate-100 bg-gradient-to-r from-violet-50 to-transparent">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-violet-100 rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-violet-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                                        </svg>
                                    </div>
                                    <h3 class="font-semibold text-slate-900 text-base">Display</h3>
                                </div>
                            </div>
                            <div class="p-4 space-y-5">
                                <div>
                                    <div class="flex items-center justify-between mb-2">
                                        <label class="text-sm font-medium text-slate-700">Brightness</label>
                                        <span class="text-sm text-slate-500" x-text="form.display.brightness"></span>
                                    </div>
                                    <input type="range" x-model="form.display.brightness" min="1" max="255" class="w-full h-2 bg-slate-200 rounded-full appearance-none cursor-pointer accent-violet-600">
                                </div>
                                <button @click="saveBrightness()" class="w-full px-4 py-2.5 text-sm font-medium text-white bg-violet-600 rounded-xl hover:bg-violet-700 transition-colors">
                                    Save Display Settings
                                </button>
                            </div>
                        </div>

                        <!-- System Actions -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                            <div class="px-4 py-3.5 border-b border-slate-100">
                                <h3 class="font-semibold text-slate-900 text-base">System Actions</h3>
                            </div>
                            <div class="p-4 space-y-3">
                                <button @click="reboot()" class="w-full px-5 py-2.5 text-sm font-medium text-amber-700 bg-amber-50 border border-amber-200 rounded-xl hover:bg-amber-100 transition-colors">
                                    Reboot Device
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- Toast -->
        <div class="toast toast-end z-50" x-show="toast.show" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="translate-x-full opacity-0" x-transition:enter-end="translate-x-0 opacity-100" x-transition:leave="transition ease-in duration-200" x-transition:leave-start="translate-x-0 opacity-100" x-transition:leave-end="translate-x-full opacity-0" x-cloak>
            <div class="toast-custom" :class="{
                'toast-info': toast.type === 'alert-info',
                'toast-success': toast.type === 'alert-success',
                'toast-error': toast.type === 'alert-error',
                'toast-warning': toast.type === 'alert-warning'
            }">
                <template x-if="toast.type === 'alert-success'">
                    <svg class="w-5 h-5 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </template>
                <template x-if="toast.type === 'alert-error'">
                    <svg class="w-5 h-5 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </template>
                <template x-if="toast.type === 'alert-info'">
                    <svg class="w-5 h-5 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </template>
                <template x-if="toast.type === 'alert-warning'">
                    <svg class="w-5 h-5 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                    </svg>
                </template>
                <span class="text-sm font-medium" x-text="toast.message"></span>
            </div>
        </div>

        <!-- Primary Configuration Dialog -->
        <div x-show="showPrimaryConfig" x-cloak
             class="fixed inset-0 z-50 flex items-center justify-center bg-black/50"
             x-transition:enter="transition ease-out duration-200"
             x-transition:enter-start="opacity-0"
             x-transition:enter-end="opacity-100">
            <div class="bg-white rounded-xl shadow-xl w-full max-w-md mx-4"
                 x-transition:enter="transition ease-out duration-200"
                 x-transition:enter-start="opacity-0 scale-95"
                 x-transition:enter-end="opacity-100 scale-100">
                <div class="px-4 py-3 bg-blue-50 border-b border-blue-100 flex items-center justify-between">
                    <h3 class="font-semibold text-slate-900">Primary Switcher Configuration</h3>
                    <button @click="showPrimaryConfig = false" class="text-slate-400 hover:text-slate-600">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div class="p-4 space-y-4">
                    <!-- Type (Custom Dropdown) -->
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Type</label>
                        <div class="relative" x-data="{ open: false }">
                            <button @click="open = !open" @click.away="open = false"
                                    class="w-full px-3 py-2 border border-slate-300 rounded-lg text-left flex items-center justify-between bg-white">
                                <span x-text="getSwitcherTypeDisplayName(form.switcher.primary.type)"></span>
                                <svg class="w-4 h-4 text-slate-500" :class="{ 'rotate-180': open }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                            <div x-show="open" x-transition
                                 class="absolute z-10 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-40 overflow-auto">
                                <template x-for="opt in ['ATEM', 'vMix', 'OBS', 'OSEE']">
                                    <div @click="opt !== 'OBS' && opt !== 'OSEE' && (form.switcher.primary.type = opt, onSwitcherTypeChange('primary'), open = false)"
                                         class="px-3 py-2 text-sm"
                                         :class="{
                                             'bg-blue-100': form.switcher.primary.type === opt,
                                             'hover:bg-blue-50 cursor-pointer': opt !== 'OBS' && opt !== 'OSEE',
                                             'text-slate-400 cursor-not-allowed bg-slate-50': opt === 'OBS' || opt === 'OSEE'
                                         }"
                                         x-text="getSwitcherTypeDisplayName(opt)"></div>
                                </template>
                            </div>
                        </div>
                        <p class="text-xs text-slate-500 mt-1" x-text="getSwitcherTypeDesc(form.switcher.primary.type)"></p>
                    </div>

                    <!-- Network Interface (Custom Dropdown, ATEM only) -->
                    <div x-show="form.switcher.primary.type === 'ATEM'">
                        <label class="block text-sm font-medium text-slate-700 mb-1">Network Interface</label>
                        <div class="relative" x-data="{ open: false }">
                            <button @click="open = !open" @click.away="open = false"
                                    class="w-full px-3 py-2 border border-slate-300 rounded-lg text-left flex items-center justify-between bg-white">
                                <span x-text="getInterfaceName(form.switcher.primary.interface)"></span>
                                <svg class="w-4 h-4 text-slate-500" :class="{ 'rotate-180': open }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                            <div x-show="open" x-transition
                                 class="absolute z-10 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg">
                                <template x-for="opt in [{val:0,name:'Auto'}, {val:1,name:'Ethernet'}, {val:2,name:'WiFi'}]">
                                    <div @click="form.switcher.primary.interface = opt.val; open = false"
                                         class="px-3 py-2 hover:bg-blue-50 cursor-pointer text-sm"
                                         :class="{ 'bg-blue-100': form.switcher.primary.interface === opt.val }"
                                         x-text="opt.name"></div>
                                </template>
                            </div>
                        </div>
                    </div>

                    <!-- IP Address -->
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">IP Address</label>
                        <input type="text" x-model="form.switcher.primary.ip"
                               class="w-full px-3 py-2 border border-slate-300 rounded-lg"
                               placeholder="192.168.1.100">
                    </div>

                    <!-- Port -->
                    <div>
                        <div class="flex items-center justify-between mb-1">
                            <label class="block text-sm font-medium text-slate-700">Port</label>
                            <button @click="form.switcher.primary.portLocked = !form.switcher.primary.portLocked"
                                    class="text-slate-400 hover:text-slate-600 p-1"
                                    :title="form.switcher.primary.portLocked ? 'Click to unlock' : 'Click to lock'">
                                <!-- Locked -->
                                <svg x-show="form.switcher.primary.portLocked" class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                                </svg>
                                <!-- Unlocked -->
                                <svg x-show="!form.switcher.primary.portLocked" class="w-4 h-4 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"></path>
                                </svg>
                            </button>
                        </div>
                        <input type="number" x-model="form.switcher.primary.port"
                               :disabled="form.switcher.primary.portLocked"
                               class="w-full px-3 py-2 border border-slate-300 rounded-lg disabled:bg-slate-100 disabled:text-slate-500">
                        <p class="text-xs text-slate-500 mt-1">Default: <span x-text="getDefaultPort(form.switcher.primary.type)"></span></p>
                    </div>

                    <!-- Password (OBS only) -->
                    <div x-show="form.switcher.primary.type === 'OBS'">
                        <label class="block text-sm font-medium text-slate-700 mb-1">Password</label>
                        <input type="password" x-model="form.switcher.primary.password"
                               class="w-full px-3 py-2 border border-slate-300 rounded-lg"
                               placeholder="OBS WebSocket password (optional)">
                        <p class="text-xs text-slate-500 mt-1">Required if password is set in OBS</p>
                    </div>

                    <!-- Camera Limit (Number Input) -->
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Camera Limit</label>
                        <input type="number" x-model="form.switcher.primary.cameraLimit" min="0" max="20"
                               class="w-full px-3 py-2 border border-slate-300 rounded-lg">
                        <p class="text-xs text-slate-500 mt-1">0 = Unlimited (Max 20 cameras)</p>
                    </div>

                    <!-- Buttons -->
                    <div class="flex gap-2">
                        <button @click="showPrimaryConfig = false"
                                class="flex-1 px-4 py-2.5 text-sm font-medium text-slate-600
                                       border border-slate-300 rounded-xl hover:bg-slate-50">
                            Cancel
                        </button>
                        <button @click="savePrimarySwitcher()"
                                class="flex-1 px-4 py-2.5 text-sm font-medium text-white
                                       bg-blue-600 rounded-xl hover:bg-blue-700">
                            Save
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Secondary Configuration Dialog -->
        <div x-show="showSecondaryConfig" x-cloak
             class="fixed inset-0 z-50 flex items-center justify-center bg-black/50"
             x-transition:enter="transition ease-out duration-200"
             x-transition:enter-start="opacity-0"
             x-transition:enter-end="opacity-100">
            <div class="bg-white rounded-xl shadow-xl w-full max-w-md mx-4"
                 x-transition:enter="transition ease-out duration-200"
                 x-transition:enter-start="opacity-0 scale-95"
                 x-transition:enter-end="opacity-100 scale-100">
                <div class="px-4 py-3 bg-purple-50 border-b border-purple-100 flex items-center justify-between">
                    <h3 class="font-semibold text-slate-900">Secondary Switcher Configuration</h3>
                    <button @click="showSecondaryConfig = false" class="text-slate-400 hover:text-slate-600">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div class="p-4 space-y-4">
                    <!-- Type (Custom Dropdown) -->
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Type</label>
                        <div class="relative" x-data="{ open: false }">
                            <button @click="open = !open" @click.away="open = false"
                                    class="w-full px-3 py-2 border border-slate-300 rounded-lg text-left flex items-center justify-between bg-white">
                                <span x-text="getSwitcherTypeDisplayName(form.switcher.secondary.type)"></span>
                                <svg class="w-4 h-4 text-slate-500" :class="{ 'rotate-180': open }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                            <div x-show="open" x-transition
                                 class="absolute z-10 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-40 overflow-auto">
                                <template x-for="opt in ['ATEM', 'vMix', 'OBS', 'OSEE']">
                                    <div @click="opt !== 'OBS' && opt !== 'OSEE' && (form.switcher.secondary.type = opt, onSwitcherTypeChange('secondary'), open = false)"
                                         class="px-3 py-2 text-sm"
                                         :class="{
                                             'bg-purple-100': form.switcher.secondary.type === opt,
                                             'hover:bg-purple-50 cursor-pointer': opt !== 'OBS' && opt !== 'OSEE',
                                             'text-slate-400 cursor-not-allowed bg-slate-50': opt === 'OBS' || opt === 'OSEE'
                                         }"
                                         x-text="getSwitcherTypeDisplayName(opt)"></div>
                                </template>
                            </div>
                        </div>
                        <p class="text-xs text-slate-500 mt-1" x-text="getSwitcherTypeDesc(form.switcher.secondary.type)"></p>
                    </div>

                    <!-- Network Interface (Custom Dropdown, ATEM only) -->
                    <div x-show="form.switcher.secondary.type === 'ATEM'">
                        <label class="block text-sm font-medium text-slate-700 mb-1">Network Interface</label>
                        <div class="relative" x-data="{ open: false }">
                            <button @click="open = !open" @click.away="open = false"
                                    class="w-full px-3 py-2 border border-slate-300 rounded-lg text-left flex items-center justify-between bg-white">
                                <span x-text="getInterfaceName(form.switcher.secondary.interface)"></span>
                                <svg class="w-4 h-4 text-slate-500" :class="{ 'rotate-180': open }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                            <div x-show="open" x-transition
                                 class="absolute z-10 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg">
                                <template x-for="opt in [{val:0,name:'Auto'}, {val:1,name:'Ethernet'}, {val:2,name:'WiFi'}]">
                                    <div @click="form.switcher.secondary.interface = opt.val; open = false"
                                         class="px-3 py-2 hover:bg-purple-50 cursor-pointer text-sm"
                                         :class="{ 'bg-purple-100': form.switcher.secondary.interface === opt.val }"
                                         x-text="opt.name"></div>
                                </template>
                            </div>
                        </div>
                    </div>

                    <!-- IP Address -->
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">IP Address</label>
                        <input type="text" x-model="form.switcher.secondary.ip"
                               class="w-full px-3 py-2 border border-slate-300 rounded-lg"
                               placeholder="192.168.1.101">
                    </div>

                    <!-- Port -->
                    <div>
                        <div class="flex items-center justify-between mb-1">
                            <label class="block text-sm font-medium text-slate-700">Port</label>
                            <button @click="form.switcher.secondary.portLocked = !form.switcher.secondary.portLocked"
                                    class="text-slate-400 hover:text-slate-600 p-1"
                                    :title="form.switcher.secondary.portLocked ? 'Click to unlock' : 'Click to lock'">
                                <!-- Locked -->
                                <svg x-show="form.switcher.secondary.portLocked" class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                                </svg>
                                <!-- Unlocked -->
                                <svg x-show="!form.switcher.secondary.portLocked" class="w-4 h-4 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"></path>
                                </svg>
                            </button>
                        </div>
                        <input type="number" x-model="form.switcher.secondary.port"
                               :disabled="form.switcher.secondary.portLocked"
                               class="w-full px-3 py-2 border border-slate-300 rounded-lg disabled:bg-slate-100 disabled:text-slate-500">
                        <p class="text-xs text-slate-500 mt-1">Default: <span x-text="getDefaultPort(form.switcher.secondary.type)"></span></p>
                    </div>

                    <!-- Password (OBS only) -->
                    <div x-show="form.switcher.secondary.type === 'OBS'">
                        <label class="block text-sm font-medium text-slate-700 mb-1">Password</label>
                        <input type="password" x-model="form.switcher.secondary.password"
                               class="w-full px-3 py-2 border border-slate-300 rounded-lg"
                               placeholder="OBS WebSocket password (optional)">
                        <p class="text-xs text-slate-500 mt-1">Required if password is set in OBS</p>
                    </div>

                    <!-- Camera Limit (Number Input) -->
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Camera Limit</label>
                        <input type="number" x-model="form.switcher.secondary.cameraLimit" min="0" max="20"
                               class="w-full px-3 py-2 border border-slate-300 rounded-lg">
                        <p class="text-xs text-slate-500 mt-1">0 = Unlimited (Max 20 cameras)</p>
                    </div>

                    <!-- Buttons -->
                    <div class="flex gap-2">
                        <button @click="showSecondaryConfig = false"
                                class="flex-1 px-4 py-2.5 text-sm font-medium text-slate-600
                                       border border-slate-300 rounded-xl hover:bg-slate-50">
                            Cancel
                        </button>
                        <button @click="saveSecondarySwitcher()"
                                class="flex-1 px-4 py-2.5 text-sm font-medium text-white
                                       bg-purple-600 rounded-xl hover:bg-purple-700">
                            Save
                        </button>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script src="js/app.bundle.js"></script>
</body>
</html>
