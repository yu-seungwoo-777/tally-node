<!DOCTYPE html>
<html lang="ko" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tally Node Control</title>
    <style>[x-cloak]{display:none!important;}</style>
    <!-- 개발용: Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/styles.css">
    <script defer src="vendor/alpine.js"></script>
</head>
<body class="bg-slate-50">
    <div x-data="tallyApp()" class="flex min-h-screen">

        <!-- 사이드바 -->
        <aside :class="sidebarOpen ? 'translate-x-0' : '-translate-x-full lg:translate-x-0'"
               class="fixed lg:static inset-y-0 left-0 z-50 w-64 bg-white border-r border-slate-200 transition-transform duration-300">
            <!-- 로고 -->
            <div class="flex items-center justify-between px-8 py-5 border-b border-slate-200">
                <div>
                    <h1 class="font-bold text-slate-900 text-lg">TALLY-NODE</h1>
                    <p class="text-xs text-slate-500">Wireless Tally System</p>
                </div>
                <button @click="sidebarOpen = false" class="lg:hidden p-1 hover:bg-slate-100 rounded-lg">
                    <svg class="w-5 h-5 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- 네비게이션 -->
            <nav class="px-4 py-2 space-y-1">
                <a href="#dashboard"
                   :class="currentView === 'dashboard' ? 'bg-blue-50 text-blue-700' : 'text-slate-600 hover:bg-slate-50'"
                   class="flex items-center gap-3 px-4 py-2.5 rounded-xl transition-all">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                    </svg>
                    <span class="font-medium">Dashboard</span>
                </a>

                <a href="#network"
                   :class="currentView === 'network' ? 'bg-blue-50 text-blue-700' : 'text-slate-600 hover:bg-slate-50'"
                   class="flex items-center gap-3 px-4 py-2.5 rounded-xl transition-all">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"></path>
                    </svg>
                    <span class="font-medium">Network</span>
                </a>

                <a href="#switcher"
                   :class="currentView === 'switcher' ? 'bg-blue-50 text-blue-700' : 'text-slate-600 hover:bg-slate-50'"
                   class="flex items-center gap-3 px-4 py-2.5 rounded-xl transition-all">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                    </svg>
                    <span class="font-medium">Switcher</span>
                </a>

                <a href="#broadcast"
                   :class="currentView === 'broadcast' ? 'bg-blue-50 text-blue-700' : 'text-slate-600 hover:bg-slate-50'"
                   class="flex items-center gap-3 px-4 py-2.5 rounded-xl transition-all">
                    <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" xmlns="http://www.w3.org/2000/svg">
                        <rect x="10" y="13" width="4" height="6" rx="1" fill="currentColor"/>
                        <rect x="11.25" y="6" width="1.5" height="7" fill="currentColor"/>
                        <circle cx="12" cy="5" r="1.2" fill="currentColor"/>
                        <path d="M6.5 7.5C5.2 9 5.2 11 6.5 12.5"/>
                        <path d="M4 5.5C2 8 2 12 4 14.5"/>
                        <path d="M17.5 7.5C18.8 9 18.8 11 17.5 12.5"/>
                        <path d="M20 5.5C22 8 22 12 20 14.5"/>
                    </svg>
                    <span class="font-medium">Broadcast</span>
                </a>

                <a href="#devices"
                   :class="currentView === 'devices' ? 'bg-blue-50 text-blue-700' : 'text-slate-600 hover:bg-slate-50'"
                   class="flex items-center gap-3 px-4 py-2.5 rounded-xl transition-all">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"></path>
                    </svg>
                    <span class="font-medium">Devices</span>
                </a>

                <a href="#license"
                   :class="currentView === 'license' ? 'bg-blue-50 text-blue-700' : 'text-slate-600 hover:bg-slate-50'"
                   class="flex items-center gap-3 px-4 py-2.5 rounded-xl transition-all">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"></path>
                    </svg>
                    <span class="font-medium">License</span>
                </a>

                <a href="#system"
                   :class="currentView === 'system' ? 'bg-blue-50 text-blue-700' : 'text-slate-600 hover:bg-slate-50'"
                   class="flex items-center gap-3 px-4 py-2.5 rounded-xl transition-all">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    </svg>
                    <span class="font-medium">System</span>
                </a>
            </nav>

            <!-- 사이드바 푸터 -->
            <div class="absolute bottom-0 left-0 right-0 p-4 border-t border-slate-200 bg-slate-50">
                <div class="flex items-center justify-between">
                    <span class="text-sm text-slate-600">Connection</span>
                    <span class="flex items-center gap-2">
                        <span class="w-2 h-2 rounded-full" :class="wsConnected ? 'bg-emerald-500' : 'bg-rose-500'"></span>
                        <span class="text-sm font-medium" :class="wsConnected ? 'text-emerald-600' : 'text-rose-600'" x-text="wsConnected ? 'Online' : 'Offline'"></span>
                    </span>
                </div>
            </div>
        </aside>

        <!-- 모바일 오버레이 -->
        <div x-show="sidebarOpen" @click="sidebarOpen = false" x-transition.opacity
             class="fixed inset-0 bg-slate-900/20 backdrop-blur-sm z-40 lg:hidden" x-cloak></div>

        <!-- 메인 컨텐츠 -->
        <div class="flex-1 flex flex-col">
            <!-- 상단바 -->
            <header class="bg-white border-b border-slate-200 flex items-center px-4 py-3">
                <button @click="sidebarOpen = true" class="lg:hidden p-1 mr-2">
                    <svg class="w-5 h-5 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
                <h1 class="text-base font-semibold text-slate-900" x-text="viewTitle()"></h1>
            </header>

            <!-- 페이지 컨텐츠 (pages/*.html에서 주입) -->
            <main class="flex-1 p-4 lg:p-6 overflow-auto max-w-6xl mx-auto w-full">
                <!-- 라이센스 경고 배너 (상단 전역) -->
                <div x-show="_initialized && license.isValid === false" x-cloak class="mb-4 bg-gradient-to-r from-rose-50 to-orange-50 border-l-4 border-rose-500 rounded-r-xl p-4 shadow-sm">
                    <div class="flex flex-col sm:flex-row sm:items-center gap-3">
                        <div class="flex items-start gap-3 flex-1">
                            <div class="bg-rose-100 rounded-full p-2">
                                <svg class="w-4 h-4 text-rose-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2.5">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01"></path>
                                    <circle cx="12" cy="12" r="10"></circle>
                                </svg>
                            </div>
                            <div>
                                <p class="text-sm font-semibold text-rose-900">License Required for Full Functionality</p>
                                <p class="text-xs text-rose-700 mt-0.5">TX/RX communication is limited without license activation.</p>
                            </div>
                        </div>
                        <a href="#license" class="self-start sm:self-auto px-4 py-2 text-xs font-semibold text-white bg-rose-600 hover:bg-rose-700 active:bg-rose-800 rounded-lg transition-all shadow-sm hover:shadow flex items-center gap-1.5">
                            <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2.5">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"></path>
                            </svg>
                            <span>Activate License</span>
                        </a>
                    </div>
                </div>
                <div x-show="currentView === 'dashboard'" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 translate-y-2" x-transition:enter-end="opacity-100 translate-y-0" x-cloak>
                    <div class="mb-4">
                        <h2 class="text-lg md:text-xl font-semibold text-slate-900">Dashboard</h2>
                        <p class="text-xs md:text-sm text-slate-500 hidden sm:block">System status and connection overview</p>
                    </div>

                    <!-- 히어로 스탯 -->
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-4 items-start">
                        <!-- 배터리 -->
                        <div class="bg-white rounded-xl p-4 shadow-sm border border-slate-200 hover:shadow-md transition-shadow">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 bg-emerald-50 rounded-xl flex items-center justify-center shrink-0">
                                        <svg class="w-5 h-5 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <rect x="2" y="6" width="16" height="12" rx="2" />
                                            <path d="M22 14v-4" />
                                        </svg>
                                    </div>
                                    <span class="text-sm text-slate-500">Battery</span>
                                </div>
                                <span class="text-xl md:text-2xl font-bold text-slate-900" x-text="system.battery + '%'"></span>
                            </div>
                        </div>

                        <!-- 온도 -->
                        <div class="bg-white rounded-xl p-4 shadow-sm border border-slate-200 hover:shadow-md transition-shadow">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 bg-orange-50 rounded-xl flex items-center justify-center shrink-0">
                                        <svg class="w-5 h-5 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z" />
                                        </svg>
                                    </div>
                                    <span class="text-sm text-slate-500">Temperature</span>
                                </div>
                                <span class="text-xl md:text-2xl font-bold text-slate-900" x-text="system.temperature + '°C'"></span>
                            </div>
                        </div>

                        <!-- 업타임 -->
                        <div class="bg-white rounded-xl p-4 shadow-sm border border-slate-200 hover:shadow-md transition-shadow">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center shrink-0">
                                        <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <circle cx="12" cy="12" r="10" />
                                            <path d="M12 6v6l4 2" />
                                        </svg>
                                    </div>
                                    <span class="text-sm text-slate-500">Uptime</span>
                                </div>
                                <span class="text-xl md:text-2xl font-bold text-slate-900 truncate" x-text="formatUptimeShort(system.uptime)"></span>
                            </div>
                        </div>
                    </div>

                    <!-- Switcher + Network 2열 -->
                    <div class="grid gap-4 md:grid-cols-2 mb-4 items-start">
                        <!-- Switcher Status -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                            <div class="px-4 py-3.5 border-b border-slate-100 flex items-center justify-between">
                                <h2 class="font-semibold text-slate-900 text-base">Switcher Status</h2>
                                <button @click="currentView = 'switcher'" class="text-xs text-blue-600 hover:text-blue-700 font-medium">Open →</button>
                            </div>
                            <div class="p-4 space-y-3">
                                <!-- S1 Primary -->
                                <div class="flex items-center justify-between p-3 bg-slate-50 rounded-xl">
                                    <div class="flex items-center gap-2">
                                        <span class="w-2 h-2 rounded-full bg-blue-600"></span>
                                        <div>
                                            <div class="text-sm font-medium text-slate-700">S1 (Primary)</div>
                                            <div class="text-xs text-slate-500 font-mono" x-text="config.switcher.primary.ip || '--'"></div>
                                        </div>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <span class="text-xs px-2 py-0.5 rounded-md bg-blue-100 text-blue-700" x-text="config.switcher.primary.type || '--'"></span>
                                        <span class="flex items-center gap-1.5 text-xs px-2 py-1 rounded-full" :class="config.switcher.primary.connected ? 'bg-emerald-100 text-emerald-700' : 'bg-rose-100 text-rose-700'">
                                            <span class="w-1.5 h-1.5 rounded-full" :class="config.switcher.primary.connected ? 'bg-emerald-500' : 'bg-rose-500'"></span>
                                            <span x-text="config.switcher.primary.connected ? 'Connected' : 'Disconnected'"></span>
                                        </span>
                                    </div>
                                </div>

                                <!-- S2 Secondary -->
                                <div class="flex items-center justify-between p-3 bg-slate-50 rounded-xl">
                                    <div class="flex items-center gap-2">
                                        <span class="w-2 h-2 rounded-full bg-purple-600"></span>
                                        <div>
                                            <div class="text-sm font-medium text-slate-700">S2 (Secondary)</div>
                                            <div class="text-xs text-slate-500 font-mono" x-text="config.switcher.secondary.ip || '--'"></div>
                                        </div>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <span class="text-xs px-2 py-0.5 rounded-md bg-purple-100 text-purple-700" x-text="config.switcher.secondary.type || '--'"></span>
                                        <span class="flex items-center gap-1.5 text-xs px-2 py-1 rounded-full" :class="config.switcher.secondary.connected ? 'bg-emerald-100 text-emerald-700' : 'bg-rose-100 text-rose-700'">
                                            <span class="w-1.5 h-1.5 rounded-full" :class="config.switcher.secondary.connected ? 'bg-emerald-500' : 'bg-rose-500'"></span>
                                            <span x-text="config.switcher.secondary.connected ? 'Connected' : 'Disconnected'"></span>
                                        </span>
                                    </div>
                                </div>

                                <!-- 듀얼 모드 -->
                                <div class="flex items-center justify-between p-3 bg-blue-50 rounded-xl">
                                    <span class="text-sm font-medium text-slate-700">Dual Mode</span>
                                    <div class="flex items-center gap-2">
                                        <span class="text-xs text-slate-600" x-show="config.switcher.dualEnabled">Offset: <span class="font-medium" x-text="config.switcher.secondaryOffset || 0"></span></span>
                                        <span class="text-xs px-2.5 py-1 rounded-full" :class="config.switcher.dualEnabled ? 'bg-blue-100 text-blue-700' : 'bg-slate-200 text-slate-600'" x-text="config.switcher.dualEnabled ? 'Enabled' : 'Disabled'"></span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Network Status -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                            <div class="px-4 py-3.5 border-b border-slate-100 flex items-center justify-between">
                                <h2 class="font-semibold text-slate-900 text-base">Network Status</h2>
                                <button @click="currentView = 'network'" class="text-xs text-blue-600 hover:text-blue-700 font-medium">Open →</button>
                            </div>
                            <div class="p-4 space-y-3">
                                <!-- AP -->
                                <div class="flex items-center justify-between p-3 bg-slate-50 rounded-xl">
                                    <div class="flex items-center gap-3">
                                        <div class="w-8 h-8 rounded-lg flex items-center justify-center" :class="network.apEnabled ? 'bg-violet-100' : 'bg-slate-200'">
                                            <svg class="w-4 h-4" :class="network.apEnabled ? 'text-violet-600' : 'text-slate-400'" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <path d="M12 20h.01" />
                                                <path d="M2 8.82a15 15 0 0 1 20 0" />
                                                <path d="M5 12.859a10 10 0 0 1 14 0" />
                                                <path d="M8.5 16.429a5 5 0 0 1 7 0" />
                                            </svg>
                                        </div>
                                        <div>
                                            <div class="text-sm font-medium text-slate-700" x-text="'AP (' + (network.apSsid || '--') + ')'"></div>
                                            <div class="text-xs text-slate-500 font-mono" x-text="network.apIp || '--'"></div>
                                        </div>
                                    </div>
                                    <span class="flex items-center gap-1.5 text-xs px-2.5 py-1 rounded-full" :class="network.apEnabled ? 'bg-emerald-100 text-emerald-700' : 'bg-slate-200 text-slate-500'">
                                        <span class="w-1.5 h-1.5 rounded-full" :class="network.apEnabled ? 'bg-emerald-500' : 'bg-slate-300'"></span>
                                        <span x-text="network.apEnabled ? 'Enabled' : 'Disabled'"></span>
                                    </span>
                                </div>

                                <!-- WiFi -->
                                <div class="flex items-center justify-between p-3 bg-slate-50 rounded-xl">
                                    <div class="flex items-center gap-3">
                                        <div class="w-8 h-8 rounded-lg flex items-center justify-center" :class="network.wifiConnected ? 'bg-blue-100' : 'bg-slate-200'">
                                            <svg class="w-4 h-4" :class="network.wifiConnected ? 'text-blue-600' : 'text-slate-400'" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <path d="M12 20h.01" />
                                                <path d="M2 8.82a15 15 0 0 1 20 0" />
                                                <path d="M5 12.859a10 10 0 0 1 14 0" />
                                                <path d="M8.5 16.429a5 5 0 0 1 7 0" />
                                            </svg>
                                        </div>
                                        <div>
                                            <div class="text-sm font-medium text-slate-700" x-text="'WiFi (' + (network.wifiSsid || '--') + ')'"></div>
                                            <div class="text-xs text-slate-500 font-mono" x-text="network.wifiIp || '--'"></div>
                                        </div>
                                    </div>
                                    <span class="flex items-center gap-1.5 text-xs px-2.5 py-1 rounded-full" :class="network.wifiConnected ? 'bg-emerald-100 text-emerald-700' : 'bg-slate-200 text-slate-500'">
                                        <span class="w-1.5 h-1.5 rounded-full" :class="network.wifiConnected ? 'bg-emerald-500' : 'bg-slate-300'"></span>
                                        <span x-text="network.wifiConnected ? 'Connected' : 'Disconnected'"></span>
                                    </span>
                                </div>

                                <!-- Ethernet -->
                                <div class="flex items-center justify-between p-3 bg-slate-50 rounded-xl">
                                    <div class="flex items-center gap-3">
                                        <div class="w-8 h-8 rounded-lg flex items-center justify-center" :class="{
                                            'bg-emerald-100': network.ethDetected && network.ethConnected,
                                            'bg-slate-200': network.ethDetected && !network.ethConnected,
                                            'bg-amber-100': !network.ethDetected
                                        }">
                                            <svg class="w-4 h-4" :class="{
                                                'text-emerald-600': network.ethDetected && network.ethConnected,
                                                'text-slate-400': network.ethDetected && !network.ethConnected,
                                                'text-amber-600': !network.ethDetected
                                            }" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <path d="m15 20 3-3h2a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h2l3 3z" />
                                                <path d="M6 8v1" />
                                                <path d="M10 8v1" />
                                                <path d="M14 8v1" />
                                                <path d="M18 8v1" />
                                            </svg>
                                        </div>
                                        <div>
                                            <div class="text-sm font-medium text-slate-700">Ethernet</div>
                                            <div class="text-xs" :class="{
                                                'text-slate-500 font-mono': network.ethDetected,
                                                'text-amber-600': !network.ethDetected
                                            }" x-text="network.ethDetected ? (network.ethIp || '--') : 'Check hardware'"></div>
                                        </div>
                                    </div>
                                    <span class="flex items-center gap-1.5 text-xs px-2.5 py-1 rounded-full" :class="{
                                        'bg-emerald-100 text-emerald-700': network.ethDetected && network.ethConnected,
                                        'bg-slate-200 text-slate-500': network.ethDetected && !network.ethConnected,
                                        'bg-amber-100 text-amber-700': !network.ethDetected
                                    }">
                                        <span class="w-1.5 h-1.5 rounded-full" :class="{
                                            'bg-emerald-500': network.ethDetected && network.ethConnected,
                                            'bg-slate-300': network.ethDetected && !network.ethConnected,
                                            'bg-amber-500': !network.ethDetected
                                        }"></span>
                                        <span x-text="network.ethDetected ? (network.ethConnected ? 'Connected' : 'No Link') : 'Not Detected'"></span>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- System Info -->
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                        <div class="px-4 py-3.5 border-b border-slate-100">
                            <h2 class="font-semibold text-slate-900 text-base">System Info</h2>
                        </div>
                        <div class="p-4 flex flex-wrap gap-x-8 gap-y-2">
                            <div class="flex items-center gap-2">
                                <span class="text-sm text-slate-500">Device ID:</span>
                                <span class="text-sm font-mono font-medium text-slate-900" x-text="system.deviceId || '0000'"></span>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="text-sm text-slate-500">Voltage:</span>
                                <span class="text-sm font-medium text-slate-900" x-text="system.voltage + ' V'"></span>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="text-sm text-slate-500">Version:</span>
                                <span class="text-sm font-medium text-slate-900" x-text="system.version || '0.1.0'"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <div x-show="currentView === 'network'" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 translate-y-2" x-transition:enter-end="opacity-100 translate-y-0" x-cloak>
                    <div class="mb-4">
                        <h2 class="text-lg md:text-xl font-semibold text-slate-900">Network Settings</h2>
                        <p class="text-xs md:text-sm text-slate-500 hidden sm:block">Configure WiFi AP, WiFi STA, and Ethernet settings</p>
                    </div>

                    <div class="grid gap-4 grid-cols-1 md:grid-cols-2 items-start">
                        <!-- AP 설정 카드 -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200">
                            <div class="px-4 py-3 border-b border-slate-100 bg-gradient-to-r from-violet-50 to-transparent">
                                <div class="flex items-center gap-2">
                                    <div class="w-7 h-7 bg-violet-100 rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-violet-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M12 20h.01" />
                                            <path d="M2 8.82a15 15 0 0 1 20 0" />
                                            <path d="M5 12.859a10 10 0 0 1 14 0" />
                                            <path d="M8.5 16.429a5 5 0 0 1 7 0" />
                                        </svg>
                                    </div>
                                    <h3 class="font-semibold text-slate-900">AP Settings</h3>
                                </div>
                            </div>
                            <div class="p-4 space-y-4">
                                <div class="flex items-center justify-between py-2 px-3 bg-violet-50 rounded-lg">
                                    <label class="flex items-center gap-2 cursor-pointer">
                                        <input type="checkbox" x-model="form.ap.enabled" class="w-4 h-4 text-violet-600 rounded focus:ring-violet-500 border-slate-300">
                                        <span class="text-sm font-medium text-slate-700">Enable AP</span>
                                    </label>
                                </div>
                                <div class="space-y-4" :class="!form.ap.enabled ? 'opacity-50 pointer-events-none' : ''">
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">SSID</label>
                                        <input type="text" x-model="form.ap.ssid" class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500 text-sm" placeholder="AP SSID">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Password</label>
                                        <input type="text" x-model="form.ap.password" class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500 text-sm" placeholder="Password">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Channel</label>
                                        <div class="relative" x-data="{ open: false, channels: [
                                            { value: 1, label: '1', recommended: true },
                                            { value: 2, label: '2', recommended: false },
                                            { value: 3, label: '3', recommended: false },
                                            { value: 4, label: '4', recommended: false },
                                            { value: 5, label: '5', recommended: false },
                                            { value: 6, label: '6', recommended: true },
                                            { value: 7, label: '7', recommended: false },
                                            { value: 8, label: '8', recommended: false },
                                            { value: 9, label: '9', recommended: false },
                                            { value: 10, label: '10', recommended: false },
                                            { value: 11, label: '11', recommended: true }
                                        ] }">
                                            <button @click="open = !open" @click.outside="open = false" type="button" class="w-full px-3 py-2 pr-9 border border-slate-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500 text-sm bg-white text-left flex items-center justify-between">
                                                <span x-text="channels.find(c => c.value === form.ap.channel)?.label || form.ap.channel"></span>
                                                <svg class="absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500 pointer-events-none transition-transform" :class="open ? 'rotate-180' : ''" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                                </svg>
                                            </button>
                                            <div x-show="open" x-transition class="absolute z-50 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-48 overflow-auto">
                                                <template x-for="ch in channels" :key="ch.value">
                                                    <button @click="form.ap.channel = ch.value; open = false" type="button" class="w-full px-3 py-2 text-left text-sm hover:bg-violet-50 transition-colors flex items-center justify-between gap-3" :class="form.ap.channel === ch.value ? 'bg-violet-100 text-violet-700 font-medium' : 'text-slate-700'">
                                                        <span x-text="ch.label"></span>
                                                        <template x-if="ch.recommended">
                                                            <span class="text-xs px-1.5 py-0.5 rounded bg-violet-100 text-violet-700">Recommended</span>
                                                        </template>
                                                    </button>
                                                </template>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <button @click="saveAp()" class="w-full px-4 py-2.5 text-sm font-medium text-white bg-violet-600 rounded-xl hover:bg-violet-700 transition-colors">
                                    Save AP Settings
                                </button>
                            </div>
                        </div>

                        <!-- AP 상태 카드 -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                            <div class="px-4 py-3 border-b border-slate-100 bg-slate-50">
                                <div class="flex items-center gap-2">
                                    <div class="w-7 h-7 bg-violet-100 rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-violet-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M12 20h.01" />
                                            <path d="M2 8.82a15 15 0 0 1 20 0" />
                                            <path d="M5 12.859a10 10 0 0 1 14 0" />
                                            <path d="M8.5 16.429a5 5 0 0 1 7 0" />
                                        </svg>
                                    </div>
                                    <h3 class="font-semibold text-slate-900">AP Status</h3>
                                </div>
                            </div>
                            <div class="p-4 space-y-2">
                                <div class="flex justify-between items-center py-2 border-b border-slate-100">
                                    <span class="text-sm text-slate-600">State</span>
                                    <span class="text-sm font-medium px-2 py-0.5 rounded" :class="network.apEnabled ? 'bg-emerald-100 text-emerald-700' : 'bg-slate-200 text-slate-600'" x-text="network.apEnabled ? 'Enabled' : 'Disabled'"></span>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-slate-100">
                                    <span class="text-sm text-slate-600">SSID</span>
                                    <span class="text-sm font-mono text-slate-900" x-text="network.apSsid || '--'"></span>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-slate-100">
                                    <span class="text-sm text-slate-600">Channel</span>
                                    <span class="text-sm font-medium text-slate-900" x-text="network.apChannel || 1"></span>
                                </div>
                                <div class="flex justify-between items-center py-2">
                                    <span class="text-sm text-slate-600">IP Address</span>
                                    <span class="text-sm font-mono text-slate-900" x-text="network.apIp || '--'"></span>
                                </div>
                            </div>
                        </div>

                        <!-- WiFi 설정 카드 -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200">
                            <div class="px-4 py-3 border-b border-slate-100 bg-gradient-to-r from-blue-50 to-transparent">
                                <div class="flex items-center gap-2">
                                    <div class="w-7 h-7 bg-blue-100 rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M12 20h.01" />
                                            <path d="M2 8.82a15 15 0 0 1 20 0" />
                                            <path d="M5 12.859a10 10 0 0 1 14 0" />
                                            <path d="M8.5 16.429a5 5 0 0 1 7 0" />
                                        </svg>
                                    </div>
                                    <h3 class="font-semibold text-slate-900">WiFi Settings</h3>
                                </div>
                            </div>
                            <div class="p-4 space-y-4">
                                <div class="flex items-center justify-between py-2 px-3 bg-blue-50 rounded-lg">
                                    <label class="flex items-center gap-2 cursor-pointer">
                                        <input type="checkbox" x-model="form.wifi.enabled" class="w-4 h-4 text-blue-600 rounded focus:ring-blue-500 border-slate-300">
                                        <span class="text-sm font-medium text-slate-700">Enable WiFi</span>
                                    </label>
                                </div>
                                <div class="space-y-4" :class="!form.wifi.enabled ? 'opacity-50 pointer-events-none' : ''">
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">SSID</label>
                                        <input type="text" x-model="form.wifi.ssid" class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" placeholder="WiFi SSID">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Password</label>
                                        <input type="text" x-model="form.wifi.password" class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" placeholder="Password">
                                    </div>
                                </div>
                                <button @click="saveWifi()" class="w-full px-4 py-2.5 text-sm font-medium text-white bg-blue-600 rounded-xl hover:bg-blue-700 transition-colors">
                                    Save WiFi Settings
                                </button>
                            </div>
                        </div>

                        <!-- WiFi 상태 카드 -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                            <div class="px-4 py-3 border-b border-slate-100 bg-slate-50">
                                <div class="flex items-center gap-2">
                                    <div class="w-7 h-7 bg-blue-100 rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M12 20h.01" />
                                            <path d="M2 8.82a15 15 0 0 1 20 0" />
                                            <path d="M5 12.859a10 10 0 0 1 14 0" />
                                            <path d="M8.5 16.429a5 5 0 0 1 7 0" />
                                        </svg>
                                    </div>
                                    <h3 class="font-semibold text-slate-900">WiFi Status</h3>
                                </div>
                            </div>
                            <div class="p-4 space-y-2">
                                <div class="flex justify-between items-center py-2 border-b border-slate-100">
                                    <span class="text-sm text-slate-600">Connection</span>
                                    <span class="text-sm font-medium px-2 py-0.5 rounded" :class="network.wifiConnected ? 'bg-emerald-100 text-emerald-700' : 'bg-slate-200 text-slate-600'" x-text="network.wifiConnected ? 'Connected' : 'Disconnected'"></span>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-slate-100">
                                    <span class="text-sm text-slate-600">SSID</span>
                                    <span class="text-sm font-mono text-slate-900" x-text="network.wifiSsid || '--'"></span>
                                </div>
                                <div class="flex justify-between items-center py-2">
                                    <span class="text-sm text-slate-600">IP Address</span>
                                    <span class="text-sm font-mono text-slate-900" x-text="network.wifiIp || '--'"></span>
                                </div>
                            </div>
                        </div>

                        <!-- Ethernet 설정 카드 -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200">
                            <div class="px-4 py-3 border-b border-slate-100 bg-gradient-to-r from-emerald-50 to-transparent">
                                <div class="flex items-center gap-2">
                                    <div class="w-7 h-7 bg-emerald-100 rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="m15 20 3-3h2a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h2l3 3z" />
                                            <path d="M6 8v1" />
                                            <path d="M10 8v1" />
                                            <path d="M14 8v1" />
                                            <path d="M18 8v1" />
                                        </svg>
                                    </div>
                                    <h3 class="font-semibold text-slate-900">Ethernet Settings</h3>
                                </div>
                            </div>
                            <div class="p-4 space-y-4">
                                <div class="flex items-center justify-between py-2 px-3 bg-emerald-50 rounded-lg">
                                    <label class="flex items-center gap-2 cursor-pointer">
                                        <input type="checkbox" x-model="form.ethernet.enabled" class="w-4 h-4 text-emerald-600 rounded focus:ring-emerald-500 border-slate-300">
                                        <span class="text-sm font-medium text-slate-700">Enable Ethernet</span>
                                    </label>
                                </div>
                                <div class="space-y-4" :class="!form.ethernet.enabled ? 'opacity-50 pointer-events-none' : ''">
                                    <div class="flex items-center justify-between py-2">
                                        <span class="text-sm font-medium text-slate-700">DHCP</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" x-model="form.ethernet.dhcp" class="sr-only peer">
                                            <div class="w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-emerald-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-600"></div>
                                        </label>
                                    </div>
                                    <div class="space-y-3" :class="form.ethernet.dhcp ? 'opacity-50 pointer-events-none' : ''">
                                        <div>
                                            <label class="block text-sm font-medium text-slate-700 mb-1">IP Address</label>
                                            <input type="text" x-model="form.ethernet.ip" class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-sm" placeholder="192.168.1.100">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-slate-700 mb-1">Gateway</label>
                                            <input type="text" x-model="form.ethernet.gateway" class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-sm" placeholder="192.168.1.1">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-slate-700 mb-1">Subnet Mask</label>
                                            <input type="text" x-model="form.ethernet.netmask" class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-sm" placeholder="255.255.255.0">
                                        </div>
                                    </div>
                                </div>
                                <button @click="saveEthernet()" class="w-full px-4 py-2.5 text-sm font-medium text-white bg-emerald-600 rounded-xl hover:bg-emerald-700 transition-colors">
                                    Save Ethernet Settings
                                </button>
                            </div>
                        </div>

                        <!-- Ethernet 상태 카드 -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                            <div class="px-4 py-3 border-b border-slate-100 bg-slate-50">
                                <div class="flex items-center gap-2">
                                    <div class="w-7 h-7 bg-emerald-100 rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="m15 20 3-3h2a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h2l3 3z" />
                                            <path d="M6 8v1" />
                                            <path d="M10 8v1" />
                                            <path d="M14 8v1" />
                                            <path d="M18 8v1" />
                                        </svg>
                                    </div>
                                    <h3 class="font-semibold text-slate-900">Ethernet Status</h3>
                                </div>
                            </div>
                            <div class="p-4 space-y-2">
                                <div class="flex justify-between items-center py-2 border-b border-slate-100">
                                    <span class="text-sm text-slate-600">Hardware</span>
                                    <span class="text-sm font-medium px-2 py-0.5 rounded" :class="!network.ethEnabled ? 'bg-slate-200 text-slate-600' : network.ethDetected ? 'bg-emerald-100 text-emerald-700' : 'bg-amber-100 text-amber-700'" x-text="!network.ethEnabled ? 'Disabled' : network.ethDetected ? 'Device Detected' : 'Not Detected'"></span>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-slate-100">
                                    <span class="text-sm text-slate-600">Connection</span>
                                    <span class="text-sm font-medium px-2 py-0.5 rounded" :class="network.ethDetected && network.ethConnected ? 'bg-emerald-100 text-emerald-700' : 'bg-slate-200 text-slate-600'" x-text="network.ethDetected ? (network.ethConnected ? 'Connected' : 'No Link') : 'N/A'"></span>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-slate-100" x-show="network.ethDetected">
                                    <span class="text-sm text-slate-600">Mode</span>
                                    <span class="text-sm font-medium text-slate-900" x-text="form.ethernet.dhcp ? 'DHCP' : 'Static'"></span>
                                </div>
                                <div class="flex justify-between items-center py-2" x-show="network.ethDetected">
                                    <span class="text-sm text-slate-600">IP Address</span>
                                    <span class="text-sm font-mono text-slate-900" x-text="network.ethIp || '--'"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div x-show="currentView === 'switcher'" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 translate-y-2" x-transition:enter-end="opacity-100 translate-y-0" x-cloak>
                    <div class="mb-4">
                        <h2 class="text-lg md:text-xl font-semibold text-slate-900">Switcher Settings</h2>
                        <p class="text-xs md:text-sm text-slate-500 hidden sm:block">Configure video switcher connections</p>
                    </div>

                    <!-- Polling Delay Notice -->
                    <div class="mb-4 px-4 py-3 bg-blue-50 border border-blue-200 rounded-xl flex items-start gap-3"
                         x-transition:enter="transition ease-out duration-200"
                         x-transition:enter-start="opacity-0 translate-y-2"
                         x-transition:enter-end="opacity-100 translate-y-0">
                        <svg class="w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <div class="flex-1">
                            <p class="text-sm text-blue-800">
                                Settings changes reflect after up to <span class="font-bold" x-text="config.pollingInterval / 1000"></span>s.
                                <span class="text-blue-600">(Polling: <span x-text="config.pollingInterval"></span>ms)</span>
                            </p>
                            <p class="text-xs text-blue-600 mt-1">
                                For faster updates, adjust in <a href="#system" class="underline font-medium">System → Update Speed</a>.
                            </p>
                        </div>
                    </div>

                    <!-- Dual Mode Toggle -->
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-4 mb-4">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="font-semibold text-slate-900">Dual Mode</h3>
                                <p class="text-sm text-slate-500">Enable secondary switcher for expanded camera coverage</p>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" x-model="form.switcher.dualEnabled"
                                       class="sr-only peer" @change="onDualModeChange()">
                                <div class="w-11 h-6 bg-slate-200 rounded-full peer
                                            peer-checked:after:translate-x-full
                                            after:absolute after:top-[2px] after:left-[2px]
                                            after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all
                                            peer-checked:bg-blue-600 transition-all"></div>
                            </label>
                        </div>
                    </div>

                    <!-- Switcher Status Cards (2-Column) -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4 items-start">
                        <!-- Primary Status Card -->
                        <div class="bg-white rounded-xl shadow-sm border border-blue-200 overflow-hidden">
                            <div class="px-4 py-3 bg-blue-50 border-b border-blue-100">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center gap-2">
                                        <span class="w-3 h-3 rounded-full bg-blue-600"></span>
                                        <h3 class="font-semibold text-slate-900">Primary (S1)</h3>
                                    </div>
                                    <span class="text-xs px-2 py-1 rounded-full"
                                          :class="status.switcher.primary.connected
                                              ? 'bg-emerald-100 text-emerald-700'
                                              : 'bg-rose-100 text-rose-700'">
                                        <span x-text="status.switcher.primary.connected ? 'Connected' : 'Disconnected'"></span>
                                    </span>
                                </div>
                            </div>
                            <div class="p-4 space-y-3">
                                <div class="text-sm text-slate-600">
                                    <span class="font-medium">Type:</span>
                                    <span x-text="status.switcher.primary.type || '--'"></span>
                                </div>
                                <div class="text-sm text-slate-600">
                                    <span class="font-medium">IP:</span>
                                    <span class="font-mono" x-text="status.switcher.primary.ip || '--'"></span>
                                </div>
                                <div class="text-sm text-slate-600">
                                    <span class="font-medium">Port:</span>
                                    <span x-text="status.switcher.primary.port || '--'"></span>
                                </div>
                                <div class="text-sm text-slate-600">
                                    <span class="font-medium">Interface:</span>
                                    <span x-text="getInterfaceName(status.switcher.primary.interface)"></span>
                                </div>

                                <!-- Tally Status -->
                                <div class="flex gap-2">
                                    <div class="flex-1 p-2 bg-red-50 rounded-lg">
                                        <div class="text-xs text-red-600 font-medium mb-1">PGM</div>
                                        <div class="text-sm font-semibold text-red-700">
                                            <template x-if="status.switcher.primary.tally && status.switcher.primary.tally.pgm && status.switcher.primary.tally.pgm.length > 0">
                                                <span x-text="status.switcher.primary.tally.pgm.join(', ')"></span>
                                            </template>
                                            <template x-if="!status.switcher.primary.tally || !status.switcher.primary.tally.pgm || status.switcher.primary.tally.pgm.length === 0">
                                                <span class="text-red-400">-</span>
                                            </template>
                                        </div>
                                    </div>
                                    <div class="flex-1 p-2 bg-emerald-50 rounded-lg">
                                        <div class="text-xs text-emerald-600 font-medium mb-1">PVW</div>
                                        <div class="text-sm font-semibold text-emerald-700">
                                            <template x-if="status.switcher.primary.tally && status.switcher.primary.tally.pvw && status.switcher.primary.tally.pvw.length > 0">
                                                <span x-text="status.switcher.primary.tally.pvw.join(', ')"></span>
                                            </template>
                                            <template x-if="!status.switcher.primary.tally || !status.switcher.primary.tally.pvw || status.switcher.primary.tally.pvw.length === 0">
                                                <span class="text-emerald-400">-</span>
                                            </template>
                                        </div>
                                    </div>
                                </div>

                                <button @click="showPrimaryConfig = true"
                                        class="w-full px-4 py-2.5 text-sm font-medium text-blue-600
                                               border border-blue-200 rounded-xl hover:bg-blue-50">
                                    Configure
                                </button>
                            </div>
                        </div>

                        <!-- Secondary Status Card -->
                        <div class="bg-white rounded-xl shadow-sm border overflow-hidden"
                             :class="form.switcher.dualEnabled
                                 ? 'border-purple-200'
                                 : 'border-slate-200 opacity-60'">
                            <div class="px-4 py-3 border-b"
                                 :class="form.switcher.dualEnabled
                                     ? 'bg-purple-50 border-purple-100'
                                     : 'bg-slate-50 border-slate-100'">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center gap-2">
                                        <span class="w-3 h-3 rounded-full"
                                              :class="form.switcher.dualEnabled ? 'bg-purple-600' : 'bg-slate-400'"></span>
                                        <h3 class="font-semibold text-slate-900">Secondary (S2)</h3>
                                    </div>
                                    <span class="text-xs px-2 py-1 rounded-full"
                                          :class="status.switcher.secondary.connected
                                              ? 'bg-emerald-100 text-emerald-700'
                                              : 'bg-rose-100 text-rose-700'">
                                        <span x-text="status.switcher.secondary.connected ? 'Connected' : 'Disconnected'"></span>
                                    </span>
                                </div>
                            </div>
                            <div class="p-4 space-y-3">
                                <div class="text-sm text-slate-600">
                                    <span class="font-medium">Type:</span>
                                    <span x-text="status.switcher.secondary.type || '--'"></span>
                                </div>
                                <div class="text-sm text-slate-600">
                                    <span class="font-medium">IP:</span>
                                    <span class="font-mono" x-text="status.switcher.secondary.ip || '--'"></span>
                                </div>
                                <div class="text-sm text-slate-600">
                                    <span class="font-medium">Port:</span>
                                    <span x-text="status.switcher.secondary.port || '--'"></span>
                                </div>
                                <div class="text-sm text-slate-600">
                                    <span class="font-medium">Interface:</span>
                                    <span x-text="getInterfaceName(status.switcher.secondary.interface)"></span>
                                </div>

                                <!-- Tally Status -->
                                <div class="flex gap-2">
                                    <div class="flex-1 p-2 bg-red-50 rounded-lg">
                                        <div class="text-xs text-red-600 font-medium mb-1">PGM</div>
                                        <div class="text-sm font-semibold text-red-700">
                                            <template x-if="status.switcher.secondary.tally && status.switcher.secondary.tally.pgm && status.switcher.secondary.tally.pgm.length > 0">
                                                <span x-text="status.switcher.secondary.tally.pgm.join(', ')"></span>
                                            </template>
                                            <template x-if="!status.switcher.secondary.tally || !status.switcher.secondary.tally.pgm || status.switcher.secondary.tally.pgm.length === 0">
                                                <span class="text-red-400">-</span>
                                            </template>
                                        </div>
                                    </div>
                                    <div class="flex-1 p-2 bg-emerald-50 rounded-lg">
                                        <div class="text-xs text-emerald-600 font-medium mb-1">PVW</div>
                                        <div class="text-sm font-semibold text-emerald-700">
                                            <template x-if="status.switcher.secondary.tally && status.switcher.secondary.tally.pvw && status.switcher.secondary.tally.pvw.length > 0">
                                                <span x-text="status.switcher.secondary.tally.pvw.join(', ')"></span>
                                            </template>
                                            <template x-if="!status.switcher.secondary.tally || !status.switcher.secondary.tally.pvw || status.switcher.secondary.tally.pvw.length === 0">
                                                <span class="text-emerald-400">-</span>
                                            </template>
                                        </div>
                                    </div>
                                </div>

                                <button @click="form.switcher.dualEnabled && (showSecondaryConfig = true)"
                                        class="w-full px-4 py-2.5 text-sm font-medium rounded-xl"
                                        :class="form.switcher.dualEnabled
                                            ? 'text-purple-600 border border-purple-200 hover:bg-purple-50'
                                            : 'text-slate-400 border border-slate-200 cursor-not-allowed'"
                                        :disabled="!form.switcher.dualEnabled">
                                    Configure
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Camera Mapping Visualization -->
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-4 mb-4"
                         x-transition:enter="transition ease-out duration-200"
                         x-transition:enter-start="opacity-0 translate-y-2"
                         x-transition:enter-end="opacity-100 translate-y-0">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <h3 class="font-semibold text-slate-900">Camera Mapping</h3>
                                <p class="text-xs text-slate-500 mt-0.5">Click a number to set Secondary start position</p>
                            </div>
                            <div class="flex items-center gap-4 text-sm">
                                <div class="flex items-center gap-1.5">
                                    <span class="w-3 h-3 rounded bg-blue-500"></span>
                                    <span class="text-slate-600">Primary</span>
                                </div>
                                <div class="flex items-center gap-1.5">
                                    <span class="w-3 h-3 rounded bg-purple-500"></span>
                                    <span class="text-slate-600">Secondary</span>
                                </div>
                            </div>
                        </div>

                        <!-- Camera Buttons Grid -->
                        <div class="grid grid-cols-5 md:grid-cols-10 gap-2 mb-4">
                            <template x-for="i in 20" :key="i">
                                <button @click="selectOffset(i)"
                                        class="aspect-square rounded-lg font-medium text-xs transition-all flex flex-col items-center justify-center leading-tight"
                                        :class="getCameraButtonClass(i)"
                                        :disabled="!form.switcher.dualEnabled">
                                    <span x-text="getCameraLabel(i)"></span>
                                </button>
                            </template>
                        </div>

                        <!-- Offset Info & Save -->
                        <div class="flex items-center justify-between p-3 bg-slate-50 rounded-lg">
                            <div class="text-sm text-slate-600">
                                Secondary starts at camera
                                <span class="font-bold text-purple-600" x-text="form.mappingOffset"></span>
                            </div>
                            <button @click="saveMapping()"
                                    class="px-4 py-2.5 text-sm font-medium text-white
                                           bg-purple-600 rounded-xl hover:bg-purple-700">
                                Save Mapping
                            </button>
                        </div>
                    </div>
                </div>

                <div x-show="currentView === 'broadcast'" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 translate-y-2" x-transition:enter-end="opacity-100 translate-y-0" x-cloak>
                    <div class="mb-4">
                        <h2 class="text-lg md:text-xl font-semibold text-slate-900">Broadcast</h2>
                        <p class="text-xs md:text-sm text-slate-500 hidden sm:block">Configure wireless tally channel</p>
                    </div>

                    <div class="grid gap-4 lg:grid-cols-2 items-start">
                        <!-- Channel Scan Card -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                            <div class="px-4 py-3.5 md:px-5 md:py-4 border-b border-slate-100 bg-gradient-to-r from-amber-50 to-transparent">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-slate-900 text-base">Channel Scan</h3>
                                        <p class="text-xs text-slate-500">Find clear channels</p>
                                    </div>
                                </div>
                            </div>
                            <div class="p-4 space-y-4">
                                <!-- Current Frequency Gauge -->
                                <div class="flex items-center justify-between py-4 px-5 bg-slate-50 rounded-xl">
                                    <div class="flex-1 space-y-2">
                                        <div class="flex items-baseline gap-2">
                                            <span class="text-sm text-slate-500">Frequency</span>
                                            <span class="text-xl font-mono font-bold text-slate-900" x-text="Math.round(config.broadcast.rf.frequency) + ' MHz'"></span>
                                        </div>
                                        <div class="flex items-baseline gap-2">
                                            <span class="text-sm text-slate-500">Sync Word</span>
                                            <span class="text-xl font-mono font-bold text-blue-600">0x<span x-text="Number(config.broadcast.rf.syncWord).toString(16).toUpperCase().padStart(2, '0')"></span></span>
                                        </div>
                                    </div>
                                    <!-- Circular RSSI Gauge -->
                                    <div class="relative w-20 h-20">
                                        <svg class="w-full h-full transform -rotate-90" viewBox="0 0 36 36">
                                            <!-- Background circle -->
                                            <circle cx="18" cy="18" r="16" fill="none" stroke="#e2e8f0" stroke-width="3"/>
                                            <!-- RSSI Gauge circle -->
                                            <circle cx="18" cy="18" r="16" fill="none"
                                                    :stroke="getGaugeColor(channelScan.currentRssi)"
                                                    :stroke-dasharray="getGaugeCircumference(channelScan.currentRssi)"
                                                    stroke-width="3"
                                                    stroke-linecap="round"
                                                    class="transition-all duration-500"/>
                                        </svg>
                                        <div class="absolute inset-0 flex flex-col items-center justify-center">
                                            <span class="text-[10px] text-slate-400">RSSI</span>
                                            <span class="text-xs font-bold" :class="getGaugeTextColor(channelScan.currentRssi)" x-text="channelScan.currentRssi"></span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Scan Button -->
                                <button @click="startChannelScan()" :disabled="channelScan.scanning" class="w-full px-4 py-3 text-sm font-medium text-white bg-amber-600 rounded-xl hover:bg-amber-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                                    <span x-show="!channelScan.scanning">Start Scan (850-930 MHz)</span>
                                    <span x-show="channelScan.scanning">Scanning...</span>
                                </button>

                                <!-- Progress -->
                                <div x-show="channelScan.scanning || channelScan.progress > 0" class="space-y-2">
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-slate-600">Scanning...</span>
                                        <span class="font-medium text-slate-900" x-text="channelScan.progress + '%'"></span>
                                    </div>
                                    <div class="w-full bg-slate-200 rounded-full h-2">
                                        <div class="bg-amber-600 h-2 rounded-full transition-all duration-300" :style="'width: ' + channelScan.progress + '%'"></div>
                                    </div>
                                </div>

                                <!-- Recommendation (after scan) -->
                                <div x-show="channelScan.recommendation && !channelScan.scanning" class="p-3 rounded-lg text-sm" :class="{
                                    'bg-emerald-50 border border-emerald-200': channelScan.recommendation && channelScan.recommendation.type === 'good',
                                    'bg-amber-50 border border-amber-200': channelScan.recommendation && channelScan.recommendation.type === 'better',
                                    'bg-rose-50 border border-rose-200': channelScan.recommendation && channelScan.recommendation.type === 'change'
                                }">
                                    <template x-if="channelScan.recommendation">
                                        <div class="flex items-start gap-2">
                                            <span x-show="channelScan.recommendation.type === 'good'" class="text-emerald-600">✓</span>
                                            <span x-show="channelScan.recommendation.type === 'better'" class="text-amber-600">↑</span>
                                            <span x-show="channelScan.recommendation.type === 'change'" class="text-rose-600">⚠</span>
                                            <div>
                                                <p class="font-medium" x-text="channelScan.recommendation.title"></p>
                                                <p class="text-xs mt-1" x-show="channelScan.recommendation.message" x-text="channelScan.recommendation.message"></p>
                                                <button x-show="channelScan.recommendation.suggestedFreq"
                                                        @click="selectChannelFrequency(channelScan.recommendation.suggestedFreq); scrollToChannelSettings()"
                                                        class="mt-2 text-xs underline opacity-75 hover:opacity-100"
                                                        :class="{
                                                            'text-emerald-700': channelScan.recommendation.type === 'better',
                                                            'text-rose-700': channelScan.recommendation.type === 'change'
                                                        }">
                                                    Switch to <span x-text="channelScan.recommendation.suggestedFreq.toFixed(1) + ' MHz'"></span>
                                                </button>
                                            </div>
                                        </div>
                                    </template>
                                </div>
                            </div>
                        </div>

                        <!-- Scan Results Card -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden lg:row-span-2">
                            <div class="px-4 py-3.5 border-b border-slate-100 bg-gradient-to-r from-emerald-50 to-transparent">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-slate-900 text-base">Scan Results</h3>
                                        <p class="text-xs text-slate-500">RSSI levels by channel</p>
                                    </div>
                                    <span x-show="channelScan.results.length > 0" class="ml-auto text-xs text-slate-500" x-text="channelScan.results.length + ' channels'"></span>
                                </div>
                            </div>
                            <div class="p-4 min-h-[250px] lg:min-h-[400px] flex flex-col">
                                <!-- Empty State -->
                                <div x-show="channelScan.results.length === 0" class="flex-1 flex flex-col items-center justify-center text-slate-400 text-sm">
                                    <svg class="w-12 h-12 mb-2 text-slate-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                    </svg>
                                    <p>No scan results</p>
                                    <p class="text-xs">Click "Start Scan" to begin</p>
                                </div>

                                <!-- Gauge Results -->
                                <div x-show="channelScan.results.length > 0" class="flex-1 overflow-y-auto space-y-1.5 pr-1" style="max-height: 800px;">
                                    <template x-for="result in channelScan.results" :key="result.frequency">
                                        <div @click="selectChannelFrequency(result.frequency)" class="flex items-center gap-3 cursor-pointer hover:bg-slate-50 rounded-lg px-2 py-1.5 transition-colors">
                                            <!-- Frequency -->
                                            <div class="w-16 text-right text-sm font-mono text-slate-600" x-text="result.frequency.toFixed(1) + ' MHz'"></div>
                                            <!-- Gauge Bar -->
                                            <div class="flex-1 h-5 bg-slate-200 rounded-full overflow-hidden relative">
                                                <div class="h-full rounded-full transition-all duration-200"
                                                     :style="{
                                                         width: result.gaugePercent + '%',
                                                         backgroundColor: result.clearChannel ? '#22c55e' : '#ef4444'
                                                     }"></div>
                                                <!-- RSSI Value on Bar -->
                                                <div class="absolute inset-0 flex items-center justify-end pr-2">
                                                    <span class="text-xs font-medium text-slate-700" x-text="result.rssi + ' dBm'"></span>
                                                </div>
                                            </div>
                                            <!-- Status Badge -->
                                            <div class="w-16">
                                                <span class="text-xs px-2 py-0.5 rounded" :class="{
                                                    'bg-emerald-100 text-emerald-700': result.clearChannel,
                                                    'bg-rose-100 text-rose-700': !result.clearChannel
                                                }" x-text="result.clearChannel ? 'Clear' : 'Busy'"></span>
                                            </div>
                                        </div>
                                    </template>
                                </div>
                            </div>
                        </div>

                        <!-- Channel Settings Card -->
                        <div id="channel-settings" class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                            <div class="px-4 py-3.5 md:px-5 md:py-4 border-b border-slate-100 bg-gradient-to-r from-blue-50 to-transparent">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-slate-900 text-base">Channel Settings</h3>
                                        <p class="text-xs text-slate-500">Frequency & Sync Word</p>
                                    </div>
                                </div>
                            </div>
                            <div class="p-4 space-y-4">
                                <!-- Info Notice -->
                                <div class="p-3 bg-blue-50 border border-blue-200 rounded-lg text-xs text-blue-800">
                                    <p class="font-semibold mb-1">⚠️ Important</p>
                                    <p>• Frequency & Sync Word must match for TX/RX communication</p>
                                    <p>• Change frequency only when all RX devices are ON</p>
                                    <p>• Keep devices close during change (5-10 seconds)</p>
                                </div>

                                <!-- Frequency Slider -->
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-2">Frequency (MHz)</label>
                                    <input type="range" x-model="form.broadcast.frequency" min="850" max="930" step="1"
                                           @input="form.broadcast.frequency = Math.round(form.broadcast.frequency)"
                                           class="w-full h-2 bg-slate-200 rounded-full appearance-none cursor-pointer accent-blue-600">
                                    <div class="flex justify-between text-xs text-slate-500 mt-1">
                                        <template x-for="freq in [850, 860, 868, 870, 880, 900, 915, 925, 930]">
                                            <span :class="{'font-semibold text-blue-600': form.broadcast.frequency === freq}" x-text="freq"></span>
                                        </template>
                                    </div>
                                    <div class="text-center mt-2">
                                        <span class="text-lg font-mono font-semibold text-blue-600" x-text="Math.round(form.broadcast.frequency) + ' MHz'"></span>
                                    </div>
                                </div>

                                <!-- Sync Word Slider -->
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-2">Sync Word</label>
                                    <input type="range" x-model="form.broadcast.syncCode" min="1" max="150" step="1"
                                           class="w-full h-2 bg-slate-200 rounded-full appearance-none cursor-pointer accent-blue-600">
                                    <div class="flex justify-between text-xs text-slate-500 mt-1 font-mono">
                                        <span>0x01</span>
                                        <span>0x20</span>
                                        <span>0x40</span>
                                        <span>0x60</span>
                                        <span>0x80</span>
                                        <span>0x96</span>
                                    </div>
                                    <div class="text-center mt-2">
                                        <span class="text-sm font-mono text-slate-600">Value: </span>
                                        <span class="text-lg font-mono font-semibold text-blue-600">0x<span x-text="Number(form.broadcast.syncCode).toString(16).toUpperCase().padStart(2, '0')"></span></span>
                                    </div>
                                </div>

                                <!-- Save Button with Loading -->
                                <button @click="saveBroadcast()" :disabled="broadcast.saving"
                                        class="w-full px-4 py-2.5 text-sm font-medium text-white rounded-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                                        :class="broadcast.saving ? 'bg-blue-400' : 'bg-blue-600 hover:bg-blue-700'">
                                    <span x-show="!broadcast.saving">Save Channel Settings</span>
                                    <span x-show="broadcast.saving" class="flex items-center justify-center gap-2">
                                        <svg class="animate-spin h-4 w-4" fill="none" viewBox="0 0 24 24">
                                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                        </svg>
                                        Applying settings...
                                    </span>
                                </button>

                                <!-- Progress during save -->
                                <div x-show="broadcast.saving" class="text-center">
                                    <p class="text-xs text-slate-500">This may take 5-10 seconds</p>
                                    <p class="text-xs text-slate-400">Keep devices close and powered on</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

<!-- Devices Page -->
<div x-show="currentView === 'devices'" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 translate-y-2" x-transition:enter-end="opacity-100 translate-y-0" x-cloak>
    <div class="mb-4">
        <h2 class="text-lg md:text-xl font-semibold text-slate-900">Connected Devices</h2>
        <p class="text-xs md:text-sm text-slate-500 hidden sm:block">
            <span x-text="devices.onlineCount"></span> online / <span x-text="devices.registeredCount"></span> registered devices
        </p>
    </div>

    <!-- Status bar -->
    <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-4 mb-4">
        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
            <div class="flex items-center gap-4">
                <div class="flex items-center gap-2">
                    <span class="w-2 h-2 rounded-full" :class="devices.onlineCount > 0 ? 'bg-emerald-500' : 'bg-slate-300'"></span>
                    <span class="text-sm text-slate-600"><span class="font-medium" x-text="devices.onlineCount"></span> Online</span>
                </div>
                <div class="flex items-center gap-2">
                    <span class="w-2 h-2 rounded-full bg-slate-400"></span>
                    <span class="text-sm text-slate-600"><span class="font-medium" x-text="devices.list.filter(d => !d.is_online).length"></span> Offline</span>
                </div>
                <div class="w-px h-4 bg-slate-200"></div>
                <span class="text-xs text-slate-500">Total: <span class="font-medium" x-text="devices.list.length"></span> / <span class="font-medium" x-text="license.deviceLimit"></span> Limit</span>
            </div>
            <div class="flex items-center gap-2 flex-wrap sm:flex-nowrap">
                <!-- 상태 요청 버튼 -->
                <button @click="requestStatus()"
                        :disabled="statusControl.sending"
                        class="px-3 py-1.5 text-sm font-medium text-blue-700 bg-blue-100 hover:bg-blue-200 rounded-lg disabled:bg-blue-50 disabled:text-blue-400 disabled:cursor-not-allowed flex items-center gap-2"
                        title="Request Status (Broadcast)">
                    <svg class="w-4 h-4" :class="{ 'animate-pulse': statusControl.sending }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                    </svg>
                    <span x-text="statusControl.sending ? 'Sending...' : 'Status'"></span>
                </button>

                <!-- 전역 밝기 조절 버튼 -->
                <button @click="showBrightnessModal = true"
                        class="px-3 py-1.5 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg flex items-center gap-2">
                    <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                    </svg>
                    <span x-text="'Brightness: ' + globalBrightness.value + '%'"></span>
                </button>

                <!-- LED 색상 버튼 -->
                <button @click="showLedColorsModal = true"
                        class="px-3 py-1.5 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg flex items-center gap-2">
                    <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"></path>
                    </svg>
                    <span>LED Colors</span>
                </button>
            </div>
        </div>
    </div>

    <!-- 디바이스 그리드 -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 items-start" id="device-grid">
        <template x-for="device in devices.list" :key="device.id">
            <div class="bg-white rounded-2xl border overflow-hidden hover:shadow-lg hover:border-slate-300 transition-all duration-200"
                 :class="{
                     'border-slate-200': device.is_online,
                     'border-slate-200 opacity-60': !device.is_online
                 }">
                <!-- 디바이스 카드 헤더 - 상태 인디케이터 -->
                <div class="relative px-4 py-3"
                     :class="{
                         'bg-gradient-to-r from-slate-50 to-white': device.is_online,
                         'bg-slate-100': !device.is_online
                     }">
                    <!-- 연결 상태 인디케이터 (왼쪽 테두리) -->
                    <div class="absolute left-0 top-0 bottom-0 w-1"
                         :class="{
                             'bg-emerald-500': device.is_online && getSignalLevel(device.rssi, device.snr) === 3,
                             'bg-yellow-500': device.is_online && getSignalLevel(device.rssi, device.snr) === 2,
                             'bg-rose-500': device.is_online && getSignalLevel(device.rssi, device.snr) <= 1,
                             'bg-slate-300': !device.is_online
                         }"></div>

                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <!-- 디바이스 아이콘 -->
                            <div class="w-10 h-10 rounded-xl flex items-center justify-center relative"
                                 :class="{
                                     'bg-emerald-100': device.is_online && getSignalLevel(device.rssi, device.snr) === 3,
                                     'bg-yellow-100': device.is_online && getSignalLevel(device.rssi, device.snr) === 2,
                                     'bg-rose-100': device.is_online && getSignalLevel(device.rssi, device.snr) <= 1,
                                     'bg-slate-200': !device.is_online
                                 }">
                                <svg class="w-5 h-5"
                                     :class="{
                                         'text-emerald-600': device.is_online && getSignalLevel(device.rssi, device.snr) === 3,
                                         'text-yellow-600': device.is_online && getSignalLevel(device.rssi, device.snr) === 2,
                                         'text-rose-600': device.is_online && getSignalLevel(device.rssi, device.snr) <= 1,
                                         'text-slate-400': !device.is_online
                                     }"
                                     fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"></path>
                                </svg>
                                <!-- 오프라인 배지 -->
                                <div x-show="!device.is_online" x-cloak
                                     class="absolute -top-1 -right-1 w-3 h-3 bg-slate-400 rounded-full border-2 border-white"></div>
                            </div>
                            <div>
                                <p class="font-bold text-slate-900" x-text="device.id"></p>
                                <div class="flex items-center gap-1.5">
                                    <span class="text-xs text-slate-500">Camera</span>
                                    <span class="px-1.5 py-0.5 text-xs font-bold rounded-md bg-blue-100 text-blue-700" x-text="device.cameraId"></span>
                                    <!-- 온라인 상태 배지 -->
                                    <span class="px-1.5 py-0.5 text-xs font-medium rounded-md"
                                          :class="{
                                              'bg-emerald-100 text-emerald-700': device.is_online,
                                              'bg-slate-200 text-slate-500': !device.is_online
                                          }"
                                          x-text="device.is_online ? 'Online' : 'Offline'"></span>
                                </div>
                            </div>
                        </div>
                        <!-- Ping 수치 + 버튼 -->
                        <div class="text-right">
                            <template x-if="device.is_online">
                                <div class="flex items-center gap-2">
                                    <p class="text-xs font-medium" :class="{
                                        'text-emerald-600': device.ping < 200,
                                        'text-yellow-600': device.ping >= 200 && device.ping < 500,
                                        'text-rose-600': device.ping >= 500
                                    }" x-text="device.ping + ' ms'"></p>
                                    <button @click="pingDevice(device.id)"
                                            :disabled="pingControl.sending === device.id"
                                            class="p-1 rounded hover:bg-slate-100 disabled:opacity-50"
                                            :title="'PING ' + device.id">
                                        <svg class="w-3.5 h-3.5 text-slate-500" :class="{
                                            'animate-spin': pingControl.sending === device.id
                                        }" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                        </svg>
                                    </button>
                                </div>
                            </template>
                            <template x-if="!device.is_online">
                                <p class="text-xs font-medium text-slate-400">--</p>
                            </template>
                            <p class="text-xs text-slate-400">Latency</p>
                        </div>
                    </div>
                </div>

                <!-- 디바이스 카드 내용 -->
                <div class="p-4 space-y-4">
                    <!-- 배터리 - 크게 강조 -->
                    <div>
                        <div class="flex items-center justify-between mb-2">
                            <div class="flex items-center gap-1.5">
                                <svg class="w-4 h-4" :class="{
                                    'text-emerald-500': device.battery > 50,
                                    'text-yellow-500': device.battery > 20 && device.battery <= 50,
                                    'text-rose-500': device.battery <= 20
                                }" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="2" y="6" width="16" height="12" rx="2" />
                                    <path d="M22 14v-4" />
                                </svg>
                                <span class="text-xs font-medium text-slate-600">Battery</span>
                            </div>
                            <span class="text-sm font-bold" :class="{
                                'text-emerald-600': device.battery > 50,
                                'text-yellow-600': device.battery > 20 && device.battery <= 50,
                                'text-rose-600': device.battery <= 20
                            }" x-text="device.battery + '%'"></span>
                        </div>
                        <div class="h-2 bg-slate-100 rounded-full overflow-hidden">
                            <div class="h-full rounded-full transition-all duration-500"
                                 :class="{
                                     'bg-gradient-to-r from-emerald-400 to-emerald-600': device.battery > 50,
                                     'bg-gradient-to-r from-yellow-400 to-yellow-600': device.battery > 20 && device.battery <= 50,
                                     'bg-gradient-to-r from-rose-400 to-rose-600': device.battery <= 20
                                 }"
                                 :style="`width: ${device.battery}%`"></div>
                        </div>
                    </div>

                    <!-- 상태 메트릭스 3열 -->
                    <div class="grid grid-cols-3 gap-3">
                        <!-- 주파수 -->
                        <div class="text-center p-2 rounded-xl bg-slate-50">
                            <p class="text-sm font-bold text-slate-700" x-text="device.frequency"></p>
                            <p class="text-xs text-slate-500">MHz</p>
                        </div>

                        <!-- Sync Word -->
                        <div class="text-center p-2 rounded-xl bg-slate-50">
                            <p class="text-sm font-bold text-slate-700" x-text="'0x' + device.syncWord.toString(16).toUpperCase()"></p>
                            <p class="text-xs text-slate-500">Sync</p>
                        </div>

                        <!-- 신호 강도 -->
                        <div class="text-center p-2 rounded-xl bg-slate-50">
                            <p class="text-sm font-bold" :class="{
                                'text-emerald-600': getSignalLevel(device.rssi, device.snr) === 3,
                                'text-yellow-600': getSignalLevel(device.rssi, device.snr) === 2,
                                'text-rose-600': getSignalLevel(device.rssi, device.snr) <= 1
                            }" x-text="getSignalText(device.rssi, device.snr)"></p>
                            <p class="text-xs text-slate-500">Signal</p>
                        </div>
                    </div>

                    <!-- 하단 정보: 업타임 + 밝기 -->
                    <div class="flex items-center justify-between pt-2 border-t border-slate-100">
                        <div class="flex items-center gap-1.5">
                            <svg class="w-3.5 h-3.5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <path d="M12 6v6l4 2"></path>
                            </svg>
                            <span class="text-xs text-slate-500" x-text="formatUptime(device.uptime)"></span>
                        </div>
                        <div class="flex items-center gap-2">
                            <svg class="w-3.5 h-3.5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="4"></circle>
                                <path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"></path>
                            </svg>
                            <span class="text-xs font-medium text-slate-600" x-text="device.brightness + '%'"></span>
                        </div>
                    </div>

                    <!-- 밝기 제어 (온라인 디바이스만) -->
                    <div x-show="device.is_online" class="pt-3 border-t border-slate-100">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-xs font-medium text-slate-600">Brightness</span>
                            <span class="text-xs font-bold text-slate-700" x-text="(brightnessControl[device.id] ?? device.brightness) + '%'"></span>
                        </div>
                        <input type="range"
                               min="0" max="100"
                               :value="brightnessControl[device.id] || device.brightness"
                               @input="brightnessControl[device.id] = $event.target.value"
                               @change="setDeviceBrightness(device.id, $event.target.value)"
                               :disabled="brightnessControl.sending === device.id"
                               class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-rose-500 disabled:opacity-50 disabled:cursor-not-allowed">
                    </div>

                    <!-- 카메라 ID 제어 (온라인 디바이스만) -->
                    <div x-show="device.is_online" class="pt-3 border-t border-slate-100">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-xs font-medium text-slate-600">Camera ID</span>
                            <span class="text-xs font-bold text-slate-700" x-text="cameraIdControl[device.id] ?? device.cameraId"></span>
                        </div>
                        <div class="flex items-center gap-2">
                            <button @click="adjustCameraId(device.id, -1)"
                                    :disabled="cameraIdControl.sending === device.id"
                                    class="w-8 h-8 flex items-center justify-center rounded-lg bg-slate-100 hover:bg-slate-200 disabled:opacity-50 disabled:cursor-not-allowed text-slate-600 font-bold">
                                -
                            </button>
                            <input type="number"
                                   min="1" max="20"
                                   :value="cameraIdControl[device.id] || device.cameraId"
                                   @change="setDeviceCameraId(device.id, $event.target.value)"
                                   :disabled="cameraIdControl.sending === device.id"
                                   class="flex-1 text-center text-sm font-medium border border-slate-200 rounded-lg px-2 py-1.5 disabled:opacity-50">
                            <button @click="adjustCameraId(device.id, 1)"
                                    :disabled="cameraIdControl.sending === device.id"
                                    class="w-8 h-8 flex items-center justify-center rounded-lg bg-slate-100 hover:bg-slate-200 disabled:opacity-50 disabled:cursor-not-allowed text-slate-600 font-bold">
                                +
                            </button>
                        </div>
                    </div>

                    <!-- 기능 제어 버튼 (온라인/오프라인 모두) -->
                    <div class="pt-3 border-t border-slate-100">
                        <div class="flex items-center gap-2 flex-wrap">
                            <!-- 기능 정지 버튼 -->
                            <button @click="stopDevice(device.id)"
                                    :disabled="stopControl.sending === device.id"
                                    class="flex-1 px-3 py-2 text-xs font-medium rounded-lg border disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-1.5"
                                    :class="{
                                        'bg-amber-50 text-amber-700 border-amber-200 hover:bg-amber-100': !device.is_stopped,
                                        'bg-green-50 text-green-700 border-green-200 hover:bg-green-100': device.is_stopped
                                    }"
                                    :title="device.is_stopped ? 'Resume' : 'Stop'">
                                <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                    <path x-show="!device.is_stopped" stroke-linecap="round" stroke-linejoin="round" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    <path x-show="device.is_stopped" stroke-linecap="round" stroke-linejoin="round" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path>
                                    <path x-show="device.is_stopped" stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                <span x-text="device.is_stopped ? 'Resume' : 'Stop'"></span>
                            </button>
                            <!-- 재부팅 버튼 -->
                            <button @click="rebootDevice(device.id)"
                                    :disabled="rebootControl.sending === device.id"
                                    class="flex-1 px-3 py-2 text-xs font-medium text-rose-700 bg-rose-50 border border-rose-200 hover:bg-rose-100 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-1.5"
                                    title="Reboot">
                                <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                </svg>
                                <span>Reboot</span>
                            </button>
                            <!-- 삭제 버튼 -->
                            <button @click="deleteDevice(device.id)"
                                    :disabled="deleteControl.sending === device.id"
                                    class="px-3 py-2 text-xs font-medium text-slate-700 bg-slate-100 border border-slate-200 hover:bg-slate-200 hover:text-red-600 hover:border-red-200 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-1.5"
                                    title="Delete">
                                <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                </svg>
                                <span class="hidden sm:inline">Delete</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </template>
    </div>

    <!-- 디바이스 없음 -->
    <div x-show="devices.list.length === 0 && !devices.loading"
         class="text-center py-16 bg-white rounded-xl border border-slate-200">
        <div class="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4">
            <svg class="w-8 h-8 text-slate-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"></path>
            </svg>
        </div>
        <p class="text-slate-600 font-medium">No devices connected</p>
        <p class="text-sm text-slate-400 mt-1">Devices will appear here when they come online</p>
    </div>

    <!-- 전역 밝기 조절 모달 -->
    <div x-show="showBrightnessModal" x-cloak
         class="fixed inset-0 z-50 flex items-center justify-center bg-black/50"
         x-transition:enter="transition ease-out duration-200"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100">
        <div class="bg-white rounded-xl shadow-xl w-full max-w-md mx-4"
             x-transition:enter="transition ease-out duration-200"
             x-transition:enter-start="opacity-0 scale-95"
             x-transition:enter-end="opacity-100 scale-100">
            <div class="px-4 py-3 bg-amber-50 border-b border-amber-100 flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center">
                        <svg class="w-4 h-4 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                        </svg>
                    </div>
                    <h3 class="font-semibold text-slate-900">Global Brightness</h3>
                </div>
                <button @click="showBrightnessModal = false" class="text-slate-400 hover:text-slate-600">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div class="p-4 space-y-4">
                <div>
                    <div class="flex items-center justify-between mb-2">
                        <label class="text-sm font-medium text-slate-700">Brightness Level</label>
                        <span class="text-sm font-bold text-amber-600" x-text="globalBrightness.value + '%'"></span>
                    </div>
                    <input type="range"
                           x-model="globalBrightness.value"
                           @change="setGlobalBrightness(globalBrightness.value)"
                           :disabled="globalBrightness.sending"
                           min="0" max="100"
                           class="w-full h-2 bg-slate-200 rounded-full appearance-none cursor-pointer accent-amber-600 disabled:opacity-50 disabled:cursor-not-allowed">
                </div>
                <div class="flex gap-2">
                    <button @click="setGlobalBrightness(25)"
                            :disabled="globalBrightness.sending"
                            class="flex-1 px-3 py-2 text-sm font-medium text-slate-600 bg-slate-100 hover:bg-slate-200 rounded-lg disabled:opacity-50">
                        25%
                    </button>
                    <button @click="setGlobalBrightness(50)"
                            :disabled="globalBrightness.sending"
                            class="flex-1 px-3 py-2 text-sm font-medium text-slate-600 bg-slate-100 hover:bg-slate-200 rounded-lg disabled:opacity-50">
                        50%
                    </button>
                    <button @click="setGlobalBrightness(75)"
                            :disabled="globalBrightness.sending"
                            class="flex-1 px-3 py-2 text-sm font-medium text-slate-600 bg-slate-100 hover:bg-slate-200 rounded-lg disabled:opacity-50">
                        75%
                    </button>
                    <button @click="setGlobalBrightness(100)"
                            :disabled="globalBrightness.sending"
                            class="flex-1 px-3 py-2 text-sm font-medium text-slate-600 bg-slate-100 hover:bg-slate-200 rounded-lg disabled:opacity-50">
                        100%
                    </button>
                </div>
                <div class="pt-2 border-t border-slate-100">
                    <button @click="showBrightnessModal = false"
                            class="w-full px-4 py-2 text-sm font-medium text-white bg-amber-600 hover:bg-amber-700 rounded-lg">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- LED 색상 모달 -->
    <div x-show="showLedColorsModal" x-cloak
         class="fixed inset-0 z-50 flex items-center justify-center bg-black/50"
         x-transition:enter="transition ease-out duration-200"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100"
         x-init="showLedColorsModal && loadLedColors()">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-sm mx-4 overflow-hidden"
             x-transition:enter="transition ease-out duration-200"
             x-transition:enter-start="opacity-0 scale-95"
             x-transition:enter-end="opacity-100 scale-100">
            <!-- 헤더 -->
            <div class="px-5 py-4 bg-gradient-to-r from-cyan-500 to-cyan-600 flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center">
                        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"></path>
                        </svg>
                    </div>
                    <div>
                        <h3 class="font-bold text-white text-lg">LED Color Presets</h3>
                        <p class="text-xs text-cyan-100">Choose color scheme</p>
                    </div>
                </div>
                <button @click="showLedColorsModal = false" class="text-white/70 hover:text-white transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- 프리셋 -->
            <div class="p-4 space-y-3">
                <p class="text-xs font-medium text-slate-500 uppercase tracking-wide">Color Presets</p>
                <!-- Black OFF: Red / Green / Black (Default) -->
                <button @click="applyLedPreset(255,0,0, 0,255,0, 0,0,0)"
                        class="w-full p-4 rounded-xl border-2 transition-all duration-200 hover:shadow-lg group"
                        :class="isLedPresetActive(255,0,0, 0,255,0, 0,0,0) ? 'border-cyan-500 bg-cyan-50' : 'border-slate-200 hover:border-cyan-300 bg-white'">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-4">
                            <div class="flex gap-2">
                                <div class="w-12 h-12 rounded-xl shadow-inner" style="background-color: rgb(255,0,0)"></div>
                                <div class="w-12 h-12 rounded-xl shadow-inner" style="background-color: rgb(0,255,0)"></div>
                                <div class="w-12 h-12 rounded-xl shadow-inner border border-slate-300" style="background-color: rgb(0,0,0)"></div>
                            </div>
                            <div class="text-left">
                                <p class="font-bold text-slate-900 text-lg">Black OFF</p>
                                <p class="text-sm text-slate-500">Red / Green / Black (Default)</p>
                            </div>
                        </div>
                        <div class="w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all"
                             :class="isLedPresetActive(255,0,0, 0,255,0, 0,0,0) ? 'border-cyan-500 bg-cyan-500' : 'border-slate-300'">
                            <svg x-show="isLedPresetActive(255,0,0, 0,255,0, 0,0,0)" class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path>
                            </svg>
                        </div>
                    </div>
                </button>

                <!-- Blue OFF: Red / Green / Blue -->
                <button @click="applyLedPreset(255,0,0, 0,255,0, 4,51,255)"
                        class="w-full p-4 rounded-xl border-2 transition-all duration-200 hover:shadow-lg group"
                        :class="isLedPresetActive(255,0,0, 0,255,0, 4,51,255) ? 'border-cyan-500 bg-cyan-50' : 'border-slate-200 hover:border-cyan-300 bg-white'">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-4">
                            <div class="flex gap-2">
                                <div class="w-12 h-12 rounded-xl shadow-inner" style="background-color: rgb(255,0,0)"></div>
                                <div class="w-12 h-12 rounded-xl shadow-inner" style="background-color: rgb(0,255,0)"></div>
                                <div class="w-12 h-12 rounded-xl shadow-inner border border-slate-300" style="background-color: rgb(4,51,255)"></div>
                            </div>
                            <div class="text-left">
                                <p class="font-bold text-slate-900 text-lg">Blue OFF</p>
                                <p class="text-sm text-slate-500">Red / Green / Blue (#0433ff)</p>
                            </div>
                        </div>
                        <div class="w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all"
                             :class="isLedPresetActive(255,0,0, 0,255,0, 4,51,255) ? 'border-cyan-500 bg-cyan-500' : 'border-slate-300'">
                            <svg x-show="isLedPresetActive(255,0,0, 0,255,0, 4,51,255)" class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>

            <!-- 하단 버튼 -->
            <div class="px-4 py-3 bg-slate-50 border-t border-slate-200">
                <button @click="saveLedColors(); showLedColorsModal = false"
                        :disabled="ledColors.saving"
                        class="w-full py-3 text-sm font-semibold text-white bg-gradient-to-r from-cyan-500 to-cyan-600 hover:from-cyan-600 hover:to-cyan-700 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg shadow-cyan-500/30 flex items-center justify-center gap-2">
                    <svg x-show="!ledColors.saving" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                    <svg x-show="ledColors.saving" class="w-5 h-5 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                    </svg>
                    <span x-show="!ledColors.saving">Apply & Broadcast</span>
                    <span x-show="ledColors.saving">Applying...</span>
                </button>
            </div>
        </div>
    </div>
</div>

                <div x-show="currentView === 'system'" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 translate-y-2" x-transition:enter-end="opacity-100 translate-y-0" x-cloak>
                    <div class="mb-4">
                        <h2 class="text-lg md:text-xl font-semibold text-slate-900">System Settings</h2>
                        <p class="text-xs md:text-sm text-slate-500 hidden sm:block">Configure system settings</p>
                    </div>

                    <!-- 카드 그리드 -->
                    <div class="columns-1 md:columns-2 gap-4">
                        <!-- System Actions -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden break-inside-avoid mb-4 inline-block w-full">
                            <div class="px-3 py-2.5 border-b border-slate-100 bg-gradient-to-r from-rose-50 to-transparent">
                                <div class="flex items-center gap-2">
                                    <div class="w-7 h-7 bg-rose-100 rounded-lg flex items-center justify-center">
                                        <svg class="w-3.5 h-3.5 text-rose-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-slate-900 text-sm">System Actions</h3>
                                    </div>
                                </div>
                            </div>
                            <div class="p-3">
                                <div class="grid grid-cols-2 gap-2">
                                    <!-- TX 재부팅 -->
                                    <button @click="rebootTx()" class="px-3 py-2 text-xs font-medium text-amber-700 bg-amber-50 border border-amber-200 rounded-lg hover:bg-amber-100 transition-colors flex items-center justify-center gap-1.5">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                        </svg>
                                        <span>Reboot TX</span>
                                    </button>
                                    <!-- 전체 재부팅 -->
                                    <button @click="rebootAll()" class="px-3 py-2 text-xs font-medium text-rose-700 bg-rose-50 border border-rose-200 rounded-lg hover:bg-rose-100 transition-colors flex items-center justify-center gap-1.5">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                        <span>Reboot All</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <!-- Tally Test Mode -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden break-inside-avoid mb-4 inline-block w-full">
                            <div class="px-4 py-3.5 border-b border-slate-100 bg-gradient-to-r from-purple-50 to-transparent flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-slate-900 text-base">Tally Test Mode</h3>
                                        <p class="text-xs text-slate-500">Auto cycle PGM/PVW</p>
                                    </div>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span x-show="testMode.running" class="inline-flex items-center gap-1.5 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700">
                                        <span class="w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"></span>
                                        Running
                                    </span>
                                    <span x-show="!testMode.running" class="inline-flex items-center gap-1.5 px-2 py-1 rounded-full text-xs font-medium bg-slate-100 text-slate-600">
                                        Stopped
                                    </span>
                                </div>
                            </div>
                            <div class="p-4 space-y-4">
                                <!-- Max Channels -->
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Max Channels</label>
                                    <input type="number" min="1" max="20" x-model="testMode.maxChannels"
                                           :disabled="testMode.running"
                                           class="w-full px-3 py-2 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 disabled:bg-slate-100 disabled:opacity-50">
                                    <p class="text-xs text-slate-400 mt-1">Number of channels to cycle (1-20)</p>
                                </div>

                                <!-- Interval -->
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Interval: <span x-text="testMode.interval"></span>ms</label>
                                    <input type="range" min="100" max="3000" step="100" x-model="testMode.interval"
                                           :disabled="testMode.running"
                                           class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-purple-500 disabled:opacity-50">
                                    <div class="flex justify-between text-xs text-slate-400 mt-1">
                                        <span>100ms</span>
                                        <span>3000ms</span>
                                    </div>
                                </div>

                                <!-- Pattern Preview -->
                                <div class="p-3 bg-slate-50 rounded-lg">
                                    <p class="text-xs font-medium text-slate-600 mb-2">Pattern (Max Channels = <span x-text="testMode.maxChannels"></span>):</p>
                                    <div class="space-y-1 text-xs font-mono text-slate-500">
                                        <template x-for="i in Math.min(4, testMode.maxChannels)" :key="i">
                                            <div>Step <span x-text="i"></span>: PGM<span x-text="i"></span> PVW<span x-text="i % testMode.maxChannels + 1"></span></div>
                                        </template>
                                    </div>
                                </div>

                                <!-- Control Buttons -->
                                <div class="flex gap-2">
                                    <button x-show="!testMode.running" @click="startTestMode()"
                                            class="flex-1 px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-lg hover:bg-purple-700 transition-colors">
                                        Start Test
                                    </button>
                                    <button x-show="testMode.running" @click="stopTestMode()"
                                            class="flex-1 px-4 py-2 text-sm font-medium text-white bg-rose-600 rounded-lg hover:bg-rose-700 transition-colors">
                                        Stop Test
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- UI Polling Speed -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden break-inside-avoid mb-4 inline-block w-full">
                            <div class="px-4 py-3.5 border-b border-slate-100 bg-gradient-to-r from-emerald-50 to-transparent">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-slate-900 text-base">Update Speed</h3>
                                        <p class="text-xs text-slate-500">Status polling interval</p>
                                    </div>
                                </div>
                            </div>
                            <div class="p-4">
                                <div class="grid grid-cols-4 gap-2">
                                    <button @click="setPollingInterval(500)"
                                            :class="config.pollingInterval === 500 ? 'bg-emerald-600 text-white border-emerald-600' : 'bg-white text-slate-700 border-slate-300 hover:bg-slate-50'"
                                            class="px-3 py-2 text-sm font-medium border rounded-lg transition-colors">
                                        <div class="text-center">
                                            <div class="font-semibold">Fast</div>
                                            <div class="text-xs opacity-70">0.5s</div>
                                        </div>
                                    </button>
                                    <button @click="setPollingInterval(1000)"
                                            :class="config.pollingInterval === 1000 ? 'bg-emerald-600 text-white border-emerald-600' : 'bg-white text-slate-700 border-slate-300 hover:bg-slate-50'"
                                            class="px-3 py-2 text-sm font-medium border rounded-lg transition-colors">
                                        <div class="text-center">
                                            <div class="font-semibold">Normal</div>
                                            <div class="text-xs opacity-70">1s</div>
                                        </div>
                                    </button>
                                    <button @click="setPollingInterval(2000)"
                                            :class="config.pollingInterval === 2000 ? 'bg-emerald-600 text-white border-emerald-600' : 'bg-white text-slate-700 border-slate-300 hover:bg-slate-50'"
                                            class="px-3 py-2 text-sm font-medium border rounded-lg transition-colors">
                                        <div class="text-center">
                                            <div class="font-semibold">Slow</div>
                                            <div class="text-xs opacity-70">2s</div>
                                        </div>
                                    </button>
                                    <button @click="setPollingInterval(5000)"
                                            :class="config.pollingInterval === 5000 ? 'bg-emerald-600 text-white border-emerald-600' : 'bg-white text-slate-700 border-slate-300 hover:bg-slate-50'"
                                            class="px-3 py-2 text-sm font-medium border rounded-lg transition-colors">
                                        <div class="text-center">
                                            <div class="font-semibold">Eco</div>
                                            <div class="text-xs opacity-70">5s</div>
                                        </div>
                                    </button>
                                </div>
                                <p class="text-xs text-slate-400 mt-2 text-center">
                                    Current: <span x-text="config.pollingInterval"></span>ms
                                    <span x-show="config.pollingInterval <= 1000" class="text-amber-600 ml-1">(Higher network usage)</span>
                                </p>
                            </div>
                        </div>

                        <!-- Notices -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden break-inside-avoid mb-4 inline-block w-full">
                            <div class="px-4 py-3.5 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-transparent flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-slate-900 text-base">Notices</h3>
                                        <p class="text-xs text-slate-500">Latest updates</p>
                                    </div>
                                </div>
                                <button @click="fetchNotices()" :disabled="notices.loading" class="p-1.5 hover:bg-indigo-100 rounded-lg disabled:opacity-50" title="Refresh">
                                    <svg class="w-4 h-4 text-indigo-500" :class="{ 'animate-spin': notices.loading }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                    </svg>
                                </button>
                            </div>
                            <div class="p-4 max-h-64 overflow-auto">
                                <!-- 로딩 -->
                                <div x-show="notices.loading" class="flex items-center justify-center py-8">
                                    <svg class="w-6 h-6 text-indigo-400 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                    </svg>
                                </div>
                                <!-- 공지사항 목록 -->
                                <template x-for="notice in notices.list" :key="notice.id">
                                    <div @click="openNoticeModal(notice)" class="mb-3 last:mb-0 p-3 rounded-lg border cursor-pointer hover:shadow-sm transition-shadow" :class="{
                                        'border-rose-200 bg-rose-50': notice.priority === 1,
                                        'border-amber-200 bg-amber-50': notice.priority === 2,
                                        'border-slate-200 bg-slate-50': notice.priority === 0
                                    }">
                                        <div class="flex items-start justify-between gap-2">
                                            <h4 class="font-semibold text-sm text-slate-900" x-text="notice.title"></h4>
                                            <span class="text-xs text-slate-400 whitespace-nowrap" x-text="formatDate(notice.created_at)"></span>
                                        </div>
                                        <p class="text-xs text-slate-600 mt-1 truncate" x-text="notice.content"></p>
                                        <p class="text-xs text-indigo-500 mt-1">Click to view more</p>
                                    </div>
                                </template>
                                <!-- 공지사항 없음 -->
                                <div x-show="!notices.loading && notices.list.length === 0" class="text-center py-6 text-slate-400 text-sm">
                                    No notices
                                </div>
                                <!-- 에러 -->
                                <div x-show="notices.error" class="text-center py-6 text-rose-500 text-sm">
                                    <span x-text="notices.error"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Notice Modal -->
                <div x-show="noticeModal.show" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in duration-150" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" class="fixed inset-0 z-50 flex items-center justify-center p-4" x-cloak>
                    <div class="absolute inset-0 bg-black/50" @click="closeNoticeModal()"></div>
                    <div x-show="noticeModal.show" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 scale-95" x-transition:enter-end="opacity-100 scale-100" x-transition:leave="transition ease-in duration-150" x-transition:leave-start="opacity-100 scale-100" x-transition:leave-end="opacity-0 scale-95" class="relative bg-white rounded-xl shadow-xl max-w-md w-full max-h-[80vh] overflow-hidden flex flex-col">
                        <div class="px-4 py-3 border-b border-slate-100 flex items-center justify-between">
                            <h3 class="font-semibold text-slate-900" x-text="noticeModal.notice?.title || ''"></h3>
                            <button @click="closeNoticeModal()" class="p-1 hover:bg-slate-100 rounded-lg">
                                <svg class="w-5 h-5 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>
                        <div class="p-4 overflow-y-auto flex-1">
                            <div class="text-xs text-slate-500 mb-2" x-text="formatDate(noticeModal.notice?.created_at || '')"></div>
                            <p class="text-sm text-slate-700 whitespace-pre-wrap" x-text="noticeModal.notice?.content || ''"></p>
                        </div>
                        <div class="px-4 py-3 border-t border-slate-100 flex justify-end">
                            <button @click="closeNoticeModal()" class="px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 rounded-lg hover:bg-slate-200">
                                Close
                            </button>
                        </div>
                    </div>
                </div>

                <div x-show="currentView === 'license'" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 translate-y-2" x-transition:enter-end="opacity-100 translate-y-0" x-cloak>
                    <div class="mb-4">
                        <h2 class="text-lg md:text-xl font-semibold text-slate-900">License Management</h2>
                        <p class="text-xs md:text-sm text-slate-500 hidden sm:block">License verification and internet connection test</p>
                    </div>

                    <div class="grid gap-4 lg:grid-cols-2 items-start">
                        <!-- 1. License Status Card -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                            <div class="px-4 py-3 border-b border-slate-100 bg-gradient-to-r from-violet-50 to-transparent">
                                <div class="flex items-center gap-2">
                                    <div class="w-7 h-7 bg-violet-100 rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-violet-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                        </svg>
                                    </div>
                                    <h3 class="font-semibold text-slate-900">License Status</h3>
                                </div>
                            </div>
                            <div class="p-4 space-y-4">
                                <p class="text-sm text-slate-600">View current license information.</p>

                                <!-- Details -->
                                <div class="space-y-2">
                                    <div class="flex items-center justify-between py-2 px-3 rounded-lg bg-slate-50">
                                        <div class="flex items-center gap-2">
                                            <svg class="w-4 h-4 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"></path>
                                            </svg>
                                            <span class="text-sm text-slate-600">Device Limit</span>
                                        </div>
                                        <span class="text-sm font-semibold text-slate-900" x-text="license.deviceLimit + ' devices'"></span>
                                    </div>

                                    <div class="flex items-center justify-between py-2 px-3 rounded-lg bg-slate-50">
                                        <div class="flex items-center gap-2">
                                            <svg class="w-4 h-4 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                                            </svg>
                                            <span class="text-sm text-slate-600">License Key</span>
                                        </div>
                                        <span class="text-sm font-mono text-slate-900" x-text="license.key || 'Not registered'"></span>
                                    </div>

                                    <div class="flex items-center justify-between py-2 px-3 rounded-lg bg-slate-50">
                                        <div class="flex items-center gap-2">
                                            <svg class="w-4 h-4 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                            </svg>
                                            <span class="text-sm text-slate-600">State</span>
                                        </div>
                                        <span class="flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium"
                                              :class="getLicenseStatusClass()">
                                            <span class="w-1.5 h-1.5 rounded-full" :class="getLicenseIndicatorClass()"></span>
                                            <span x-text="getLicenseStatusText()"></span>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 2. Activate License Card -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                            <div class="px-4 py-3 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-transparent">
                                <div class="flex items-center gap-2">
                                    <div class="w-7 h-7 bg-indigo-100 rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"></path>
                                        </svg>
                                    </div>
                                    <h3 class="font-semibold text-slate-900">Activate License</h3>
                                </div>
                            </div>
                            <div class="p-4 space-y-4">
                                <p class="text-sm text-slate-600">Enter license key to activate the product.</p>

                                <div class="flex gap-3">
                                    <input type="text" x-model="licenseForm.key"
                                           class="flex-1 px-4 py-2.5 border border-slate-300 rounded-xl text-sm uppercase"
                                           placeholder="XXXX-XXXX-XXXX-XXXX"
                                           maxlength="19"
                                           @input="formatLicenseKey"
                                           @keyup.enter="validateLicense()">
                                    <button @click="validateLicense()"
                                            :disabled="license.loading || !licenseForm.key"
                                            class="px-6 py-2.5 text-sm font-medium text-white bg-indigo-600 rounded-xl hover:bg-indigo-700 disabled:bg-slate-300 disabled:cursor-not-allowed flex items-center gap-2">
                                        <svg x-show="license.loading" class="w-4 h-4 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                        </svg>
                                        <span x-text="license.loading ? 'Validating...' : 'Activate'"></span>
                                    </button>
                                </div>
                                <p class="text-xs text-slate-500">Contact administrator for license key.</p>
                            </div>
                        </div>

                        <!-- 3. Internet Connection Test Card -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                            <div class="px-4 py-3 border-b border-slate-100 bg-gradient-to-r from-cyan-50 to-transparent">
                                <div class="flex items-center gap-2">
                                    <div class="w-7 h-7 bg-cyan-100 rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-cyan-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"></path>
                                        </svg>
                                    </div>
                                    <h3 class="font-semibold text-slate-900">Internet Connection</h3>
                                </div>
                            </div>
                            <div class="p-4 space-y-4">
                                <p class="text-sm text-slate-600">Check external internet connection status.</p>

                                <!-- Test Results -->
                                <div class="space-y-2">
                                    <div class="flex items-center justify-between py-2 px-3 rounded-lg bg-slate-50">
                                        <div class="flex items-center gap-2">
                                            <svg class="w-4 h-4 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"></path>
                                            </svg>
                                            <span class="text-sm text-slate-600">DNS (8.8.8.8)</span>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <span x-show="internetTest.status === 'none'" class="text-xs text-slate-400">Not tested</span>
                                            <span x-show="internetTest.status === 'testing'" class="text-xs text-blue-600">Testing...</span>
                                            <span x-show="internetTest.status === 'success'" class="flex items-center gap-1 text-xs text-emerald-600 font-medium">
                                                <span class="w-1.5 h-1.5 rounded-full bg-emerald-500"></span>
                                                <span x-text="internetTest.ping + ' ms'"></span>
                                            </span>
                                            <span x-show="internetTest.status === 'fail'" class="flex items-center gap-1 text-xs text-rose-600 font-medium">
                                                <span class="w-1.5 h-1.5 rounded-full bg-rose-500"></span>
                                                Failed
                                            </span>
                                        </div>
                                    </div>

                                    <div class="flex items-center justify-between py-2 px-3 rounded-lg bg-slate-50">
                                        <div class="flex items-center gap-2">
                                            <svg class="w-4 h-4 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path>
                                            </svg>
                                            <span class="text-sm text-slate-600">License Server</span>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <span x-show="internetTest.serverStatus === 'none'" class="text-xs text-slate-400">Not tested</span>
                                            <span x-show="internetTest.serverStatus === 'testing'" class="text-xs text-blue-600">Testing...</span>
                                            <span x-show="internetTest.serverStatus === 'success'" class="flex items-center gap-1 text-xs text-emerald-600 font-medium">
                                                <span class="w-1.5 h-1.5 rounded-full bg-emerald-500"></span>
                                                Success
                                            </span>
                                            <span x-show="internetTest.serverStatus === 'fail'" class="flex items-center gap-1 text-xs text-rose-600 font-medium">
                                                <span class="w-1.5 h-1.5 rounded-full bg-rose-500"></span>
                                                Failed
                                            </span>
                                        </div>
                                    </div>
                                </div>

                                <button @click="testInternet()"
                                        :disabled="internetTest.testing"
                                        class="w-full px-4 py-2.5 text-sm font-medium text-white bg-cyan-600 rounded-xl hover:bg-cyan-700 transition-colors disabled:bg-slate-300 disabled:cursor-not-allowed flex items-center justify-center gap-2">
                                    <svg x-show="internetTest.testing" class="w-4 h-4 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                    </svg>
                                    <span x-text="internetTest.testing ? 'Testing...' : 'Connection Test'"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- Toast -->
        <div class="toast toast-end z-50" x-show="toastState.show" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="translate-x-full opacity-0" x-transition:enter-end="translate-x-0 opacity-100" x-transition:leave="transition ease-in duration-200" x-transition:leave-start="translate-x-0 opacity-100" x-transition:leave-end="translate-x-full opacity-0" x-cloak>
            <div class="toast-custom" :class="{
                'toast-info': toastState.type === 'alert-info',
                'toast-success': toastState.type === 'alert-success',
                'toast-error': toastState.type === 'alert-error',
                'toast-warning': toastState.type === 'alert-warning'
            }">
                <template x-if="toastState.type === 'alert-success'">
                    <svg class="w-5 h-5 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </template>
                <template x-if="toastState.type === 'alert-error'">
                    <svg class="w-5 h-5 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </template>
                <template x-if="toastState.type === 'alert-info'">
                    <svg class="w-5 h-5 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </template>
                <template x-if="toastState.type === 'alert-warning'">
                    <svg class="w-5 h-5 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                    </svg>
                </template>
                <span class="text-sm font-medium" x-text="toastState.message"></span>
            </div>
        </div>

        <!-- Primary Configuration Dialog -->
        <div x-show="showPrimaryConfig" x-cloak
             class="fixed inset-0 z-50 flex items-center justify-center bg-black/50"
             x-transition:enter="transition ease-out duration-200"
             x-transition:enter-start="opacity-0"
             x-transition:enter-end="opacity-100">
            <div class="bg-white rounded-xl shadow-xl w-full max-w-md mx-4"
                 x-transition:enter="transition ease-out duration-200"
                 x-transition:enter-start="opacity-0 scale-95"
                 x-transition:enter-end="opacity-100 scale-100">
                <div class="px-4 py-3 bg-blue-50 border-b border-blue-100 flex items-center justify-between">
                    <h3 class="font-semibold text-slate-900">Primary Switcher Configuration</h3>
                    <button @click="showPrimaryConfig = false" class="text-slate-400 hover:text-slate-600">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div class="p-4 space-y-4">
                    <!-- Type (Custom Dropdown) -->
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Type</label>
                        <div class="relative" x-data="{ open: false }">
                            <button @click="open = !open" @click.away="open = false"
                                    class="w-full px-3 py-2 border border-slate-300 rounded-lg text-left flex items-center justify-between bg-white">
                                <span x-text="getSwitcherTypeDisplayName(form.switcher.primary.type)"></span>
                                <svg class="w-4 h-4 text-slate-500" :class="{ 'rotate-180': open }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                            <div x-show="open" x-transition
                                 class="absolute z-10 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-40 overflow-auto">
                                <template x-for="opt in ['ATEM', 'vMix', 'OBS', 'OSEE']">
                                    <div @click="opt !== 'OBS' && opt !== 'OSEE' && (form.switcher.primary.type = opt, onSwitcherTypeChange('primary'), open = false)"
                                         class="px-3 py-2 text-sm"
                                         :class="{
                                             'bg-blue-100': form.switcher.primary.type === opt,
                                             'hover:bg-blue-50 cursor-pointer': opt !== 'OBS' && opt !== 'OSEE',
                                             'text-slate-400 cursor-not-allowed bg-slate-50': opt === 'OBS' || opt === 'OSEE'
                                         }"
                                         x-text="getSwitcherTypeDisplayName(opt)"></div>
                                </template>
                            </div>
                        </div>
                        <p class="text-xs text-slate-500 mt-1" x-text="getSwitcherTypeDesc(form.switcher.primary.type)"></p>
                    </div>

                    <!-- Network Interface (Custom Dropdown, ATEM only) -->
                    <div x-show="form.switcher.primary.type === 'ATEM'">
                        <label class="block text-sm font-medium text-slate-700 mb-1">Network Interface</label>
                        <div class="relative" x-data="{ open: false }">
                            <button @click="open = !open" @click.away="open = false"
                                    class="w-full px-3 py-2 border border-slate-300 rounded-lg text-left flex items-center justify-between bg-white">
                                <span x-text="getInterfaceName(form.switcher.primary.interface)"></span>
                                <svg class="w-4 h-4 text-slate-500" :class="{ 'rotate-180': open }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                            <div x-show="open" x-transition
                                 class="absolute z-10 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg">
                                <template x-for="opt in [{val:0,name:'Auto'}, {val:1,name:'Ethernet'}, {val:2,name:'WiFi'}]">
                                    <div @click="form.switcher.primary.interface = opt.val; open = false"
                                         class="px-3 py-2 hover:bg-blue-50 cursor-pointer text-sm"
                                         :class="{ 'bg-blue-100': form.switcher.primary.interface === opt.val }"
                                         x-text="opt.name"></div>
                                </template>
                            </div>
                        </div>
                    </div>

                    <!-- IP Address -->
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">IP Address</label>
                        <input type="text" x-model="form.switcher.primary.ip"
                               class="w-full px-3 py-2 border border-slate-300 rounded-lg"
                               placeholder="192.168.1.100">
                    </div>

                    <!-- Port -->
                    <div>
                        <div class="flex items-center justify-between mb-1">
                            <label class="block text-sm font-medium text-slate-700">Port</label>
                            <button @click="form.switcher.primary.portLocked = !form.switcher.primary.portLocked"
                                    class="text-slate-400 hover:text-slate-600 p-1"
                                    :title="form.switcher.primary.portLocked ? 'Click to unlock' : 'Click to lock'">
                                <!-- Locked -->
                                <svg x-show="form.switcher.primary.portLocked" class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                                </svg>
                                <!-- Unlocked -->
                                <svg x-show="!form.switcher.primary.portLocked" class="w-4 h-4 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"></path>
                                </svg>
                            </button>
                        </div>
                        <input type="number" x-model="form.switcher.primary.port"
                               :disabled="form.switcher.primary.portLocked"
                               class="w-full px-3 py-2 border border-slate-300 rounded-lg disabled:bg-slate-100 disabled:text-slate-500">
                        <p class="text-xs text-slate-500 mt-1">Default: <span x-text="getDefaultPort(form.switcher.primary.type)"></span></p>
                    </div>

                    <!-- Password (OBS only) -->
                    <div x-show="form.switcher.primary.type === 'OBS'">
                        <label class="block text-sm font-medium text-slate-700 mb-1">Password</label>
                        <input type="password" x-model="form.switcher.primary.password"
                               class="w-full px-3 py-2 border border-slate-300 rounded-lg"
                               placeholder="OBS WebSocket password (optional)">
                        <p class="text-xs text-slate-500 mt-1">Required if password is set in OBS</p>
                    </div>

                    <!-- Camera Limit (Number Input) -->
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Camera Limit</label>
                        <input type="number" x-model="form.switcher.primary.cameraLimit" min="0" max="20"
                               class="w-full px-3 py-2 border border-slate-300 rounded-lg">
                        <p class="text-xs text-slate-500 mt-1">Max 20 cameras (0 = disabled)</p>
                    </div>

                    <!-- Buttons -->
                    <div class="flex gap-2">
                        <button @click="showPrimaryConfig = false"
                                class="flex-1 px-4 py-2.5 text-sm font-medium text-slate-600
                                       border border-slate-300 rounded-xl hover:bg-slate-50">
                            Cancel
                        </button>
                        <button @click="savePrimarySwitcher()"
                                class="flex-1 px-4 py-2.5 text-sm font-medium text-white
                                       bg-blue-600 rounded-xl hover:bg-blue-700">
                            Save
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Secondary Configuration Dialog -->
        <div x-show="showSecondaryConfig" x-cloak
             class="fixed inset-0 z-50 flex items-center justify-center bg-black/50"
             x-transition:enter="transition ease-out duration-200"
             x-transition:enter-start="opacity-0"
             x-transition:enter-end="opacity-100">
            <div class="bg-white rounded-xl shadow-xl w-full max-w-md mx-4"
                 x-transition:enter="transition ease-out duration-200"
                 x-transition:enter-start="opacity-0 scale-95"
                 x-transition:enter-end="opacity-100 scale-100">
                <div class="px-4 py-3 bg-purple-50 border-b border-purple-100 flex items-center justify-between">
                    <h3 class="font-semibold text-slate-900">Secondary Switcher Configuration</h3>
                    <button @click="showSecondaryConfig = false" class="text-slate-400 hover:text-slate-600">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div class="p-4 space-y-4">
                    <!-- Type (Custom Dropdown) -->
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Type</label>
                        <div class="relative" x-data="{ open: false }">
                            <button @click="open = !open" @click.away="open = false"
                                    class="w-full px-3 py-2 border border-slate-300 rounded-lg text-left flex items-center justify-between bg-white">
                                <span x-text="getSwitcherTypeDisplayName(form.switcher.secondary.type)"></span>
                                <svg class="w-4 h-4 text-slate-500" :class="{ 'rotate-180': open }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                            <div x-show="open" x-transition
                                 class="absolute z-10 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-40 overflow-auto">
                                <template x-for="opt in ['ATEM', 'vMix', 'OBS', 'OSEE']">
                                    <div @click="opt !== 'OBS' && opt !== 'OSEE' && (form.switcher.secondary.type = opt, onSwitcherTypeChange('secondary'), open = false)"
                                         class="px-3 py-2 text-sm"
                                         :class="{
                                             'bg-purple-100': form.switcher.secondary.type === opt,
                                             'hover:bg-purple-50 cursor-pointer': opt !== 'OBS' && opt !== 'OSEE',
                                             'text-slate-400 cursor-not-allowed bg-slate-50': opt === 'OBS' || opt === 'OSEE'
                                         }"
                                         x-text="getSwitcherTypeDisplayName(opt)"></div>
                                </template>
                            </div>
                        </div>
                        <p class="text-xs text-slate-500 mt-1" x-text="getSwitcherTypeDesc(form.switcher.secondary.type)"></p>
                    </div>

                    <!-- Network Interface (Custom Dropdown, ATEM only) -->
                    <div x-show="form.switcher.secondary.type === 'ATEM'">
                        <label class="block text-sm font-medium text-slate-700 mb-1">Network Interface</label>
                        <div class="relative" x-data="{ open: false }">
                            <button @click="open = !open" @click.away="open = false"
                                    class="w-full px-3 py-2 border border-slate-300 rounded-lg text-left flex items-center justify-between bg-white">
                                <span x-text="getInterfaceName(form.switcher.secondary.interface)"></span>
                                <svg class="w-4 h-4 text-slate-500" :class="{ 'rotate-180': open }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                            <div x-show="open" x-transition
                                 class="absolute z-10 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg">
                                <template x-for="opt in [{val:0,name:'Auto'}, {val:1,name:'Ethernet'}, {val:2,name:'WiFi'}]">
                                    <div @click="form.switcher.secondary.interface = opt.val; open = false"
                                         class="px-3 py-2 hover:bg-purple-50 cursor-pointer text-sm"
                                         :class="{ 'bg-purple-100': form.switcher.secondary.interface === opt.val }"
                                         x-text="opt.name"></div>
                                </template>
                            </div>
                        </div>
                    </div>

                    <!-- IP Address -->
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">IP Address</label>
                        <input type="text" x-model="form.switcher.secondary.ip"
                               class="w-full px-3 py-2 border border-slate-300 rounded-lg"
                               placeholder="192.168.1.101">
                    </div>

                    <!-- Port -->
                    <div>
                        <div class="flex items-center justify-between mb-1">
                            <label class="block text-sm font-medium text-slate-700">Port</label>
                            <button @click="form.switcher.secondary.portLocked = !form.switcher.secondary.portLocked"
                                    class="text-slate-400 hover:text-slate-600 p-1"
                                    :title="form.switcher.secondary.portLocked ? 'Click to unlock' : 'Click to lock'">
                                <!-- Locked -->
                                <svg x-show="form.switcher.secondary.portLocked" class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                                </svg>
                                <!-- Unlocked -->
                                <svg x-show="!form.switcher.secondary.portLocked" class="w-4 h-4 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"></path>
                                </svg>
                            </button>
                        </div>
                        <input type="number" x-model="form.switcher.secondary.port"
                               :disabled="form.switcher.secondary.portLocked"
                               class="w-full px-3 py-2 border border-slate-300 rounded-lg disabled:bg-slate-100 disabled:text-slate-500">
                        <p class="text-xs text-slate-500 mt-1">Default: <span x-text="getDefaultPort(form.switcher.secondary.type)"></span></p>
                    </div>

                    <!-- Password (OBS only) -->
                    <div x-show="form.switcher.secondary.type === 'OBS'">
                        <label class="block text-sm font-medium text-slate-700 mb-1">Password</label>
                        <input type="password" x-model="form.switcher.secondary.password"
                               class="w-full px-3 py-2 border border-slate-300 rounded-lg"
                               placeholder="OBS WebSocket password (optional)">
                        <p class="text-xs text-slate-500 mt-1">Required if password is set in OBS</p>
                    </div>

                    <!-- Camera Limit (Number Input) -->
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Camera Limit</label>
                        <input type="number" x-model="form.switcher.secondary.cameraLimit" min="0" max="20"
                               class="w-full px-3 py-2 border border-slate-300 rounded-lg">
                        <p class="text-xs text-slate-500 mt-1">Max 20 cameras (0 = disabled)</p>
                    </div>

                    <!-- Buttons -->
                    <div class="flex gap-2">
                        <button @click="showSecondaryConfig = false"
                                class="flex-1 px-4 py-2.5 text-sm font-medium text-slate-600
                                       border border-slate-300 rounded-xl hover:bg-slate-50">
                            Cancel
                        </button>
                        <button @click="saveSecondarySwitcher()"
                                class="flex-1 px-4 py-2.5 text-sm font-medium text-white
                                       bg-purple-600 rounded-xl hover:bg-purple-700">
                            Save
                        </button>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script src="js/app.bundle.js"></script>
</body>
</html>
